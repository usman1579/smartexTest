4e600835546a216c06e7cf54d34bcf92
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var React = _interopRequireWildcard(require("react"));
var _useAndroidRippleForView = _interopRequireDefault(require("./useAndroidRippleForView"));
var _PressabilityDebug = require("../../Pressability/PressabilityDebug");
var _usePressability = _interopRequireDefault(require("../../Pressability/usePressability"));
var _View = _interopRequireDefault(require("../View/View"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["accessible", "android_disableSound", "android_ripple", "cancelable", "children", "delayHoverIn", "delayHoverOut", "delayLongPress", "disabled", "focusable", "hitSlop", "onHoverIn", "onHoverOut", "onLongPress", "onPress", "onPressIn", "onPressOut", "pressRetentionOffset", "style", "testOnly_pressed", "unstable_pressDelay"];
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function Pressable(props, forwardedRef) {
  var accessible = props.accessible,
    android_disableSound = props.android_disableSound,
    android_ripple = props.android_ripple,
    cancelable = props.cancelable,
    children = props.children,
    delayHoverIn = props.delayHoverIn,
    delayHoverOut = props.delayHoverOut,
    delayLongPress = props.delayLongPress,
    disabled = props.disabled,
    focusable = props.focusable,
    hitSlop = props.hitSlop,
    onHoverIn = props.onHoverIn,
    onHoverOut = props.onHoverOut,
    onLongPress = props.onLongPress,
    onPress = props.onPress,
    _onPressIn = props.onPressIn,
    _onPressOut = props.onPressOut,
    pressRetentionOffset = props.pressRetentionOffset,
    style = props.style,
    testOnly_pressed = props.testOnly_pressed,
    unstable_pressDelay = props.unstable_pressDelay,
    restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var viewRef = (0, React.useRef)(null);
  (0, React.useImperativeHandle)(forwardedRef, function () {
    return viewRef.current;
  });
  var android_rippleConfig = (0, _useAndroidRippleForView.default)(android_ripple, viewRef);
  var _usePressState = usePressState(testOnly_pressed === true),
    _usePressState2 = (0, _slicedToArray2.default)(_usePressState, 2),
    pressed = _usePressState2[0],
    setPressed = _usePressState2[1];
  var accessibilityState = disabled != null ? Object.assign({}, props.accessibilityState, {
    disabled: disabled
  }) : props.accessibilityState;
  var restPropsWithDefaults = Object.assign({}, restProps, android_rippleConfig == null ? void 0 : android_rippleConfig.viewProps, {
    accessible: accessible !== false,
    accessibilityState: accessibilityState,
    focusable: focusable !== false,
    hitSlop: hitSlop
  });
  var config = (0, React.useMemo)(function () {
    return {
      cancelable: cancelable,
      disabled: disabled,
      hitSlop: hitSlop,
      pressRectOffset: pressRetentionOffset,
      android_disableSound: android_disableSound,
      delayHoverIn: delayHoverIn,
      delayHoverOut: delayHoverOut,
      delayLongPress: delayLongPress,
      delayPressIn: unstable_pressDelay,
      onHoverIn: onHoverIn,
      onHoverOut: onHoverOut,
      onLongPress: onLongPress,
      onPress: onPress,
      onPressIn: function onPressIn(event) {
        if (android_rippleConfig != null) {
          android_rippleConfig.onPressIn(event);
        }
        setPressed(true);
        if (_onPressIn != null) {
          _onPressIn(event);
        }
      },
      onPressMove: android_rippleConfig == null ? void 0 : android_rippleConfig.onPressMove,
      onPressOut: function onPressOut(event) {
        if (android_rippleConfig != null) {
          android_rippleConfig.onPressOut(event);
        }
        setPressed(false);
        if (_onPressOut != null) {
          _onPressOut(event);
        }
      }
    };
  }, [android_disableSound, android_rippleConfig, cancelable, delayHoverIn, delayHoverOut, delayLongPress, disabled, hitSlop, onHoverIn, onHoverOut, onLongPress, onPress, _onPressIn, _onPressOut, pressRetentionOffset, setPressed, unstable_pressDelay]);
  var eventHandlers = (0, _usePressability.default)(config);
  return (0, _jsxRuntime.jsxs)(_View.default, Object.assign({}, restPropsWithDefaults, eventHandlers, {
    ref: viewRef,
    style: typeof style === 'function' ? style({
      pressed: pressed
    }) : style,
    collapsable: false,
    children: [typeof children === 'function' ? children({
      pressed: pressed
    }) : children, __DEV__ ? (0, _jsxRuntime.jsx)(_PressabilityDebug.PressabilityDebugView, {
      color: "red",
      hitSlop: hitSlop
    }) : null]
  }));
}
function usePressState(forcePressed) {
  var _useState = (0, React.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    pressed = _useState2[0],
    setPressed = _useState2[1];
  return [pressed || forcePressed, setPressed];
}
var MemoedPressable = React.memo(React.forwardRef(Pressable));
MemoedPressable.displayName = 'Pressable';
var _default = MemoedPressable;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQcmVzc2FibGUiLCJwcm9wcyIsImZvcndhcmRlZFJlZiIsImFjY2Vzc2libGUiLCJhbmRyb2lkX2Rpc2FibGVTb3VuZCIsImFuZHJvaWRfcmlwcGxlIiwiY2FuY2VsYWJsZSIsImNoaWxkcmVuIiwiZGVsYXlIb3ZlckluIiwiZGVsYXlIb3Zlck91dCIsImRlbGF5TG9uZ1ByZXNzIiwiZGlzYWJsZWQiLCJmb2N1c2FibGUiLCJoaXRTbG9wIiwib25Ib3ZlckluIiwib25Ib3Zlck91dCIsIm9uTG9uZ1ByZXNzIiwib25QcmVzcyIsIm9uUHJlc3NJbiIsIm9uUHJlc3NPdXQiLCJwcmVzc1JldGVudGlvbk9mZnNldCIsInN0eWxlIiwidGVzdE9ubHlfcHJlc3NlZCIsInVuc3RhYmxlX3ByZXNzRGVsYXkiLCJyZXN0UHJvcHMiLCJ2aWV3UmVmIiwidXNlUmVmIiwidXNlSW1wZXJhdGl2ZUhhbmRsZSIsImN1cnJlbnQiLCJhbmRyb2lkX3JpcHBsZUNvbmZpZyIsInVzZUFuZHJvaWRSaXBwbGVGb3JWaWV3IiwidXNlUHJlc3NTdGF0ZSIsInByZXNzZWQiLCJzZXRQcmVzc2VkIiwiYWNjZXNzaWJpbGl0eVN0YXRlIiwicmVzdFByb3BzV2l0aERlZmF1bHRzIiwidmlld1Byb3BzIiwiY29uZmlnIiwidXNlTWVtbyIsInByZXNzUmVjdE9mZnNldCIsImRlbGF5UHJlc3NJbiIsImV2ZW50Iiwib25QcmVzc01vdmUiLCJldmVudEhhbmRsZXJzIiwidXNlUHJlc3NhYmlsaXR5IiwiX19ERVZfXyIsImZvcmNlUHJlc3NlZCIsInVzZVN0YXRlIiwiTWVtb2VkUHJlc3NhYmxlIiwiUmVhY3QiLCJtZW1vIiwiZm9yd2FyZFJlZiIsImRpc3BsYXlOYW1lIl0sInNvdXJjZXMiOlsiUHJlc3NhYmxlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3VzZU1lbW8sIHVzZVN0YXRlLCB1c2VSZWYsIHVzZUltcGVyYXRpdmVIYW5kbGV9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB1c2VBbmRyb2lkUmlwcGxlRm9yVmlldywge1xuICB0eXBlIFJpcHBsZUNvbmZpZyxcbn0gZnJvbSAnLi91c2VBbmRyb2lkUmlwcGxlRm9yVmlldyc7XG5pbXBvcnQgdHlwZSB7XG4gIEFjY2Vzc2liaWxpdHlBY3Rpb25FdmVudCxcbiAgQWNjZXNzaWJpbGl0eUFjdGlvbkluZm8sXG4gIEFjY2Vzc2liaWxpdHlSb2xlLFxuICBBY2Nlc3NpYmlsaXR5U3RhdGUsXG4gIEFjY2Vzc2liaWxpdHlWYWx1ZSxcbn0gZnJvbSAnLi4vVmlldy9WaWV3QWNjZXNzaWJpbGl0eSc7XG5pbXBvcnQge1ByZXNzYWJpbGl0eURlYnVnVmlld30gZnJvbSAnLi4vLi4vUHJlc3NhYmlsaXR5L1ByZXNzYWJpbGl0eURlYnVnJztcbmltcG9ydCB1c2VQcmVzc2FiaWxpdHkgZnJvbSAnLi4vLi4vUHJlc3NhYmlsaXR5L3VzZVByZXNzYWJpbGl0eSc7XG5pbXBvcnQge3R5cGUgUmVjdE9yU2l6ZX0gZnJvbSAnLi4vLi4vU3R5bGVTaGVldC9SZWN0JztcbmltcG9ydCB0eXBlIHtcbiAgTGF5b3V0RXZlbnQsXG4gIE1vdXNlRXZlbnQsXG4gIFByZXNzRXZlbnQsXG59IGZyb20gJy4uLy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCBWaWV3IGZyb20gJy4uL1ZpZXcvVmlldyc7XG5cbnR5cGUgVmlld1N0eWxlUHJvcCA9ICRFbGVtZW50VHlwZTxSZWFjdC5FbGVtZW50Q29uZmlnPHR5cGVvZiBWaWV3PiwgJ3N0eWxlJz47XG5cbmV4cG9ydCB0eXBlIFN0YXRlQ2FsbGJhY2tUeXBlID0gJFJlYWRPbmx5PHt8XG4gIHByZXNzZWQ6IGJvb2xlYW4sXG58fT47XG5cbnR5cGUgUHJvcHMgPSAkUmVhZE9ubHk8e3xcbiAgLyoqXG4gICAqIEFjY2Vzc2liaWxpdHkuXG4gICAqL1xuICBhY2Nlc3NpYmlsaXR5QWN0aW9ucz86ID8kUmVhZE9ubHlBcnJheTxBY2Nlc3NpYmlsaXR5QWN0aW9uSW5mbz4sXG4gIGFjY2Vzc2liaWxpdHlFbGVtZW50c0hpZGRlbj86ID9ib29sZWFuLFxuICBhY2Nlc3NpYmlsaXR5SGludD86ID9TdHJpbmdpc2gsXG4gIGFjY2Vzc2liaWxpdHlMYW5ndWFnZT86ID9TdHJpbmdpc2gsXG4gIGFjY2Vzc2liaWxpdHlJZ25vcmVzSW52ZXJ0Q29sb3JzPzogP2Jvb2xlYW4sXG4gIGFjY2Vzc2liaWxpdHlMYWJlbD86ID9TdHJpbmdpc2gsXG4gIGFjY2Vzc2liaWxpdHlMaXZlUmVnaW9uPzogPygnbm9uZScgfCAncG9saXRlJyB8ICdhc3NlcnRpdmUnKSxcbiAgYWNjZXNzaWJpbGl0eVJvbGU/OiA/QWNjZXNzaWJpbGl0eVJvbGUsXG4gIGFjY2Vzc2liaWxpdHlTdGF0ZT86ID9BY2Nlc3NpYmlsaXR5U3RhdGUsXG4gIGFjY2Vzc2liaWxpdHlWYWx1ZT86ID9BY2Nlc3NpYmlsaXR5VmFsdWUsXG4gIGFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbD86ID9ib29sZWFuLFxuICBhY2Nlc3NpYmxlPzogP2Jvb2xlYW4sXG4gIGZvY3VzYWJsZT86ID9ib29sZWFuLFxuICBpbXBvcnRhbnRGb3JBY2Nlc3NpYmlsaXR5PzogPygnYXV0bycgfCAneWVzJyB8ICdubycgfCAnbm8taGlkZS1kZXNjZW5kYW50cycpLFxuICBvbkFjY2Vzc2liaWxpdHlBY3Rpb24/OiA/KGV2ZW50OiBBY2Nlc3NpYmlsaXR5QWN0aW9uRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIGEgcHJlc3MgZ2VzdHVyZSBjYW4gYmUgaW50ZXJydXB0ZWQgYnkgYSBwYXJlbnQgZ2VzdHVyZSBzdWNoIGFzIGFcbiAgICogc2Nyb2xsIGV2ZW50LiBEZWZhdWx0cyB0byB0cnVlLlxuICAgKi9cbiAgY2FuY2VsYWJsZT86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBFaXRoZXIgY2hpbGRyZW4gb3IgYSByZW5kZXIgcHJvcCB0aGF0IHJlY2VpdmVzIGEgYm9vbGVhbiByZWZsZWN0aW5nIHdoZXRoZXJcbiAgICogdGhlIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgcHJlc3NlZC5cbiAgICovXG4gIGNoaWxkcmVuOiBSZWFjdC5Ob2RlIHwgKChzdGF0ZTogU3RhdGVDYWxsYmFja1R5cGUpID0+IFJlYWN0Lk5vZGUpLFxuXG4gIC8qKlxuICAgKiBEdXJhdGlvbiB0byB3YWl0IGFmdGVyIGhvdmVyIGluIGJlZm9yZSBjYWxsaW5nIGBvbkhvdmVySW5gLlxuICAgKi9cbiAgZGVsYXlIb3ZlckluPzogP251bWJlcixcblxuICAvKipcbiAgICogRHVyYXRpb24gdG8gd2FpdCBhZnRlciBob3ZlciBvdXQgYmVmb3JlIGNhbGxpbmcgYG9uSG92ZXJPdXRgLlxuICAgKi9cbiAgZGVsYXlIb3Zlck91dD86ID9udW1iZXIsXG5cbiAgLyoqXG4gICAqIER1cmF0aW9uIChpbiBtaWxsaXNlY29uZHMpIGZyb20gYG9uUHJlc3NJbmAgYmVmb3JlIGBvbkxvbmdQcmVzc2AgaXMgY2FsbGVkLlxuICAgKi9cbiAgZGVsYXlMb25nUHJlc3M/OiA/bnVtYmVyLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBwcmVzcyBiZWhhdmlvciBpcyBkaXNhYmxlZC5cbiAgICovXG4gIGRpc2FibGVkPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uYWwgZGlzdGFuY2Ugb3V0c2lkZSBvZiB0aGlzIHZpZXcgaW4gd2hpY2ggYSBwcmVzcyBpcyBkZXRlY3RlZC5cbiAgICovXG4gIGhpdFNsb3A/OiA/UmVjdE9yU2l6ZSxcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBkaXN0YW5jZSBvdXRzaWRlIG9mIHRoaXMgdmlldyBpbiB3aGljaCBhIHRvdWNoIGlzIGNvbnNpZGVyZWQgYVxuICAgKiBwcmVzcyBiZWZvcmUgYG9uUHJlc3NPdXRgIGlzIHRyaWdnZXJlZC5cbiAgICovXG4gIHByZXNzUmV0ZW50aW9uT2Zmc2V0PzogP1JlY3RPclNpemUsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoaXMgdmlldydzIGxheW91dCBjaGFuZ2VzLlxuICAgKi9cbiAgb25MYXlvdXQ/OiA/KGV2ZW50OiBMYXlvdXRFdmVudCkgPT4gbWl4ZWQsXG5cbiAgLyoqXG4gICAqIENhbGxlZCB3aGVuIHRoZSBob3ZlciBpcyBhY3RpdmF0ZWQgdG8gcHJvdmlkZSB2aXN1YWwgZmVlZGJhY2suXG4gICAqL1xuICBvbkhvdmVySW4/OiA/KGV2ZW50OiBNb3VzZUV2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gdGhlIGhvdmVyIGlzIGRlYWN0aXZhdGVkIHRvIHVuZG8gdmlzdWFsIGZlZWRiYWNrLlxuICAgKi9cbiAgb25Ib3Zlck91dD86ID8oZXZlbnQ6IE1vdXNlRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIGxvbmctdGFwIGdlc3R1cmUgaXMgZGV0ZWN0ZWQuXG4gICAqL1xuICBvbkxvbmdQcmVzcz86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiBhIHNpbmdsZSB0YXAgZ2VzdHVyZSBpcyBkZXRlY3RlZC5cbiAgICovXG4gIG9uUHJlc3M/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSB0b3VjaCBpcyBlbmdhZ2VkIGJlZm9yZSBgb25QcmVzc2AuXG4gICAqL1xuICBvblByZXNzSW4/OiA/KGV2ZW50OiBQcmVzc0V2ZW50KSA9PiBtaXhlZCxcblxuICAvKipcbiAgICogQ2FsbGVkIHdoZW4gYSB0b3VjaCBpcyByZWxlYXNlZCBiZWZvcmUgYG9uUHJlc3NgLlxuICAgKi9cbiAgb25QcmVzc091dD86ID8oZXZlbnQ6IFByZXNzRXZlbnQpID0+IG1peGVkLFxuXG4gIC8qKlxuICAgKiBFaXRoZXIgdmlldyBzdHlsZXMgb3IgYSBmdW5jdGlvbiB0aGF0IHJlY2VpdmVzIGEgYm9vbGVhbiByZWZsZWN0aW5nIHdoZXRoZXJcbiAgICogdGhlIGNvbXBvbmVudCBpcyBjdXJyZW50bHkgcHJlc3NlZCBhbmQgcmV0dXJucyB2aWV3IHN0eWxlcy5cbiAgICovXG4gIHN0eWxlPzogVmlld1N0eWxlUHJvcCB8ICgoc3RhdGU6IFN0YXRlQ2FsbGJhY2tUeXBlKSA9PiBWaWV3U3R5bGVQcm9wKSxcblxuICAvKipcbiAgICogSWRlbnRpZmllciB1c2VkIHRvIGZpbmQgdGhpcyB2aWV3IGluIHRlc3RzLlxuICAgKi9cbiAgdGVzdElEPzogP3N0cmluZyxcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgZG9lc24ndCBwbGF5IHN5c3RlbSBzb3VuZCBvbiB0b3VjaC5cbiAgICovXG4gIGFuZHJvaWRfZGlzYWJsZVNvdW5kPzogP2Jvb2xlYW4sXG5cbiAgLyoqXG4gICAqIEVuYWJsZXMgdGhlIEFuZHJvaWQgcmlwcGxlIGVmZmVjdCBhbmQgY29uZmlndXJlcyBpdHMgY29sb3IuXG4gICAqL1xuICBhbmRyb2lkX3JpcHBsZT86ID9SaXBwbGVDb25maWcsXG5cbiAgLyoqXG4gICAqIFVzZWQgb25seSBmb3IgZG9jdW1lbnRhdGlvbiBvciB0ZXN0aW5nIChlLmcuIHNuYXBzaG90IHRlc3RpbmcpLlxuICAgKi9cbiAgdGVzdE9ubHlfcHJlc3NlZD86ID9ib29sZWFuLFxuXG4gIC8qKlxuICAgKiBEdXJhdGlvbiB0byB3YWl0IGFmdGVyIHByZXNzIGRvd24gYmVmb3JlIGNhbGxpbmcgYG9uUHJlc3NJbmAuXG4gICAqL1xuICB1bnN0YWJsZV9wcmVzc0RlbGF5PzogP251bWJlcixcbnx9PjtcblxuLyoqXG4gKiBDb21wb25lbnQgdXNlZCB0byBidWlsZCBkaXNwbGF5IGNvbXBvbmVudHMgdGhhdCBzaG91bGQgcmVzcG9uZCB0byB3aGV0aGVyIHRoZVxuICogY29tcG9uZW50IGlzIGN1cnJlbnRseSBwcmVzc2VkIG9yIG5vdC5cbiAqL1xuLyogJEZsb3dGaXhNZVttaXNzaW5nLWxvY2FsLWFubm90XSBUaGUgdHlwZSBhbm5vdGF0aW9uKHMpIHJlcXVpcmVkIGJ5IEZsb3cnc1xuICogTFRJIHVwZGF0ZSBjb3VsZCBub3QgYmUgYWRkZWQgdmlhIGNvZGVtb2QgKi9cbmZ1bmN0aW9uIFByZXNzYWJsZShwcm9wczogUHJvcHMsIGZvcndhcmRlZFJlZik6IFJlYWN0Lk5vZGUge1xuICBjb25zdCB7XG4gICAgYWNjZXNzaWJsZSxcbiAgICBhbmRyb2lkX2Rpc2FibGVTb3VuZCxcbiAgICBhbmRyb2lkX3JpcHBsZSxcbiAgICBjYW5jZWxhYmxlLFxuICAgIGNoaWxkcmVuLFxuICAgIGRlbGF5SG92ZXJJbixcbiAgICBkZWxheUhvdmVyT3V0LFxuICAgIGRlbGF5TG9uZ1ByZXNzLFxuICAgIGRpc2FibGVkLFxuICAgIGZvY3VzYWJsZSxcbiAgICBoaXRTbG9wLFxuICAgIG9uSG92ZXJJbixcbiAgICBvbkhvdmVyT3V0LFxuICAgIG9uTG9uZ1ByZXNzLFxuICAgIG9uUHJlc3MsXG4gICAgb25QcmVzc0luLFxuICAgIG9uUHJlc3NPdXQsXG4gICAgcHJlc3NSZXRlbnRpb25PZmZzZXQsXG4gICAgc3R5bGUsXG4gICAgdGVzdE9ubHlfcHJlc3NlZCxcbiAgICB1bnN0YWJsZV9wcmVzc0RlbGF5LFxuICAgIC4uLnJlc3RQcm9wc1xuICB9ID0gcHJvcHM7XG5cbiAgY29uc3Qgdmlld1JlZiA9IHVzZVJlZjxSZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBWaWV3PiB8IG51bGw+KG51bGwpO1xuICB1c2VJbXBlcmF0aXZlSGFuZGxlKGZvcndhcmRlZFJlZiwgKCkgPT4gdmlld1JlZi5jdXJyZW50KTtcblxuICBjb25zdCBhbmRyb2lkX3JpcHBsZUNvbmZpZyA9IHVzZUFuZHJvaWRSaXBwbGVGb3JWaWV3KGFuZHJvaWRfcmlwcGxlLCB2aWV3UmVmKTtcblxuICBjb25zdCBbcHJlc3NlZCwgc2V0UHJlc3NlZF0gPSB1c2VQcmVzc1N0YXRlKHRlc3RPbmx5X3ByZXNzZWQgPT09IHRydWUpO1xuXG4gIGNvbnN0IGFjY2Vzc2liaWxpdHlTdGF0ZSA9XG4gICAgZGlzYWJsZWQgIT0gbnVsbFxuICAgICAgPyB7Li4ucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlLCBkaXNhYmxlZH1cbiAgICAgIDogcHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlO1xuXG4gIGNvbnN0IHJlc3RQcm9wc1dpdGhEZWZhdWx0czogUmVhY3QuRWxlbWVudENvbmZpZzx0eXBlb2YgVmlldz4gPSB7XG4gICAgLi4ucmVzdFByb3BzLFxuICAgIC4uLmFuZHJvaWRfcmlwcGxlQ29uZmlnPy52aWV3UHJvcHMsXG4gICAgYWNjZXNzaWJsZTogYWNjZXNzaWJsZSAhPT0gZmFsc2UsXG4gICAgYWNjZXNzaWJpbGl0eVN0YXRlLFxuICAgIGZvY3VzYWJsZTogZm9jdXNhYmxlICE9PSBmYWxzZSxcbiAgICBoaXRTbG9wLFxuICB9O1xuXG4gIGNvbnN0IGNvbmZpZyA9IHVzZU1lbW8oXG4gICAgKCkgPT4gKHtcbiAgICAgIGNhbmNlbGFibGUsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGhpdFNsb3AsXG4gICAgICBwcmVzc1JlY3RPZmZzZXQ6IHByZXNzUmV0ZW50aW9uT2Zmc2V0LFxuICAgICAgYW5kcm9pZF9kaXNhYmxlU291bmQsXG4gICAgICBkZWxheUhvdmVySW4sXG4gICAgICBkZWxheUhvdmVyT3V0LFxuICAgICAgZGVsYXlMb25nUHJlc3MsXG4gICAgICBkZWxheVByZXNzSW46IHVuc3RhYmxlX3ByZXNzRGVsYXksXG4gICAgICBvbkhvdmVySW4sXG4gICAgICBvbkhvdmVyT3V0LFxuICAgICAgb25Mb25nUHJlc3MsXG4gICAgICBvblByZXNzLFxuICAgICAgb25QcmVzc0luKGV2ZW50OiBQcmVzc0V2ZW50KTogdm9pZCB7XG4gICAgICAgIGlmIChhbmRyb2lkX3JpcHBsZUNvbmZpZyAhPSBudWxsKSB7XG4gICAgICAgICAgYW5kcm9pZF9yaXBwbGVDb25maWcub25QcmVzc0luKGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRQcmVzc2VkKHRydWUpO1xuICAgICAgICBpZiAob25QcmVzc0luICE9IG51bGwpIHtcbiAgICAgICAgICBvblByZXNzSW4oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25QcmVzc01vdmU6IGFuZHJvaWRfcmlwcGxlQ29uZmlnPy5vblByZXNzTW92ZSxcbiAgICAgIG9uUHJlc3NPdXQoZXZlbnQ6IFByZXNzRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgaWYgKGFuZHJvaWRfcmlwcGxlQ29uZmlnICE9IG51bGwpIHtcbiAgICAgICAgICBhbmRyb2lkX3JpcHBsZUNvbmZpZy5vblByZXNzT3V0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgICBzZXRQcmVzc2VkKGZhbHNlKTtcbiAgICAgICAgaWYgKG9uUHJlc3NPdXQgIT0gbnVsbCkge1xuICAgICAgICAgIG9uUHJlc3NPdXQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pLFxuICAgIFtcbiAgICAgIGFuZHJvaWRfZGlzYWJsZVNvdW5kLFxuICAgICAgYW5kcm9pZF9yaXBwbGVDb25maWcsXG4gICAgICBjYW5jZWxhYmxlLFxuICAgICAgZGVsYXlIb3ZlckluLFxuICAgICAgZGVsYXlIb3Zlck91dCxcbiAgICAgIGRlbGF5TG9uZ1ByZXNzLFxuICAgICAgZGlzYWJsZWQsXG4gICAgICBoaXRTbG9wLFxuICAgICAgb25Ib3ZlckluLFxuICAgICAgb25Ib3Zlck91dCxcbiAgICAgIG9uTG9uZ1ByZXNzLFxuICAgICAgb25QcmVzcyxcbiAgICAgIG9uUHJlc3NJbixcbiAgICAgIG9uUHJlc3NPdXQsXG4gICAgICBwcmVzc1JldGVudGlvbk9mZnNldCxcbiAgICAgIHNldFByZXNzZWQsXG4gICAgICB1bnN0YWJsZV9wcmVzc0RlbGF5LFxuICAgIF0sXG4gICk7XG4gIGNvbnN0IGV2ZW50SGFuZGxlcnMgPSB1c2VQcmVzc2FiaWxpdHkoY29uZmlnKTtcblxuICByZXR1cm4gKFxuICAgIDxWaWV3XG4gICAgICB7Li4ucmVzdFByb3BzV2l0aERlZmF1bHRzfVxuICAgICAgey4uLmV2ZW50SGFuZGxlcnN9XG4gICAgICByZWY9e3ZpZXdSZWZ9XG4gICAgICBzdHlsZT17dHlwZW9mIHN0eWxlID09PSAnZnVuY3Rpb24nID8gc3R5bGUoe3ByZXNzZWR9KSA6IHN0eWxlfVxuICAgICAgY29sbGFwc2FibGU9e2ZhbHNlfT5cbiAgICAgIHt0eXBlb2YgY2hpbGRyZW4gPT09ICdmdW5jdGlvbicgPyBjaGlsZHJlbih7cHJlc3NlZH0pIDogY2hpbGRyZW59XG4gICAgICB7X19ERVZfXyA/IDxQcmVzc2FiaWxpdHlEZWJ1Z1ZpZXcgY29sb3I9XCJyZWRcIiBoaXRTbG9wPXtoaXRTbG9wfSAvPiA6IG51bGx9XG4gICAgPC9WaWV3PlxuICApO1xufVxuXG5mdW5jdGlvbiB1c2VQcmVzc1N0YXRlKGZvcmNlUHJlc3NlZDogYm9vbGVhbik6IFtib29sZWFuLCAoYm9vbGVhbikgPT4gdm9pZF0ge1xuICBjb25zdCBbcHJlc3NlZCwgc2V0UHJlc3NlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIHJldHVybiBbcHJlc3NlZCB8fCBmb3JjZVByZXNzZWQsIHNldFByZXNzZWRdO1xufVxuXG5jb25zdCBNZW1vZWRQcmVzc2FibGUgPSBSZWFjdC5tZW1vKFJlYWN0LmZvcndhcmRSZWYoUHJlc3NhYmxlKSk7XG5NZW1vZWRQcmVzc2FibGUuZGlzcGxheU5hbWUgPSAnUHJlc3NhYmxlJztcblxuZXhwb3J0IGRlZmF1bHQgKE1lbW9lZFByZXNzYWJsZTogUmVhY3QuQWJzdHJhY3RDb21wb25lbnQ8XG4gIFByb3BzLFxuICBSZWFjdC5FbGVtZW50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