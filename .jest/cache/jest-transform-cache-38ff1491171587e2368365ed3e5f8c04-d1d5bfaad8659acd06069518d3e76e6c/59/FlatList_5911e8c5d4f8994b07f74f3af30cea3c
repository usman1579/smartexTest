48f3c84e4aa1dc1a454b96fa7b794f47
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _VirtualizeUtils = require("./VirtualizeUtils");
var _memoizeOne = _interopRequireDefault(require("memoize-one"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["numColumns", "columnWrapperStyle", "removeClippedSubviews", "strictMode"];
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var Platform = require('../Utilities/Platform');
var deepDiffer = require('../Utilities/differ/deepDiffer');
var React = require('react');
var View = require('../Components/View/View');
var VirtualizedList = require('./VirtualizedList');
var StyleSheet = require('../StyleSheet/StyleSheet');
var invariant = require('invariant');
function removeClippedSubviewsOrDefault(removeClippedSubviews) {
  return removeClippedSubviews != null ? removeClippedSubviews : Platform.OS === 'android';
}
function numColumnsOrDefault(numColumns) {
  return numColumns != null ? numColumns : 1;
}
var FlatList = function (_React$PureComponent) {
  (0, _inherits2.default)(FlatList, _React$PureComponent);
  var _super = _createSuper(FlatList);
  function FlatList(_props) {
    var _this;
    (0, _classCallCheck2.default)(this, FlatList);
    _this = _super.call(this, _props);
    _this._virtualizedListPairs = [];
    _this._captureRef = function (ref) {
      _this._listRef = ref;
    };
    _this._getItem = function (data, index) {
      var numColumns = numColumnsOrDefault(_this.props.numColumns);
      if (numColumns > 1) {
        var ret = [];
        for (var kk = 0; kk < numColumns; kk++) {
          var _item = data[index * numColumns + kk];
          if (_item != null) {
            ret.push(_item);
          }
        }
        return ret;
      } else {
        return data[index];
      }
    };
    _this._getItemCount = function (data) {
      if (data) {
        var numColumns = numColumnsOrDefault(_this.props.numColumns);
        return numColumns > 1 ? Math.ceil(data.length / numColumns) : data.length;
      } else {
        return 0;
      }
    };
    _this._keyExtractor = function (items, index) {
      var _this$props$keyExtrac;
      var numColumns = numColumnsOrDefault(_this.props.numColumns);
      var keyExtractor = (_this$props$keyExtrac = _this.props.keyExtractor) != null ? _this$props$keyExtrac : _VirtualizeUtils.keyExtractor;
      if (numColumns > 1) {
        if (Array.isArray(items)) {
          return items.map(function (item, kk) {
            return keyExtractor(item, index * numColumns + kk);
          }).join(':');
        } else {
          invariant(Array.isArray(items), 'FlatList: Encountered internal consistency error, expected each item to consist of an ' + 'array with 1-%s columns; instead, received a single item.', numColumns);
        }
      } else {
        return keyExtractor(items, index);
      }
    };
    _this._renderer = function (ListItemComponent, renderItem, columnWrapperStyle, numColumns, extraData) {
      var cols = numColumnsOrDefault(numColumns);
      var virtualizedListRenderKey = ListItemComponent ? 'ListItemComponent' : 'renderItem';
      var renderer = function renderer(props) {
        if (ListItemComponent) {
          return (0, _jsxRuntime.jsx)(ListItemComponent, Object.assign({}, props));
        } else if (renderItem) {
          return renderItem(props);
        } else {
          return null;
        }
      };
      return (0, _defineProperty2.default)({}, virtualizedListRenderKey, function (info) {
        if (cols > 1) {
          var _item2 = info.item,
            _index = info.index;
          invariant(Array.isArray(_item2), 'Expected array of items with numColumns > 1');
          return (0, _jsxRuntime.jsx)(View, {
            style: StyleSheet.compose(styles.row, columnWrapperStyle),
            children: _item2.map(function (it, kk) {
              var element = renderer({
                item: it,
                index: _index * cols + kk,
                separators: info.separators
              });
              return element != null ? (0, _jsxRuntime.jsx)(React.Fragment, {
                children: element
              }, kk) : null;
            })
          });
        } else {
          return renderer(info);
        }
      });
    };
    _this._memoizedRenderer = (0, _memoizeOne.default)(_this._renderer);
    _this._checkProps(_this.props);
    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._virtualizedListPairs = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityConfig: pair.viewabilityConfig,
          onViewableItemsChanged: _this._createOnViewableItemsChanged(pair.onViewableItemsChanged)
        };
      });
    } else if (_this.props.onViewableItemsChanged) {
      _this._virtualizedListPairs.push({
        viewabilityConfig: _this.props.viewabilityConfig,
        onViewableItemsChanged: _this._createOnViewableItemsChanged(_this.props.onViewableItemsChanged)
      });
    }
    return _this;
  }
  (0, _createClass2.default)(FlatList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      if (this._listRef) {
        this._listRef.scrollToEnd(params);
      }
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      if (this._listRef) {
        this._listRef.scrollToIndex(params);
      }
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      if (this._listRef) {
        this._listRef.scrollToItem(params);
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      if (this._listRef) {
        this._listRef.scrollToOffset(params);
      }
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      if (this._listRef) {
        this._listRef.recordInteraction();
      }
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      if (this._listRef) {
        this._listRef.flashScrollIndicators();
      }
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._listRef) {
        return this._listRef.getScrollResponder();
      }
    }
  }, {
    key: "getNativeScrollRef",
    value: function getNativeScrollRef() {
      if (this._listRef) {
        return this._listRef.getScrollRef();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._listRef) {
        return this._listRef.getScrollableNode();
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._listRef) {
        this._listRef.setNativeProps(props);
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      invariant(prevProps.numColumns === this.props.numColumns, 'Changing numColumns on the fly is not supported. Change the key prop on FlatList when ' + 'changing the number of columns to force a fresh render of the component.');
      invariant(prevProps.onViewableItemsChanged === this.props.onViewableItemsChanged, 'Changing onViewableItemsChanged on the fly is not supported');
      invariant(!deepDiffer(prevProps.viewabilityConfig, this.props.viewabilityConfig), 'Changing viewabilityConfig on the fly is not supported');
      invariant(prevProps.viewabilityConfigCallbackPairs === this.props.viewabilityConfigCallbackPairs, 'Changing viewabilityConfigCallbackPairs on the fly is not supported');
      this._checkProps(this.props);
    }
  }, {
    key: "_checkProps",
    value: function _checkProps(props) {
      var getItem = props.getItem,
        getItemCount = props.getItemCount,
        horizontal = props.horizontal,
        columnWrapperStyle = props.columnWrapperStyle,
        onViewableItemsChanged = props.onViewableItemsChanged,
        viewabilityConfigCallbackPairs = props.viewabilityConfigCallbackPairs;
      var numColumns = numColumnsOrDefault(this.props.numColumns);
      invariant(!getItem && !getItemCount, 'FlatList does not support custom data formats.');
      if (numColumns > 1) {
        invariant(!horizontal, 'numColumns does not support horizontal.');
      } else {
        invariant(!columnWrapperStyle, 'columnWrapperStyle not supported for single column lists');
      }
      invariant(!(onViewableItemsChanged && viewabilityConfigCallbackPairs), 'FlatList does not support setting both onViewableItemsChanged and ' + 'viewabilityConfigCallbackPairs.');
    }
  }, {
    key: "_pushMultiColumnViewable",
    value: function _pushMultiColumnViewable(arr, v) {
      var _this$props$keyExtrac2;
      var numColumns = numColumnsOrDefault(this.props.numColumns);
      var keyExtractor = (_this$props$keyExtrac2 = this.props.keyExtractor) != null ? _this$props$keyExtrac2 : _VirtualizeUtils.keyExtractor;
      v.item.forEach(function (item, ii) {
        invariant(v.index != null, 'Missing index!');
        var index = v.index * numColumns + ii;
        arr.push(Object.assign({}, v, {
          item: item,
          key: keyExtractor(item, index),
          index: index
        }));
      });
    }
  }, {
    key: "_createOnViewableItemsChanged",
    value: function _createOnViewableItemsChanged(onViewableItemsChanged) {
      var _this2 = this;
      return function (info) {
        var numColumns = numColumnsOrDefault(_this2.props.numColumns);
        if (onViewableItemsChanged) {
          if (numColumns > 1) {
            var changed = [];
            var viewableItems = [];
            info.viewableItems.forEach(function (v) {
              return _this2._pushMultiColumnViewable(viewableItems, v);
            });
            info.changed.forEach(function (v) {
              return _this2._pushMultiColumnViewable(changed, v);
            });
            onViewableItemsChanged({
              viewableItems: viewableItems,
              changed: changed
            });
          } else {
            onViewableItemsChanged(info);
          }
        }
      };
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props = this.props,
        numColumns = _this$props.numColumns,
        columnWrapperStyle = _this$props.columnWrapperStyle,
        _removeClippedSubviews = _this$props.removeClippedSubviews,
        _this$props$strictMod = _this$props.strictMode,
        strictMode = _this$props$strictMod === void 0 ? false : _this$props$strictMod,
        restProps = (0, _objectWithoutProperties2.default)(_this$props, _excluded);
      var renderer = strictMode ? this._memoizedRenderer : this._renderer;
      return (0, _jsxRuntime.jsx)(VirtualizedList, Object.assign({}, restProps, {
        getItem: this._getItem,
        getItemCount: this._getItemCount,
        keyExtractor: this._keyExtractor,
        ref: this._captureRef,
        viewabilityConfigCallbackPairs: this._virtualizedListPairs,
        removeClippedSubviews: removeClippedSubviewsOrDefault(_removeClippedSubviews)
      }, renderer(this.props.ListItemComponent, this.props.renderItem, columnWrapperStyle, numColumns, this.props.extraData)));
    }
  }]);
  return FlatList;
}(React.PureComponent);
var styles = StyleSheet.create({
  row: {
    flexDirection: 'row'
  }
});
module.exports = FlatList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQbGF0Zm9ybSIsInJlcXVpcmUiLCJkZWVwRGlmZmVyIiwiUmVhY3QiLCJWaWV3IiwiVmlydHVhbGl6ZWRMaXN0IiwiU3R5bGVTaGVldCIsImludmFyaWFudCIsInJlbW92ZUNsaXBwZWRTdWJ2aWV3c09yRGVmYXVsdCIsInJlbW92ZUNsaXBwZWRTdWJ2aWV3cyIsIk9TIiwibnVtQ29sdW1uc09yRGVmYXVsdCIsIm51bUNvbHVtbnMiLCJGbGF0TGlzdCIsInByb3BzIiwiX3ZpcnR1YWxpemVkTGlzdFBhaXJzIiwiX2NhcHR1cmVSZWYiLCJyZWYiLCJfbGlzdFJlZiIsIl9nZXRJdGVtIiwiZGF0YSIsImluZGV4IiwicmV0Iiwia2siLCJpdGVtIiwicHVzaCIsIl9nZXRJdGVtQ291bnQiLCJNYXRoIiwiY2VpbCIsImxlbmd0aCIsIl9rZXlFeHRyYWN0b3IiLCJpdGVtcyIsImtleUV4dHJhY3RvciIsImRlZmF1bHRLZXlFeHRyYWN0b3IiLCJBcnJheSIsImlzQXJyYXkiLCJtYXAiLCJqb2luIiwiX3JlbmRlcmVyIiwiTGlzdEl0ZW1Db21wb25lbnQiLCJyZW5kZXJJdGVtIiwiY29sdW1uV3JhcHBlclN0eWxlIiwiZXh0cmFEYXRhIiwiY29scyIsInZpcnR1YWxpemVkTGlzdFJlbmRlcktleSIsInJlbmRlcmVyIiwiaW5mbyIsImNvbXBvc2UiLCJzdHlsZXMiLCJyb3ciLCJpdCIsImVsZW1lbnQiLCJzZXBhcmF0b3JzIiwiX21lbW9pemVkUmVuZGVyZXIiLCJtZW1vaXplT25lIiwiX2NoZWNrUHJvcHMiLCJ2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMiLCJwYWlyIiwidmlld2FiaWxpdHlDb25maWciLCJvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwiX2NyZWF0ZU9uVmlld2FibGVJdGVtc0NoYW5nZWQiLCJwYXJhbXMiLCJzY3JvbGxUb0VuZCIsInNjcm9sbFRvSW5kZXgiLCJzY3JvbGxUb0l0ZW0iLCJzY3JvbGxUb09mZnNldCIsInJlY29yZEludGVyYWN0aW9uIiwiZmxhc2hTY3JvbGxJbmRpY2F0b3JzIiwiZ2V0U2Nyb2xsUmVzcG9uZGVyIiwiZ2V0U2Nyb2xsUmVmIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJzZXROYXRpdmVQcm9wcyIsInByZXZQcm9wcyIsImdldEl0ZW0iLCJnZXRJdGVtQ291bnQiLCJob3Jpem9udGFsIiwiYXJyIiwidiIsImZvckVhY2giLCJpaSIsImtleSIsImNoYW5nZWQiLCJ2aWV3YWJsZUl0ZW1zIiwiX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlIiwiX3JlbW92ZUNsaXBwZWRTdWJ2aWV3cyIsInN0cmljdE1vZGUiLCJyZXN0UHJvcHMiLCJQdXJlQ29tcG9uZW50IiwiY3JlYXRlIiwiZmxleERpcmVjdGlvbiIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJGbGF0TGlzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5jb25zdCBQbGF0Zm9ybSA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9QbGF0Zm9ybScpO1xuY29uc3QgZGVlcERpZmZlciA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9kaWZmZXIvZGVlcERpZmZlcicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuY29uc3QgVmlldyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9WaWV3Jyk7XG5jb25zdCBWaXJ0dWFsaXplZExpc3QgPSByZXF1aXJlKCcuL1ZpcnR1YWxpemVkTGlzdCcpO1xuY29uc3QgU3R5bGVTaGVldCA9IHJlcXVpcmUoJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCcpO1xuXG5jb25zdCBpbnZhcmlhbnQgPSByZXF1aXJlKCdpbnZhcmlhbnQnKTtcblxuaW1wb3J0IHR5cGVvZiBTY3JvbGxWaWV3TmF0aXZlQ29tcG9uZW50IGZyb20gJy4uL0NvbXBvbmVudHMvU2Nyb2xsVmlldy9TY3JvbGxWaWV3TmF0aXZlQ29tcG9uZW50JztcbmltcG9ydCB7dHlwZSBTY3JvbGxSZXNwb25kZXJUeXBlfSBmcm9tICcuLi9Db21wb25lbnRzL1Njcm9sbFZpZXcvU2Nyb2xsVmlldyc7XG5pbXBvcnQgdHlwZSB7Vmlld1N0eWxlUHJvcH0gZnJvbSAnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcbmltcG9ydCB0eXBlIHtcbiAgVmlld1Rva2VuLFxuICBWaWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcixcbn0gZnJvbSAnLi9WaWV3YWJpbGl0eUhlbHBlcic7XG5pbXBvcnQgdHlwZSB7UmVuZGVySXRlbVR5cGUsIFJlbmRlckl0ZW1Qcm9wc30gZnJvbSAnLi9WaXJ0dWFsaXplZExpc3QnO1xuaW1wb3J0IHtrZXlFeHRyYWN0b3IgYXMgZGVmYXVsdEtleUV4dHJhY3Rvcn0gZnJvbSAnLi9WaXJ0dWFsaXplVXRpbHMnO1xuaW1wb3J0IG1lbW9pemVPbmUgZnJvbSAnbWVtb2l6ZS1vbmUnO1xuXG50eXBlIFJlcXVpcmVkUHJvcHM8SXRlbVQ+ID0ge3xcbiAgLyoqXG4gICAqIEZvciBzaW1wbGljaXR5LCBkYXRhIGlzIGp1c3QgYSBwbGFpbiBhcnJheS4gSWYgeW91IHdhbnQgdG8gdXNlIHNvbWV0aGluZyBlbHNlLCBsaWtlIGFuXG4gICAqIGltbXV0YWJsZSBsaXN0LCB1c2UgdGhlIHVuZGVybHlpbmcgYFZpcnR1YWxpemVkTGlzdGAgZGlyZWN0bHkuXG4gICAqL1xuICBkYXRhOiA/JFJlYWRPbmx5QXJyYXk8SXRlbVQ+LFxufH07XG50eXBlIE9wdGlvbmFsUHJvcHM8SXRlbVQ+ID0ge3xcbiAgLyoqXG4gICAqIFRha2VzIGFuIGl0ZW0gZnJvbSBgZGF0YWAgYW5kIHJlbmRlcnMgaXQgaW50byB0aGUgbGlzdC4gRXhhbXBsZSB1c2FnZTpcbiAgICpcbiAgICogICAgIDxGbGF0TGlzdFxuICAgKiAgICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50PXtQbGF0Zm9ybS5PUyAhPT0gJ2FuZHJvaWQnICYmICh7aGlnaGxpZ2h0ZWR9KSA9PiAoXG4gICAqICAgICAgICAgPFZpZXcgc3R5bGU9e1tzdHlsZS5zZXBhcmF0b3IsIGhpZ2hsaWdodGVkICYmIHttYXJnaW5MZWZ0OiAwfV19IC8+XG4gICAqICAgICAgICl9XG4gICAqICAgICAgIGRhdGE9e1t7dGl0bGU6ICdUaXRsZSBUZXh0Jywga2V5OiAnaXRlbTEnfV19XG4gICAqICAgICAgIHJlbmRlckl0ZW09eyh7aXRlbSwgc2VwYXJhdG9yc30pID0+IChcbiAgICogICAgICAgICA8VG91Y2hhYmxlSGlnaGxpZ2h0XG4gICAqICAgICAgICAgICBvblByZXNzPXsoKSA9PiB0aGlzLl9vblByZXNzKGl0ZW0pfVxuICAgKiAgICAgICAgICAgb25TaG93VW5kZXJsYXk9e3NlcGFyYXRvcnMuaGlnaGxpZ2h0fVxuICAgKiAgICAgICAgICAgb25IaWRlVW5kZXJsYXk9e3NlcGFyYXRvcnMudW5oaWdobGlnaHR9PlxuICAgKiAgICAgICAgICAgPFZpZXcgc3R5bGU9e3tiYWNrZ3JvdW5kQ29sb3I6ICd3aGl0ZSd9fT5cbiAgICogICAgICAgICAgICAgPFRleHQ+e2l0ZW0udGl0bGV9PC9UZXh0PlxuICAgKiAgICAgICAgICAgPC9WaWV3PlxuICAgKiAgICAgICAgIDwvVG91Y2hhYmxlSGlnaGxpZ2h0PlxuICAgKiAgICAgICApfVxuICAgKiAgICAgLz5cbiAgICpcbiAgICogUHJvdmlkZXMgYWRkaXRpb25hbCBtZXRhZGF0YSBsaWtlIGBpbmRleGAgaWYgeW91IG5lZWQgaXQsIGFzIHdlbGwgYXMgYSBtb3JlIGdlbmVyaWNcbiAgICogYHNlcGFyYXRvcnMudXBkYXRlUHJvcHNgIGZ1bmN0aW9uIHdoaWNoIGxldCdzIHlvdSBzZXQgd2hhdGV2ZXIgcHJvcHMgeW91IHdhbnQgdG8gY2hhbmdlIHRoZVxuICAgKiByZW5kZXJpbmcgb2YgZWl0aGVyIHRoZSBsZWFkaW5nIHNlcGFyYXRvciBvciB0cmFpbGluZyBzZXBhcmF0b3IgaW4gY2FzZSB0aGUgbW9yZSBjb21tb25cbiAgICogYGhpZ2hsaWdodGAgYW5kIGB1bmhpZ2hsaWdodGAgKHdoaWNoIHNldCB0aGUgYGhpZ2hsaWdodGVkOiBib29sZWFuYCBwcm9wKSBhcmUgaW5zdWZmaWNpZW50IGZvclxuICAgKiB5b3VyIHVzZS1jYXNlLlxuICAgKi9cbiAgcmVuZGVySXRlbT86ID9SZW5kZXJJdGVtVHlwZTxJdGVtVD4sXG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIGN1c3RvbSBzdHlsZSBmb3IgbXVsdGktaXRlbSByb3dzIGdlbmVyYXRlZCB3aGVuIG51bUNvbHVtbnMgPiAxLlxuICAgKi9cbiAgY29sdW1uV3JhcHBlclN0eWxlPzogVmlld1N0eWxlUHJvcCxcbiAgLyoqXG4gICAqIEEgbWFya2VyIHByb3BlcnR5IGZvciB0ZWxsaW5nIHRoZSBsaXN0IHRvIHJlLXJlbmRlciAoc2luY2UgaXQgaW1wbGVtZW50cyBgUHVyZUNvbXBvbmVudGApLiBJZlxuICAgKiBhbnkgb2YgeW91ciBgcmVuZGVySXRlbWAsIEhlYWRlciwgRm9vdGVyLCBldGMuIGZ1bmN0aW9ucyBkZXBlbmQgb24gYW55dGhpbmcgb3V0c2lkZSBvZiB0aGVcbiAgICogYGRhdGFgIHByb3AsIHN0aWNrIGl0IGhlcmUgYW5kIHRyZWF0IGl0IGltbXV0YWJseS5cbiAgICovXG4gIGV4dHJhRGF0YT86IGFueSxcbiAgLyoqXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBpcyBhbiBvcHRpb25hbCBvcHRpbWl6YXRpb25zIHRoYXQgbGV0IHVzIHNraXAgbWVhc3VyZW1lbnQgb2YgZHluYW1pYyBjb250ZW50IGlmXG4gICAqIHlvdSBrbm93IHRoZSBoZWlnaHQgb2YgaXRlbXMgYSBwcmlvcmkuIGBnZXRJdGVtTGF5b3V0YCBpcyB0aGUgbW9zdCBlZmZpY2llbnQsIGFuZCBpcyBlYXN5IHRvXG4gICAqIHVzZSBpZiB5b3UgaGF2ZSBmaXhlZCBoZWlnaHQgaXRlbXMsIGZvciBleGFtcGxlOlxuICAgKlxuICAgKiAgICAgZ2V0SXRlbUxheW91dD17KGRhdGEsIGluZGV4KSA9PiAoXG4gICAqICAgICAgIHtsZW5ndGg6IElURU1fSEVJR0hULCBvZmZzZXQ6IElURU1fSEVJR0hUICogaW5kZXgsIGluZGV4fVxuICAgKiAgICAgKX1cbiAgICpcbiAgICogQWRkaW5nIGBnZXRJdGVtTGF5b3V0YCBjYW4gYmUgYSBncmVhdCBwZXJmb3JtYW5jZSBib29zdCBmb3IgbGlzdHMgb2Ygc2V2ZXJhbCBodW5kcmVkIGl0ZW1zLlxuICAgKiBSZW1lbWJlciB0byBpbmNsdWRlIHNlcGFyYXRvciBsZW5ndGggKGhlaWdodCBvciB3aWR0aCkgaW4geW91ciBvZmZzZXQgY2FsY3VsYXRpb24gaWYgeW91XG4gICAqIHNwZWNpZnkgYEl0ZW1TZXBhcmF0b3JDb21wb25lbnRgLlxuICAgKi9cbiAgZ2V0SXRlbUxheW91dD86IChcbiAgICBkYXRhOiA/QXJyYXk8SXRlbVQ+LFxuICAgIGluZGV4OiBudW1iZXIsXG4gICkgPT4ge1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgLi4uXG4gIH0sXG4gIC8qKlxuICAgKiBJZiB0cnVlLCByZW5kZXJzIGl0ZW1zIG5leHQgdG8gZWFjaCBvdGhlciBob3Jpem9udGFsbHkgaW5zdGVhZCBvZiBzdGFja2VkIHZlcnRpY2FsbHkuXG4gICAqL1xuICBob3Jpem9udGFsPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBIb3cgbWFueSBpdGVtcyB0byByZW5kZXIgaW4gdGhlIGluaXRpYWwgYmF0Y2guIFRoaXMgc2hvdWxkIGJlIGVub3VnaCB0byBmaWxsIHRoZSBzY3JlZW4gYnV0IG5vdFxuICAgKiBtdWNoIG1vcmUuIE5vdGUgdGhlc2UgaXRlbXMgd2lsbCBuZXZlciBiZSB1bm1vdW50ZWQgYXMgcGFydCBvZiB0aGUgd2luZG93ZWQgcmVuZGVyaW5nIGluIG9yZGVyXG4gICAqIHRvIGltcHJvdmUgcGVyY2VpdmVkIHBlcmZvcm1hbmNlIG9mIHNjcm9sbC10by10b3AgYWN0aW9ucy5cbiAgICovXG4gIGluaXRpYWxOdW1Ub1JlbmRlcj86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBJbnN0ZWFkIG9mIHN0YXJ0aW5nIGF0IHRoZSB0b3Agd2l0aCB0aGUgZmlyc3QgaXRlbSwgc3RhcnQgYXQgYGluaXRpYWxTY3JvbGxJbmRleGAuIFRoaXNcbiAgICogZGlzYWJsZXMgdGhlIFwic2Nyb2xsIHRvIHRvcFwiIG9wdGltaXphdGlvbiB0aGF0IGtlZXBzIHRoZSBmaXJzdCBgaW5pdGlhbE51bVRvUmVuZGVyYCBpdGVtc1xuICAgKiBhbHdheXMgcmVuZGVyZWQgYW5kIGltbWVkaWF0ZWx5IHJlbmRlcnMgdGhlIGl0ZW1zIHN0YXJ0aW5nIGF0IHRoaXMgaW5pdGlhbCBpbmRleC4gUmVxdWlyZXNcbiAgICogYGdldEl0ZW1MYXlvdXRgIHRvIGJlIGltcGxlbWVudGVkLlxuICAgKi9cbiAgaW5pdGlhbFNjcm9sbEluZGV4PzogP251bWJlcixcbiAgLyoqXG4gICAqIFJldmVyc2VzIHRoZSBkaXJlY3Rpb24gb2Ygc2Nyb2xsLiBVc2VzIHNjYWxlIHRyYW5zZm9ybXMgb2YgLTEuXG4gICAqL1xuICBpbnZlcnRlZD86ID9ib29sZWFuLFxuICAvKipcbiAgICogVXNlZCB0byBleHRyYWN0IGEgdW5pcXVlIGtleSBmb3IgYSBnaXZlbiBpdGVtIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguIEtleSBpcyB1c2VkIGZvciBjYWNoaW5nXG4gICAqIGFuZCBhcyB0aGUgcmVhY3Qga2V5IHRvIHRyYWNrIGl0ZW0gcmUtb3JkZXJpbmcuIFRoZSBkZWZhdWx0IGV4dHJhY3RvciBjaGVja3MgYGl0ZW0ua2V5YCwgdGhlblxuICAgKiBmYWxscyBiYWNrIHRvIHVzaW5nIHRoZSBpbmRleCwgbGlrZSBSZWFjdCBkb2VzLlxuICAgKi9cbiAga2V5RXh0cmFjdG9yPzogPyhpdGVtOiBJdGVtVCwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAvKipcbiAgICogTXVsdGlwbGUgY29sdW1ucyBjYW4gb25seSBiZSByZW5kZXJlZCB3aXRoIGBob3Jpem9udGFsPXtmYWxzZX1gIGFuZCB3aWxsIHppZy16YWcgbGlrZSBhXG4gICAqIGBmbGV4V3JhcGAgbGF5b3V0LiBJdGVtcyBzaG91bGQgYWxsIGJlIHRoZSBzYW1lIGhlaWdodCAtIG1hc29ucnkgbGF5b3V0cyBhcmUgbm90IHN1cHBvcnRlZC5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgdmFsdWUgaXMgMS5cbiAgICovXG4gIG51bUNvbHVtbnM/OiBudW1iZXIsXG4gIC8qKlxuICAgKiBOb3RlOiBtYXkgaGF2ZSBidWdzIChtaXNzaW5nIGNvbnRlbnQpIGluIHNvbWUgY2lyY3Vtc3RhbmNlcyAtIHVzZSBhdCB5b3VyIG93biByaXNrLlxuICAgKlxuICAgKiBUaGlzIG1heSBpbXByb3ZlIHNjcm9sbCBwZXJmb3JtYW5jZSBmb3IgbGFyZ2UgbGlzdHMuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IHZhbHVlIGlzIHRydWUgZm9yIEFuZHJvaWQuXG4gICAqL1xuICByZW1vdmVDbGlwcGVkU3Vidmlld3M/OiBib29sZWFuLFxuICAvKipcbiAgICogU2VlIGBTY3JvbGxWaWV3YCBmb3IgZmxvdyB0eXBlIGFuZCBmdXJ0aGVyIGRvY3VtZW50YXRpb24uXG4gICAqL1xuICBmYWRpbmdFZGdlTGVuZ3RoPzogP251bWJlcixcbiAgLyoqXG4gICAqIEVuYWJsZSBhbiBvcHRpbWl6YXRpb24gdG8gbWVtb2l6ZSB0aGUgaXRlbSByZW5kZXJlciB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHJlcmVuZGVycy5cbiAgICovXG4gIHN0cmljdE1vZGU/OiBib29sZWFuLFxufH07XG5cbi8qKlxuICogRGVmYXVsdCBQcm9wcyBIZWxwZXIgRnVuY3Rpb25zXG4gKiBVc2UgdGhlIGZvbGxvd2luZyBoZWxwZXIgZnVuY3Rpb25zIGZvciBkZWZhdWx0IHZhbHVlc1xuICovXG5cbi8vIHJlbW92ZUNsaXBwZWRTdWJ2aWV3c09yRGVmYXVsdCh0aGlzLnByb3BzLnJlbW92ZUNsaXBwZWRTdWJ2aWV3cylcbmZ1bmN0aW9uIHJlbW92ZUNsaXBwZWRTdWJ2aWV3c09yRGVmYXVsdChyZW1vdmVDbGlwcGVkU3Vidmlld3M6ID9ib29sZWFuKSB7XG4gIHJldHVybiByZW1vdmVDbGlwcGVkU3Vidmlld3MgPz8gUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJztcbn1cblxuLy8gbnVtQ29sdW1uc09yRGVmYXVsdCh0aGlzLnByb3BzLm51bUNvbHVtbnMpXG5mdW5jdGlvbiBudW1Db2x1bW5zT3JEZWZhdWx0KG51bUNvbHVtbnM6ID9udW1iZXIpIHtcbiAgcmV0dXJuIG51bUNvbHVtbnMgPz8gMTtcbn1cblxudHlwZSBGbGF0TGlzdFByb3BzPEl0ZW1UPiA9IHt8XG4gIC4uLlJlcXVpcmVkUHJvcHM8SXRlbVQ+LFxuICAuLi5PcHRpb25hbFByb3BzPEl0ZW1UPixcbnx9O1xuXG50eXBlIFZpcnR1YWxpemVkTGlzdFByb3BzID0gUmVhY3QuRWxlbWVudENvbmZpZzx0eXBlb2YgVmlydHVhbGl6ZWRMaXN0PjtcblxuZXhwb3J0IHR5cGUgUHJvcHM8SXRlbVQ+ID0ge1xuICAuLi4kRGlmZjxcbiAgICBWaXJ0dWFsaXplZExpc3RQcm9wcyxcbiAgICB7XG4gICAgICBnZXRJdGVtOiAkUHJvcGVydHlUeXBlPFZpcnR1YWxpemVkTGlzdFByb3BzLCAnZ2V0SXRlbSc+LFxuICAgICAgZ2V0SXRlbUNvdW50OiAkUHJvcGVydHlUeXBlPFZpcnR1YWxpemVkTGlzdFByb3BzLCAnZ2V0SXRlbUNvdW50Jz4sXG4gICAgICBnZXRJdGVtTGF5b3V0OiAkUHJvcGVydHlUeXBlPFZpcnR1YWxpemVkTGlzdFByb3BzLCAnZ2V0SXRlbUxheW91dCc+LFxuICAgICAgcmVuZGVySXRlbTogJFByb3BlcnR5VHlwZTxWaXJ0dWFsaXplZExpc3RQcm9wcywgJ3JlbmRlckl0ZW0nPixcbiAgICAgIGtleUV4dHJhY3RvcjogJFByb3BlcnR5VHlwZTxWaXJ0dWFsaXplZExpc3RQcm9wcywgJ2tleUV4dHJhY3Rvcic+LFxuICAgICAgLi4uXG4gICAgfSxcbiAgPixcbiAgLi4uRmxhdExpc3RQcm9wczxJdGVtVD4sXG4gIC4uLlxufTtcblxuLyoqXG4gKiBBIHBlcmZvcm1hbnQgaW50ZXJmYWNlIGZvciByZW5kZXJpbmcgc2ltcGxlLCBmbGF0IGxpc3RzLCBzdXBwb3J0aW5nIHRoZSBtb3N0IGhhbmR5IGZlYXR1cmVzOlxuICpcbiAqICAtIEZ1bGx5IGNyb3NzLXBsYXRmb3JtLlxuICogIC0gT3B0aW9uYWwgaG9yaXpvbnRhbCBtb2RlLlxuICogIC0gQ29uZmlndXJhYmxlIHZpZXdhYmlsaXR5IGNhbGxiYWNrcy5cbiAqICAtIEhlYWRlciBzdXBwb3J0LlxuICogIC0gRm9vdGVyIHN1cHBvcnQuXG4gKiAgLSBTZXBhcmF0b3Igc3VwcG9ydC5cbiAqICAtIFB1bGwgdG8gUmVmcmVzaC5cbiAqICAtIFNjcm9sbCBsb2FkaW5nLlxuICogIC0gU2Nyb2xsVG9JbmRleCBzdXBwb3J0LlxuICpcbiAqIElmIHlvdSBuZWVkIHNlY3Rpb24gc3VwcG9ydCwgdXNlIFtgPFNlY3Rpb25MaXN0PmBdKGRvY3Mvc2VjdGlvbmxpc3QuaHRtbCkuXG4gKlxuICogTWluaW1hbCBFeGFtcGxlOlxuICpcbiAqICAgICA8RmxhdExpc3RcbiAqICAgICAgIGRhdGE9e1t7a2V5OiAnYSd9LCB7a2V5OiAnYid9XX1cbiAqICAgICAgIHJlbmRlckl0ZW09eyh7aXRlbX0pID0+IDxUZXh0PntpdGVtLmtleX08L1RleHQ+fVxuICogICAgIC8+XG4gKlxuICogTW9yZSBjb21wbGV4LCBtdWx0aS1zZWxlY3QgZXhhbXBsZSBkZW1vbnN0cmF0aW5nIGBQdXJlQ29tcG9uZW50YCB1c2FnZSBmb3IgcGVyZiBvcHRpbWl6YXRpb24gYW5kIGF2b2lkaW5nIGJ1Z3MuXG4gKlxuICogLSBCeSBiaW5kaW5nIHRoZSBgb25QcmVzc0l0ZW1gIGhhbmRsZXIsIHRoZSBwcm9wcyB3aWxsIHJlbWFpbiBgPT09YCBhbmQgYFB1cmVDb21wb25lbnRgIHdpbGxcbiAqICAgcHJldmVudCB3YXN0ZWZ1bCByZS1yZW5kZXJzIHVubGVzcyB0aGUgYWN0dWFsIGBpZGAsIGBzZWxlY3RlZGAsIG9yIGB0aXRsZWAgcHJvcHMgY2hhbmdlLCBldmVuXG4gKiAgIGlmIHRoZSBjb21wb25lbnRzIHJlbmRlcmVkIGluIGBNeUxpc3RJdGVtYCBkaWQgbm90IGhhdmUgc3VjaCBvcHRpbWl6YXRpb25zLlxuICogLSBCeSBwYXNzaW5nIGBleHRyYURhdGE9e3RoaXMuc3RhdGV9YCB0byBgRmxhdExpc3RgIHdlIG1ha2Ugc3VyZSBgRmxhdExpc3RgIGl0c2VsZiB3aWxsIHJlLXJlbmRlclxuICogICB3aGVuIHRoZSBgc3RhdGUuc2VsZWN0ZWRgIGNoYW5nZXMuIFdpdGhvdXQgc2V0dGluZyB0aGlzIHByb3AsIGBGbGF0TGlzdGAgd291bGQgbm90IGtub3cgaXRcbiAqICAgbmVlZHMgdG8gcmUtcmVuZGVyIGFueSBpdGVtcyBiZWNhdXNlIGl0IGlzIGFsc28gYSBgUHVyZUNvbXBvbmVudGAgYW5kIHRoZSBwcm9wIGNvbXBhcmlzb24gd2lsbFxuICogICBub3Qgc2hvdyBhbnkgY2hhbmdlcy5cbiAqIC0gYGtleUV4dHJhY3RvcmAgdGVsbHMgdGhlIGxpc3QgdG8gdXNlIHRoZSBgaWRgcyBmb3IgdGhlIHJlYWN0IGtleXMgaW5zdGVhZCBvZiB0aGUgZGVmYXVsdCBga2V5YCBwcm9wZXJ0eS5cbiAqXG4gKlxuICogICAgIGNsYXNzIE15TGlzdEl0ZW0gZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIF9vblByZXNzID0gKCkgPT4ge1xuICogICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3NJdGVtKHRoaXMucHJvcHMuaWQpO1xuICogICAgICAgfTtcbiAqXG4gKiAgICAgICByZW5kZXIoKSB7XG4gKiAgICAgICAgIGNvbnN0IHRleHRDb2xvciA9IHRoaXMucHJvcHMuc2VsZWN0ZWQgPyBcInJlZFwiIDogXCJibGFja1wiO1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxUb3VjaGFibGVPcGFjaXR5IG9uUHJlc3M9e3RoaXMuX29uUHJlc3N9PlxuICogICAgICAgICAgICAgPFZpZXc+XG4gKiAgICAgICAgICAgICAgIDxUZXh0IHN0eWxlPXt7IGNvbG9yOiB0ZXh0Q29sb3IgfX0+XG4gKiAgICAgICAgICAgICAgICAge3RoaXMucHJvcHMudGl0bGV9XG4gKiAgICAgICAgICAgICAgIDwvVGV4dD5cbiAqICAgICAgICAgICAgIDwvVmlldz5cbiAqICAgICAgICAgICA8L1RvdWNoYWJsZU9wYWNpdHk+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqICAgICBjbGFzcyBNdWx0aVNlbGVjdExpc3QgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50IHtcbiAqICAgICAgIHN0YXRlID0ge3NlbGVjdGVkOiAobmV3IE1hcCgpOiBNYXA8c3RyaW5nLCBib29sZWFuPil9O1xuICpcbiAqICAgICAgIF9rZXlFeHRyYWN0b3IgPSAoaXRlbSwgaW5kZXgpID0+IGl0ZW0uaWQ7XG4gKlxuICogICAgICAgX29uUHJlc3NJdGVtID0gKGlkOiBzdHJpbmcpID0+IHtcbiAqICAgICAgICAgLy8gdXBkYXRlciBmdW5jdGlvbnMgYXJlIHByZWZlcnJlZCBmb3IgdHJhbnNhY3Rpb25hbCB1cGRhdGVzXG4gKiAgICAgICAgIHRoaXMuc2V0U3RhdGUoKHN0YXRlKSA9PiB7XG4gKiAgICAgICAgICAgLy8gY29weSB0aGUgbWFwIHJhdGhlciB0aGFuIG1vZGlmeWluZyBzdGF0ZS5cbiAqICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IG5ldyBNYXAoc3RhdGUuc2VsZWN0ZWQpO1xuICogICAgICAgICAgIHNlbGVjdGVkLnNldChpZCwgIXNlbGVjdGVkLmdldChpZCkpOyAvLyB0b2dnbGVcbiAqICAgICAgICAgICByZXR1cm4ge3NlbGVjdGVkfTtcbiAqICAgICAgICAgfSk7XG4gKiAgICAgICB9O1xuICpcbiAqICAgICAgIF9yZW5kZXJJdGVtID0gKHtpdGVtfSkgPT4gKFxuICogICAgICAgICA8TXlMaXN0SXRlbVxuICogICAgICAgICAgIGlkPXtpdGVtLmlkfVxuICogICAgICAgICAgIG9uUHJlc3NJdGVtPXt0aGlzLl9vblByZXNzSXRlbX1cbiAqICAgICAgICAgICBzZWxlY3RlZD17ISF0aGlzLnN0YXRlLnNlbGVjdGVkLmdldChpdGVtLmlkKX1cbiAqICAgICAgICAgICB0aXRsZT17aXRlbS50aXRsZX1cbiAqICAgICAgICAgLz5cbiAqICAgICAgICk7XG4gKlxuICogICAgICAgcmVuZGVyKCkge1xuICogICAgICAgICByZXR1cm4gKFxuICogICAgICAgICAgIDxGbGF0TGlzdFxuICogICAgICAgICAgICAgZGF0YT17dGhpcy5wcm9wcy5kYXRhfVxuICogICAgICAgICAgICAgZXh0cmFEYXRhPXt0aGlzLnN0YXRlfVxuICogICAgICAgICAgICAga2V5RXh0cmFjdG9yPXt0aGlzLl9rZXlFeHRyYWN0b3J9XG4gKiAgICAgICAgICAgICByZW5kZXJJdGVtPXt0aGlzLl9yZW5kZXJJdGVtfVxuICogICAgICAgICAgIC8+XG4gKiAgICAgICAgICk7XG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqIFRoaXMgaXMgYSBjb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBbYDxWaXJ0dWFsaXplZExpc3Q+YF0oZG9jcy92aXJ0dWFsaXplZGxpc3QuaHRtbCksXG4gKiBhbmQgdGh1cyBpbmhlcml0cyBpdHMgcHJvcHMgKGFzIHdlbGwgYXMgdGhvc2Ugb2YgYFNjcm9sbFZpZXdgKSB0aGF0IGFyZW4ndCBleHBsaWNpdGx5IGxpc3RlZFxuICogaGVyZSwgYWxvbmcgd2l0aCB0aGUgZm9sbG93aW5nIGNhdmVhdHM6XG4gKlxuICogLSBJbnRlcm5hbCBzdGF0ZSBpcyBub3QgcHJlc2VydmVkIHdoZW4gY29udGVudCBzY3JvbGxzIG91dCBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gTWFrZSBzdXJlIGFsbFxuICogICB5b3VyIGRhdGEgaXMgY2FwdHVyZWQgaW4gdGhlIGl0ZW0gZGF0YSBvciBleHRlcm5hbCBzdG9yZXMgbGlrZSBGbHV4LCBSZWR1eCwgb3IgUmVsYXkuXG4gKiAtIFRoaXMgaXMgYSBgUHVyZUNvbXBvbmVudGAgd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIG5vdCByZS1yZW5kZXIgaWYgYHByb3BzYCByZW1haW4gc2hhbGxvdy1cbiAqICAgZXF1YWwuIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgeW91ciBgcmVuZGVySXRlbWAgZnVuY3Rpb24gZGVwZW5kcyBvbiBpcyBwYXNzZWQgYXMgYSBwcm9wXG4gKiAgIChlLmcuIGBleHRyYURhdGFgKSB0aGF0IGlzIG5vdCBgPT09YCBhZnRlciB1cGRhdGVzLCBvdGhlcndpc2UgeW91ciBVSSBtYXkgbm90IHVwZGF0ZSBvblxuICogICBjaGFuZ2VzLiBUaGlzIGluY2x1ZGVzIHRoZSBgZGF0YWAgcHJvcCBhbmQgcGFyZW50IGNvbXBvbmVudCBzdGF0ZS5cbiAqIC0gSW4gb3JkZXIgdG8gY29uc3RyYWluIG1lbW9yeSBhbmQgZW5hYmxlIHNtb290aCBzY3JvbGxpbmcsIGNvbnRlbnQgaXMgcmVuZGVyZWQgYXN5bmNocm9ub3VzbHlcbiAqICAgb2Zmc2NyZWVuLiBUaGlzIG1lYW5zIGl0J3MgcG9zc2libGUgdG8gc2Nyb2xsIGZhc3RlciB0aGFuIHRoZSBmaWxsIHJhdGUgYW5kcyBtb21lbnRhcmlseSBzZWVcbiAqICAgYmxhbmsgY29udGVudC4gVGhpcyBpcyBhIHRyYWRlb2ZmIHRoYXQgY2FuIGJlIGFkanVzdGVkIHRvIHN1aXQgdGhlIG5lZWRzIG9mIGVhY2ggYXBwbGljYXRpb24sXG4gKiAgIGFuZCB3ZSBhcmUgd29ya2luZyBvbiBpbXByb3ZpbmcgaXQgYmVoaW5kIHRoZSBzY2VuZXMuXG4gKiAtIEJ5IGRlZmF1bHQsIHRoZSBsaXN0IGxvb2tzIGZvciBhIGBrZXlgIHByb3Agb24gZWFjaCBpdGVtIGFuZCB1c2VzIHRoYXQgZm9yIHRoZSBSZWFjdCBrZXkuXG4gKiAgIEFsdGVybmF0aXZlbHksIHlvdSBjYW4gcHJvdmlkZSBhIGN1c3RvbSBga2V5RXh0cmFjdG9yYCBwcm9wLlxuICpcbiAqIEFsc28gaW5oZXJpdHMgW1Njcm9sbFZpZXcgUHJvcHNdKGRvY3Mvc2Nyb2xsdmlldy5odG1sI3Byb3BzKSwgdW5sZXNzIGl0IGlzIG5lc3RlZCBpbiBhbm90aGVyIEZsYXRMaXN0IG9mIHNhbWUgb3JpZW50YXRpb24uXG4gKi9cbmNsYXNzIEZsYXRMaXN0PEl0ZW1UPiBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHM8SXRlbVQ+LCB2b2lkPiB7XG4gIHByb3BzOiBQcm9wczxJdGVtVD47XG4gIC8qKlxuICAgKiBTY3JvbGxzIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQuIE1heSBiZSBqYW5reSB3aXRob3V0IGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9FbmQocGFyYW1zPzogP3thbmltYXRlZD86ID9ib29sZWFuLCAuLi59KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9FbmQocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xscyB0byB0aGUgaXRlbSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IHN1Y2ggdGhhdCBpdCBpcyBwb3NpdGlvbmVkIGluIHRoZSB2aWV3YWJsZSBhcmVhXG4gICAqIHN1Y2ggdGhhdCBgdmlld1Bvc2l0aW9uYCAwIHBsYWNlcyBpdCBhdCB0aGUgdG9wLCAxIGF0IHRoZSBib3R0b20sIGFuZCAwLjUgY2VudGVyZWQgaW4gdGhlXG4gICAqIG1pZGRsZS4gYHZpZXdPZmZzZXRgIGlzIGEgZml4ZWQgbnVtYmVyIG9mIHBpeGVscyB0byBvZmZzZXQgdGhlIGZpbmFsIHRhcmdldCBwb3NpdGlvbi5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JbmRleChwYXJhbXM6IHtcbiAgICBhbmltYXRlZD86ID9ib29sZWFuLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdmlld09mZnNldD86IG51bWJlcixcbiAgICB2aWV3UG9zaXRpb24/OiBudW1iZXIsXG4gICAgLi4uXG4gIH0pIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgdGhpcy5fbGlzdFJlZi5zY3JvbGxUb0luZGV4KHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVpcmVzIGxpbmVhciBzY2FuIHRocm91Z2ggZGF0YSAtIHVzZSBgc2Nyb2xsVG9JbmRleGAgaW5zdGVhZCBpZiBwb3NzaWJsZS5cbiAgICpcbiAgICogTm90ZTogY2Fubm90IHNjcm9sbCB0byBsb2NhdGlvbnMgb3V0c2lkZSB0aGUgcmVuZGVyIHdpbmRvdyB3aXRob3V0IHNwZWNpZnlpbmcgdGhlXG4gICAqIGBnZXRJdGVtTGF5b3V0YCBwcm9wLlxuICAgKi9cbiAgc2Nyb2xsVG9JdGVtKHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaXRlbTogSXRlbVQsXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICAgIC4uLlxuICB9KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9JdGVtKHBhcmFtcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNjcm9sbCB0byBhIHNwZWNpZmljIGNvbnRlbnQgcGl4ZWwgb2Zmc2V0IGluIHRoZSBsaXN0LlxuICAgKlxuICAgKiBDaGVjayBvdXQgW3Njcm9sbFRvT2Zmc2V0XShkb2NzL3ZpcnR1YWxpemVkbGlzdC5odG1sI3Njcm9sbHRvb2Zmc2V0KSBvZiBWaXJ0dWFsaXplZExpc3RcbiAgICovXG4gIHNjcm9sbFRvT2Zmc2V0KHBhcmFtczoge2FuaW1hdGVkPzogP2Jvb2xlYW4sIG9mZnNldDogbnVtYmVyLCAuLi59KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2Nyb2xsVG9PZmZzZXQocGFyYW1zKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGVsbHMgdGhlIGxpc3QgYW4gaW50ZXJhY3Rpb24gaGFzIG9jY3VycmVkLCB3aGljaCBzaG91bGQgdHJpZ2dlciB2aWV3YWJpbGl0eSBjYWxjdWxhdGlvbnMsIGUuZy5cbiAgICogaWYgYHdhaXRGb3JJbnRlcmFjdGlvbnNgIGlzIHRydWUgYW5kIHRoZSB1c2VyIGhhcyBub3Qgc2Nyb2xsZWQuIFRoaXMgaXMgdHlwaWNhbGx5IGNhbGxlZCBieVxuICAgKiB0YXBzIG9uIGl0ZW1zIG9yIGJ5IG5hdmlnYXRpb24gYWN0aW9ucy5cbiAgICovXG4gIHJlY29yZEludGVyYWN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICB0aGlzLl9saXN0UmVmLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIHRoZSBzY3JvbGwgaW5kaWNhdG9ycyBtb21lbnRhcmlseS5cbiAgICpcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cbiAgZmxhc2hTY3JvbGxJbmRpY2F0b3JzKCkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICB0aGlzLl9saXN0UmVmLmZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGhhbmRsZSB0byB0aGUgdW5kZXJseWluZyBzY3JvbGwgcmVzcG9uZGVyLlxuICAgKi9cbiAgZ2V0U2Nyb2xsUmVzcG9uZGVyKCk6ID9TY3JvbGxSZXNwb25kZXJUeXBlIHtcbiAgICBpZiAodGhpcy5fbGlzdFJlZikge1xuICAgICAgcmV0dXJuIHRoaXMuX2xpc3RSZWYuZ2V0U2Nyb2xsUmVzcG9uZGVyKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgcmVmZXJlbmNlIHRvIHRoZSB1bmRlcmx5aW5nIGhvc3QgY29tcG9uZW50XG4gICAqL1xuICBnZXROYXRpdmVTY3JvbGxSZWYoKTpcbiAgICB8ID9SZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBWaWV3PlxuICAgIHwgP1JlYWN0LkVsZW1lbnRSZWY8U2Nyb2xsVmlld05hdGl2ZUNvbXBvbmVudD4ge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICAvKiAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1yZXR1cm5dIFN1cHByZXNzZXMgZXJyb3JzIGZvdW5kIHdoZW4gZml4aW5nXG4gICAgICAgKiBUZXh0SW5wdXQgdHlwaW5nICovXG4gICAgICByZXR1cm4gdGhpcy5fbGlzdFJlZi5nZXRTY3JvbGxSZWYoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxhYmxlTm9kZSgpOiBhbnkge1xuICAgIGlmICh0aGlzLl9saXN0UmVmKSB7XG4gICAgICByZXR1cm4gdGhpcy5fbGlzdFJlZi5nZXRTY3JvbGxhYmxlTm9kZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldE5hdGl2ZVByb3BzKHByb3BzOiB7W3N0cmluZ106IG1peGVkLCAuLi59KSB7XG4gICAgaWYgKHRoaXMuX2xpc3RSZWYpIHtcbiAgICAgIHRoaXMuX2xpc3RSZWYuc2V0TmF0aXZlUHJvcHMocHJvcHMpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBQcm9wczxJdGVtVD4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5fY2hlY2tQcm9wcyh0aGlzLnByb3BzKTtcbiAgICBpZiAodGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMpIHtcbiAgICAgIHRoaXMuX3ZpcnR1YWxpemVkTGlzdFBhaXJzID1cbiAgICAgICAgdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMubWFwKHBhaXIgPT4gKHtcbiAgICAgICAgICB2aWV3YWJpbGl0eUNvbmZpZzogcGFpci52aWV3YWJpbGl0eUNvbmZpZyxcbiAgICAgICAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiB0aGlzLl9jcmVhdGVPblZpZXdhYmxlSXRlbXNDaGFuZ2VkKFxuICAgICAgICAgICAgcGFpci5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgICAgICksXG4gICAgICAgIH0pKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcHMub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCkge1xuICAgICAgdGhpcy5fdmlydHVhbGl6ZWRMaXN0UGFpcnMucHVzaCh7XG4gICAgICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdICg+PTAuNjMuMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpc1xuICAgICAgICAgKiBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjYzIHdhcyBkZXBsb3llZC4gVG9cbiAgICAgICAgICogc2VlIHRoZSBlcnJvciBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgICAgdmlld2FiaWxpdHlDb25maWc6IHRoaXMucHJvcHMudmlld2FiaWxpdHlDb25maWcsXG4gICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHRoaXMuX2NyZWF0ZU9uVmlld2FibGVJdGVtc0NoYW5nZWQoXG4gICAgICAgICAgdGhpcy5wcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgICApLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHM8SXRlbVQ+KSB7XG4gICAgaW52YXJpYW50KFxuICAgICAgcHJldlByb3BzLm51bUNvbHVtbnMgPT09IHRoaXMucHJvcHMubnVtQ29sdW1ucyxcbiAgICAgICdDaGFuZ2luZyBudW1Db2x1bW5zIG9uIHRoZSBmbHkgaXMgbm90IHN1cHBvcnRlZC4gQ2hhbmdlIHRoZSBrZXkgcHJvcCBvbiBGbGF0TGlzdCB3aGVuICcgK1xuICAgICAgICAnY2hhbmdpbmcgdGhlIG51bWJlciBvZiBjb2x1bW5zIHRvIGZvcmNlIGEgZnJlc2ggcmVuZGVyIG9mIHRoZSBjb21wb25lbnQuJyxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIHByZXZQcm9wcy5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkID09PSB0aGlzLnByb3BzLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAnQ2hhbmdpbmcgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBvbiB0aGUgZmx5IGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgIWRlZXBEaWZmZXIocHJldlByb3BzLnZpZXdhYmlsaXR5Q29uZmlnLCB0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnKSxcbiAgICAgICdDaGFuZ2luZyB2aWV3YWJpbGl0eUNvbmZpZyBvbiB0aGUgZmx5IGlzIG5vdCBzdXBwb3J0ZWQnLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgcHJldlByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyA9PT1cbiAgICAgICAgdGhpcy5wcm9wcy52aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMsXG4gICAgICAnQ2hhbmdpbmcgdmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIG9uIHRoZSBmbHkgaXMgbm90IHN1cHBvcnRlZCcsXG4gICAgKTtcblxuICAgIHRoaXMuX2NoZWNrUHJvcHModGhpcy5wcm9wcyk7XG4gIH1cblxuICBfbGlzdFJlZjogP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpcnR1YWxpemVkTGlzdD47XG4gIF92aXJ0dWFsaXplZExpc3RQYWlyczogQXJyYXk8Vmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXI+ID0gW107XG5cbiAgX2NhcHR1cmVSZWYgPSAocmVmOiA/UmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlydHVhbGl6ZWRMaXN0PikgPT4ge1xuICAgIHRoaXMuX2xpc3RSZWYgPSByZWY7XG4gIH07XG5cbiAgX2NoZWNrUHJvcHMocHJvcHM6IFByb3BzPEl0ZW1UPikge1xuICAgIGNvbnN0IHtcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSB0aGlzIHByb3AgZG9lc24ndCBleGlzdCwgaXMgb25seSB1c2VkIGZvciBhbiBpbnZhcmlhbnRcbiAgICAgIGdldEl0ZW0sXG4gICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gdGhpcyBwcm9wIGRvZXNuJ3QgZXhpc3QsIGlzIG9ubHkgdXNlZCBmb3IgYW4gaW52YXJpYW50XG4gICAgICBnZXRJdGVtQ291bnQsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgY29sdW1uV3JhcHBlclN0eWxlLFxuICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyxcbiAgICB9ID0gcHJvcHM7XG4gICAgY29uc3QgbnVtQ29sdW1ucyA9IG51bUNvbHVtbnNPckRlZmF1bHQodGhpcy5wcm9wcy5udW1Db2x1bW5zKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICAhZ2V0SXRlbSAmJiAhZ2V0SXRlbUNvdW50LFxuICAgICAgJ0ZsYXRMaXN0IGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGRhdGEgZm9ybWF0cy4nLFxuICAgICk7XG4gICAgaWYgKG51bUNvbHVtbnMgPiAxKSB7XG4gICAgICBpbnZhcmlhbnQoIWhvcml6b250YWwsICdudW1Db2x1bW5zIGRvZXMgbm90IHN1cHBvcnQgaG9yaXpvbnRhbC4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICAhY29sdW1uV3JhcHBlclN0eWxlLFxuICAgICAgICAnY29sdW1uV3JhcHBlclN0eWxlIG5vdCBzdXBwb3J0ZWQgZm9yIHNpbmdsZSBjb2x1bW4gbGlzdHMnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgIShvblZpZXdhYmxlSXRlbXNDaGFuZ2VkICYmIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycyksXG4gICAgICAnRmxhdExpc3QgZG9lcyBub3Qgc3VwcG9ydCBzZXR0aW5nIGJvdGggb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBhbmQgJyArXG4gICAgICAgICd2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMuJyxcbiAgICApO1xuICB9XG5cbiAgX2dldEl0ZW0gPSAoZGF0YTogQXJyYXk8SXRlbVQ+LCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgbnVtQ29sdW1ucyA9IG51bUNvbHVtbnNPckRlZmF1bHQodGhpcy5wcm9wcy5udW1Db2x1bW5zKTtcbiAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgIGNvbnN0IHJldCA9IFtdO1xuICAgICAgZm9yIChsZXQga2sgPSAwOyBrayA8IG51bUNvbHVtbnM7IGtrKyspIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRhdGFbaW5kZXggKiBudW1Db2x1bW5zICsga2tdO1xuICAgICAgICBpZiAoaXRlbSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0LnB1c2goaXRlbSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkYXRhW2luZGV4XTtcbiAgICB9XG4gIH07XG5cbiAgX2dldEl0ZW1Db3VudCA9IChkYXRhOiA/QXJyYXk8SXRlbVQ+KTogbnVtYmVyID0+IHtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgY29uc3QgbnVtQ29sdW1ucyA9IG51bUNvbHVtbnNPckRlZmF1bHQodGhpcy5wcm9wcy5udW1Db2x1bW5zKTtcbiAgICAgIHJldHVybiBudW1Db2x1bW5zID4gMSA/IE1hdGguY2VpbChkYXRhLmxlbmd0aCAvIG51bUNvbHVtbnMpIDogZGF0YS5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfTtcblxuICBfa2V5RXh0cmFjdG9yID0gKGl0ZW1zOiBJdGVtVCB8IEFycmF5PEl0ZW1UPiwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IG51bUNvbHVtbnMgPSBudW1Db2x1bW5zT3JEZWZhdWx0KHRoaXMucHJvcHMubnVtQ29sdW1ucyk7XG4gICAgY29uc3Qga2V5RXh0cmFjdG9yID0gdGhpcy5wcm9wcy5rZXlFeHRyYWN0b3IgPz8gZGVmYXVsdEtleUV4dHJhY3RvcjtcblxuICAgIGlmIChudW1Db2x1bW5zID4gMSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbXMpKSB7XG4gICAgICAgIHJldHVybiBpdGVtc1xuICAgICAgICAgIC5tYXAoKGl0ZW0sIGtrKSA9PlxuICAgICAgICAgICAga2V5RXh0cmFjdG9yKCgoaXRlbTogJEZsb3dGaXhNZSk6IEl0ZW1UKSwgaW5kZXggKiBudW1Db2x1bW5zICsga2spLFxuICAgICAgICAgIClcbiAgICAgICAgICAuam9pbignOicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YXJpYW50KFxuICAgICAgICAgIEFycmF5LmlzQXJyYXkoaXRlbXMpLFxuICAgICAgICAgICdGbGF0TGlzdDogRW5jb3VudGVyZWQgaW50ZXJuYWwgY29uc2lzdGVuY3kgZXJyb3IsIGV4cGVjdGVkIGVhY2ggaXRlbSB0byBjb25zaXN0IG9mIGFuICcgK1xuICAgICAgICAgICAgJ2FycmF5IHdpdGggMS0lcyBjb2x1bW5zOyBpbnN0ZWFkLCByZWNlaXZlZCBhIHNpbmdsZSBpdGVtLicsXG4gICAgICAgICAgbnVtQ29sdW1ucyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtY2FsbF0gQ2FuJ3QgY2FsbCBrZXlFeHRyYWN0b3Igd2l0aCBhbiBhcnJheVxuICAgICAgcmV0dXJuIGtleUV4dHJhY3RvcihpdGVtcywgaW5kZXgpO1xuICAgIH1cbiAgfTtcblxuICBfcHVzaE11bHRpQ29sdW1uVmlld2FibGUoYXJyOiBBcnJheTxWaWV3VG9rZW4+LCB2OiBWaWV3VG9rZW4pOiB2b2lkIHtcbiAgICBjb25zdCBudW1Db2x1bW5zID0gbnVtQ29sdW1uc09yRGVmYXVsdCh0aGlzLnByb3BzLm51bUNvbHVtbnMpO1xuICAgIGNvbnN0IGtleUV4dHJhY3RvciA9IHRoaXMucHJvcHMua2V5RXh0cmFjdG9yID8/IGRlZmF1bHRLZXlFeHRyYWN0b3I7XG4gICAgdi5pdGVtLmZvckVhY2goKGl0ZW0sIGlpKSA9PiB7XG4gICAgICBpbnZhcmlhbnQodi5pbmRleCAhPSBudWxsLCAnTWlzc2luZyBpbmRleCEnKTtcbiAgICAgIGNvbnN0IGluZGV4ID0gdi5pbmRleCAqIG51bUNvbHVtbnMgKyBpaTtcbiAgICAgIGFyci5wdXNoKHsuLi52LCBpdGVtLCBrZXk6IGtleUV4dHJhY3RvcihpdGVtLCBpbmRleCksIGluZGV4fSk7XG4gICAgfSk7XG4gIH1cblxuICBfY3JlYXRlT25WaWV3YWJsZUl0ZW1zQ2hhbmdlZChcbiAgICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiA/KGluZm86IHtcbiAgICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgICBjaGFuZ2VkOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgICAgLi4uXG4gICAgfSkgPT4gdm9pZCxcbiAgKSB7XG4gICAgcmV0dXJuIChpbmZvOiB7XG4gICAgICB2aWV3YWJsZUl0ZW1zOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgICAgIC4uLlxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IG51bUNvbHVtbnMgPSBudW1Db2x1bW5zT3JEZWZhdWx0KHRoaXMucHJvcHMubnVtQ29sdW1ucyk7XG4gICAgICBpZiAob25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCkge1xuICAgICAgICBpZiAobnVtQ29sdW1ucyA+IDEpIHtcbiAgICAgICAgICBjb25zdCBjaGFuZ2VkID0gW107XG4gICAgICAgICAgY29uc3Qgdmlld2FibGVJdGVtcyA9IFtdO1xuICAgICAgICAgIGluZm8udmlld2FibGVJdGVtcy5mb3JFYWNoKHYgPT5cbiAgICAgICAgICAgIHRoaXMuX3B1c2hNdWx0aUNvbHVtblZpZXdhYmxlKHZpZXdhYmxlSXRlbXMsIHYpLFxuICAgICAgICAgICk7XG4gICAgICAgICAgaW5mby5jaGFuZ2VkLmZvckVhY2godiA9PiB0aGlzLl9wdXNoTXVsdGlDb2x1bW5WaWV3YWJsZShjaGFuZ2VkLCB2KSk7XG4gICAgICAgICAgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCh7dmlld2FibGVJdGVtcywgY2hhbmdlZH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQoaW5mbyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgX3JlbmRlcmVyID0gKFxuICAgIExpc3RJdGVtQ29tcG9uZW50OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gICAgcmVuZGVySXRlbTogP1JlbmRlckl0ZW1UeXBlPEl0ZW1UPixcbiAgICBjb2x1bW5XcmFwcGVyU3R5bGU6ID9WaWV3U3R5bGVQcm9wLFxuICAgIG51bUNvbHVtbnM6ID9udW1iZXIsXG4gICAgZXh0cmFEYXRhOiA/YW55LFxuICApID0+IHtcbiAgICBjb25zdCBjb2xzID0gbnVtQ29sdW1uc09yRGVmYXVsdChudW1Db2x1bW5zKTtcblxuICAgIGxldCB2aXJ0dWFsaXplZExpc3RSZW5kZXJLZXkgPSBMaXN0SXRlbUNvbXBvbmVudFxuICAgICAgPyAnTGlzdEl0ZW1Db21wb25lbnQnXG4gICAgICA6ICdyZW5kZXJJdGVtJztcblxuICAgIGNvbnN0IHJlbmRlcmVyID0gKHByb3BzOiBSZW5kZXJJdGVtUHJvcHM8SXRlbVQ+KTogUmVhY3QuTm9kZSA9PiB7XG4gICAgICBpZiAoTGlzdEl0ZW1Db21wb25lbnQpIHtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtub3QtYS1jb21wb25lbnRdIENvbXBvbmVudCBpc24ndCB2YWxpZFxuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ10gQ29tcG9uZW50IGlzbid0IHZhbGlkXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXJldHVybl0gQ29tcG9uZW50IGlzbid0IHZhbGlkXG4gICAgICAgIHJldHVybiA8TGlzdEl0ZW1Db21wb25lbnQgey4uLnByb3BzfSAvPjtcbiAgICAgIH0gZWxzZSBpZiAocmVuZGVySXRlbSkge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS1jYWxsXVxuICAgICAgICByZXR1cm4gcmVuZGVySXRlbShwcm9wcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC8qICRGbG93Rml4TWVbaW52YWxpZC1jb21wdXRlZC1wcm9wXSAoPj0wLjExMS4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKVxuICAgICAgICogVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjExMSB3YXMgZGVwbG95ZWQuXG4gICAgICAgKiBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIFt2aXJ0dWFsaXplZExpc3RSZW5kZXJLZXldOiAoaW5mbzogUmVuZGVySXRlbVByb3BzPEl0ZW1UPikgPT4ge1xuICAgICAgICBpZiAoY29scyA+IDEpIHtcbiAgICAgICAgICBjb25zdCB7aXRlbSwgaW5kZXh9ID0gaW5mbztcbiAgICAgICAgICBpbnZhcmlhbnQoXG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KGl0ZW0pLFxuICAgICAgICAgICAgJ0V4cGVjdGVkIGFycmF5IG9mIGl0ZW1zIHdpdGggbnVtQ29sdW1ucyA+IDEnLFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxWaWV3IHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2Uoc3R5bGVzLnJvdywgY29sdW1uV3JhcHBlclN0eWxlKX0+XG4gICAgICAgICAgICAgIHtpdGVtLm1hcCgoaXQsIGtrKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHJlbmRlcmVyKHtcbiAgICAgICAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLWNhbGxdXG4gICAgICAgICAgICAgICAgICBpdGVtOiBpdCxcbiAgICAgICAgICAgICAgICAgIGluZGV4OiBpbmRleCAqIGNvbHMgKyBrayxcbiAgICAgICAgICAgICAgICAgIHNlcGFyYXRvcnM6IGluZm8uc2VwYXJhdG9ycyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudCAhPSBudWxsID8gKFxuICAgICAgICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50IGtleT17a2t9PntlbGVtZW50fTwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgICAgKSA6IG51bGw7XG4gICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHJlbmRlcmVyKGluZm8pO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gIH07XG5cbiAgX21lbW9pemVkUmVuZGVyZXIgPSBtZW1vaXplT25lKHRoaXMuX3JlbmRlcmVyKTtcblxuICByZW5kZXIoKTogUmVhY3QuTm9kZSB7XG4gICAgY29uc3Qge1xuICAgICAgbnVtQ29sdW1ucyxcbiAgICAgIGNvbHVtbldyYXBwZXJTdHlsZSxcbiAgICAgIHJlbW92ZUNsaXBwZWRTdWJ2aWV3czogX3JlbW92ZUNsaXBwZWRTdWJ2aWV3cyxcbiAgICAgIHN0cmljdE1vZGUgPSBmYWxzZSxcbiAgICAgIC4uLnJlc3RQcm9wc1xuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgcmVuZGVyZXIgPSBzdHJpY3RNb2RlID8gdGhpcy5fbWVtb2l6ZWRSZW5kZXJlciA6IHRoaXMuX3JlbmRlcmVyO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaXJ0dWFsaXplZExpc3RcbiAgICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgICAgZ2V0SXRlbT17dGhpcy5fZ2V0SXRlbX1cbiAgICAgICAgZ2V0SXRlbUNvdW50PXt0aGlzLl9nZXRJdGVtQ291bnR9XG4gICAgICAgIGtleUV4dHJhY3Rvcj17dGhpcy5fa2V5RXh0cmFjdG9yfVxuICAgICAgICByZWY9e3RoaXMuX2NhcHR1cmVSZWZ9XG4gICAgICAgIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycz17dGhpcy5fdmlydHVhbGl6ZWRMaXN0UGFpcnN9XG4gICAgICAgIHJlbW92ZUNsaXBwZWRTdWJ2aWV3cz17cmVtb3ZlQ2xpcHBlZFN1YnZpZXdzT3JEZWZhdWx0KFxuICAgICAgICAgIF9yZW1vdmVDbGlwcGVkU3Vidmlld3MsXG4gICAgICAgICl9XG4gICAgICAgIHsuLi5yZW5kZXJlcihcbiAgICAgICAgICB0aGlzLnByb3BzLkxpc3RJdGVtQ29tcG9uZW50LFxuICAgICAgICAgIHRoaXMucHJvcHMucmVuZGVySXRlbSxcbiAgICAgICAgICBjb2x1bW5XcmFwcGVyU3R5bGUsXG4gICAgICAgICAgbnVtQ29sdW1ucyxcbiAgICAgICAgICB0aGlzLnByb3BzLmV4dHJhRGF0YSxcbiAgICAgICAgKX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gIHJvdzoge2ZsZXhEaXJlY3Rpb246ICdyb3cnfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZsYXRMaXN0O1xuIl0s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