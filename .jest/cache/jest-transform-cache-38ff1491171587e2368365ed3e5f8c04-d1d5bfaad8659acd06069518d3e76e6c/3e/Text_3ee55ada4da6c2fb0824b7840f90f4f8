f3a5255bec412dc263b95acb5708d3e6
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));
var _Platform = _interopRequireDefault(require("../Utilities/Platform"));
var PressabilityDebug = _interopRequireWildcard(require("../Pressability/PressabilityDebug"));
var _usePressability = _interopRequireDefault(require("../Pressability/usePressability"));
var _StyleSheet = _interopRequireDefault(require("../StyleSheet/StyleSheet"));
var _processColor = _interopRequireDefault(require("../StyleSheet/processColor"));
var _TextAncestor = _interopRequireDefault(require("./TextAncestor"));
var _TextNativeComponent = require("./TextNativeComponent");
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
var _excluded = ["accessible", "allowFontScaling", "ellipsizeMode", "onLongPress", "onPress", "onPressIn", "onPressOut", "onResponderGrant", "onResponderMove", "onResponderRelease", "onResponderTerminate", "onResponderTerminationRequest", "onStartShouldSetResponder", "pressRetentionOffset", "suppressHighlighting"];
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
var Text = React.forwardRef(function (props, forwardedRef) {
  var _props$accessibilityS, _props$accessibilityS2;
  var accessible = props.accessible,
    allowFontScaling = props.allowFontScaling,
    ellipsizeMode = props.ellipsizeMode,
    onLongPress = props.onLongPress,
    onPress = props.onPress,
    _onPressIn = props.onPressIn,
    _onPressOut = props.onPressOut,
    _onResponderGrant = props.onResponderGrant,
    _onResponderMove = props.onResponderMove,
    _onResponderRelease = props.onResponderRelease,
    _onResponderTerminate = props.onResponderTerminate,
    onResponderTerminationRequest = props.onResponderTerminationRequest,
    onStartShouldSetResponder = props.onStartShouldSetResponder,
    pressRetentionOffset = props.pressRetentionOffset,
    suppressHighlighting = props.suppressHighlighting,
    restProps = (0, _objectWithoutProperties2.default)(props, _excluded);
  var _useState = (0, React.useState)(false),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    isHighlighted = _useState2[0],
    setHighlighted = _useState2[1];
  var _disabled = restProps.disabled != null ? restProps.disabled : (_props$accessibilityS = props.accessibilityState) == null ? void 0 : _props$accessibilityS.disabled;
  var _accessibilityState = _disabled !== ((_props$accessibilityS2 = props.accessibilityState) == null ? void 0 : _props$accessibilityS2.disabled) ? Object.assign({}, props.accessibilityState, {
    disabled: _disabled
  }) : props.accessibilityState;
  var isPressable = (onPress != null || onLongPress != null || onStartShouldSetResponder != null) && _disabled !== true;
  var initialized = useLazyInitialization(isPressable);
  var config = (0, React.useMemo)(function () {
    return initialized ? {
      disabled: !isPressable,
      pressRectOffset: pressRetentionOffset,
      onLongPress: onLongPress,
      onPress: onPress,
      onPressIn: function onPressIn(event) {
        setHighlighted(!suppressHighlighting);
        _onPressIn == null ? void 0 : _onPressIn(event);
      },
      onPressOut: function onPressOut(event) {
        setHighlighted(false);
        _onPressOut == null ? void 0 : _onPressOut(event);
      },
      onResponderTerminationRequest_DEPRECATED: onResponderTerminationRequest,
      onStartShouldSetResponder_DEPRECATED: onStartShouldSetResponder
    } : null;
  }, [initialized, isPressable, pressRetentionOffset, onLongPress, onPress, _onPressIn, _onPressOut, onResponderTerminationRequest, onStartShouldSetResponder, suppressHighlighting]);
  var eventHandlers = (0, _usePressability.default)(config);
  var eventHandlersForText = (0, React.useMemo)(function () {
    return eventHandlers == null ? null : {
      onResponderGrant: function onResponderGrant(event) {
        eventHandlers.onResponderGrant(event);
        if (_onResponderGrant != null) {
          _onResponderGrant(event);
        }
      },
      onResponderMove: function onResponderMove(event) {
        eventHandlers.onResponderMove(event);
        if (_onResponderMove != null) {
          _onResponderMove(event);
        }
      },
      onResponderRelease: function onResponderRelease(event) {
        eventHandlers.onResponderRelease(event);
        if (_onResponderRelease != null) {
          _onResponderRelease(event);
        }
      },
      onResponderTerminate: function onResponderTerminate(event) {
        eventHandlers.onResponderTerminate(event);
        if (_onResponderTerminate != null) {
          _onResponderTerminate(event);
        }
      },
      onClick: eventHandlers.onClick,
      onResponderTerminationRequest: eventHandlers.onResponderTerminationRequest,
      onStartShouldSetResponder: eventHandlers.onStartShouldSetResponder
    };
  }, [eventHandlers, _onResponderGrant, _onResponderMove, _onResponderRelease, _onResponderTerminate]);
  var selectionColor = restProps.selectionColor == null ? null : (0, _processColor.default)(restProps.selectionColor);
  var style = restProps.style;
  if (__DEV__) {
    if (PressabilityDebug.isEnabled() && onPress != null) {
      style = _StyleSheet.default.compose(restProps.style, {
        color: 'magenta'
      });
    }
  }
  var numberOfLines = restProps.numberOfLines;
  if (numberOfLines != null && !(numberOfLines >= 0)) {
    console.error("'numberOfLines' in <Text> must be a non-negative number, received: " + numberOfLines + ". The value will be set to 0.");
    numberOfLines = 0;
  }
  var hasTextAncestor = (0, React.useContext)(_TextAncestor.default);
  var _accessible = _Platform.default.select({
    ios: accessible !== false,
    default: accessible
  });
  return hasTextAncestor ? (0, _jsxRuntime.jsx)(_TextNativeComponent.NativeVirtualText, Object.assign({}, restProps, eventHandlersForText, {
    isHighlighted: isHighlighted,
    isPressable: isPressable,
    numberOfLines: numberOfLines,
    selectionColor: selectionColor,
    style: style,
    ref: forwardedRef
  })) : (0, _jsxRuntime.jsx)(_TextAncestor.default.Provider, {
    value: true,
    children: (0, _jsxRuntime.jsx)(_TextNativeComponent.NativeText, Object.assign({}, restProps, eventHandlersForText, {
      disabled: _disabled,
      accessible: _accessible,
      accessibilityState: _accessibilityState,
      allowFontScaling: allowFontScaling !== false,
      ellipsizeMode: ellipsizeMode != null ? ellipsizeMode : 'tail',
      isHighlighted: isHighlighted,
      numberOfLines: numberOfLines,
      selectionColor: selectionColor,
      style: style,
      ref: forwardedRef
    }))
  });
});
Text.displayName = 'Text';
function useLazyInitialization(newValue) {
  var _useState3 = (0, React.useState)(newValue),
    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
    oldValue = _useState4[0],
    setValue = _useState4[1];
  if (!oldValue && newValue) {
    setValue(newValue);
  }
  return oldValue;
}
module.exports = Text;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUZXh0IiwiUmVhY3QiLCJmb3J3YXJkUmVmIiwicHJvcHMiLCJmb3J3YXJkZWRSZWYiLCJhY2Nlc3NpYmxlIiwiYWxsb3dGb250U2NhbGluZyIsImVsbGlwc2l6ZU1vZGUiLCJvbkxvbmdQcmVzcyIsIm9uUHJlc3MiLCJvblByZXNzSW4iLCJvblByZXNzT3V0Iiwib25SZXNwb25kZXJHcmFudCIsIm9uUmVzcG9uZGVyTW92ZSIsIm9uUmVzcG9uZGVyUmVsZWFzZSIsIm9uUmVzcG9uZGVyVGVybWluYXRlIiwib25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyIiwicHJlc3NSZXRlbnRpb25PZmZzZXQiLCJzdXBwcmVzc0hpZ2hsaWdodGluZyIsInJlc3RQcm9wcyIsInVzZVN0YXRlIiwiaXNIaWdobGlnaHRlZCIsInNldEhpZ2hsaWdodGVkIiwiX2Rpc2FibGVkIiwiZGlzYWJsZWQiLCJhY2Nlc3NpYmlsaXR5U3RhdGUiLCJfYWNjZXNzaWJpbGl0eVN0YXRlIiwiaXNQcmVzc2FibGUiLCJpbml0aWFsaXplZCIsInVzZUxhenlJbml0aWFsaXphdGlvbiIsImNvbmZpZyIsInVzZU1lbW8iLCJwcmVzc1JlY3RPZmZzZXQiLCJldmVudCIsIm9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0X0RFUFJFQ0FURUQiLCJvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyX0RFUFJFQ0FURUQiLCJldmVudEhhbmRsZXJzIiwidXNlUHJlc3NhYmlsaXR5IiwiZXZlbnRIYW5kbGVyc0ZvclRleHQiLCJvbkNsaWNrIiwic2VsZWN0aW9uQ29sb3IiLCJwcm9jZXNzQ29sb3IiLCJzdHlsZSIsIl9fREVWX18iLCJQcmVzc2FiaWxpdHlEZWJ1ZyIsImlzRW5hYmxlZCIsIlN0eWxlU2hlZXQiLCJjb21wb3NlIiwiY29sb3IiLCJudW1iZXJPZkxpbmVzIiwiY29uc29sZSIsImVycm9yIiwiaGFzVGV4dEFuY2VzdG9yIiwidXNlQ29udGV4dCIsIlRleHRBbmNlc3RvciIsIl9hY2Nlc3NpYmxlIiwiUGxhdGZvcm0iLCJzZWxlY3QiLCJpb3MiLCJkZWZhdWx0IiwiZGlzcGxheU5hbWUiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwic2V0VmFsdWUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVGV4dC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3cgc3RyaWN0LWxvY2FsXG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1ByZXNzRXZlbnR9IGZyb20gJy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcblxuaW1wb3J0IFBsYXRmb3JtIGZyb20gJy4uL1V0aWxpdGllcy9QbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBQcmVzc2FiaWxpdHlEZWJ1ZyBmcm9tICcuLi9QcmVzc2FiaWxpdHkvUHJlc3NhYmlsaXR5RGVidWcnO1xuaW1wb3J0IHVzZVByZXNzYWJpbGl0eSBmcm9tICcuLi9QcmVzc2FiaWxpdHkvdXNlUHJlc3NhYmlsaXR5JztcbmltcG9ydCBTdHlsZVNoZWV0IGZyb20gJy4uL1N0eWxlU2hlZXQvU3R5bGVTaGVldCc7XG5pbXBvcnQgcHJvY2Vzc0NvbG9yIGZyb20gJy4uL1N0eWxlU2hlZXQvcHJvY2Vzc0NvbG9yJztcbmltcG9ydCBUZXh0QW5jZXN0b3IgZnJvbSAnLi9UZXh0QW5jZXN0b3InO1xuaW1wb3J0IHtOYXRpdmVUZXh0LCBOYXRpdmVWaXJ0dWFsVGV4dH0gZnJvbSAnLi9UZXh0TmF0aXZlQ29tcG9uZW50JztcbmltcG9ydCB7dHlwZSBUZXh0UHJvcHN9IGZyb20gJy4vVGV4dFByb3BzJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7dXNlQ29udGV4dCwgdXNlTWVtbywgdXNlU3RhdGV9IGZyb20gJ3JlYWN0JztcblxuLyoqXG4gKiBUZXh0IGlzIHRoZSBmdW5kYW1lbnRhbCBjb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgdGV4dC5cbiAqXG4gKiBAc2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvdGV4dFxuICovXG5jb25zdCBUZXh0OiBSZWFjdC5BYnN0cmFjdENvbXBvbmVudDxcbiAgVGV4dFByb3BzLFxuICBSZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBOYXRpdmVUZXh0IHwgdHlwZW9mIE5hdGl2ZVZpcnR1YWxUZXh0Pixcbj4gPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogVGV4dFByb3BzLCBmb3J3YXJkZWRSZWYpID0+IHtcbiAgY29uc3Qge1xuICAgIGFjY2Vzc2libGUsXG4gICAgYWxsb3dGb250U2NhbGluZyxcbiAgICBlbGxpcHNpemVNb2RlLFxuICAgIG9uTG9uZ1ByZXNzLFxuICAgIG9uUHJlc3MsXG4gICAgb25QcmVzc0luLFxuICAgIG9uUHJlc3NPdXQsXG4gICAgb25SZXNwb25kZXJHcmFudCxcbiAgICBvblJlc3BvbmRlck1vdmUsXG4gICAgb25SZXNwb25kZXJSZWxlYXNlLFxuICAgIG9uUmVzcG9uZGVyVGVybWluYXRlLFxuICAgIG9uUmVzcG9uZGVyVGVybWluYXRpb25SZXF1ZXN0LFxuICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIsXG4gICAgcHJlc3NSZXRlbnRpb25PZmZzZXQsXG4gICAgc3VwcHJlc3NIaWdobGlnaHRpbmcsXG4gICAgLi4ucmVzdFByb3BzXG4gIH0gPSBwcm9wcztcblxuICBjb25zdCBbaXNIaWdobGlnaHRlZCwgc2V0SGlnaGxpZ2h0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIGNvbnN0IF9kaXNhYmxlZCA9XG4gICAgcmVzdFByb3BzLmRpc2FibGVkICE9IG51bGxcbiAgICAgID8gcmVzdFByb3BzLmRpc2FibGVkXG4gICAgICA6IHByb3BzLmFjY2Vzc2liaWxpdHlTdGF0ZT8uZGlzYWJsZWQ7XG4gIGNvbnN0IF9hY2Nlc3NpYmlsaXR5U3RhdGUgPVxuICAgIF9kaXNhYmxlZCAhPT0gcHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlPy5kaXNhYmxlZFxuICAgICAgPyB7Li4ucHJvcHMuYWNjZXNzaWJpbGl0eVN0YXRlLCBkaXNhYmxlZDogX2Rpc2FibGVkfVxuICAgICAgOiBwcm9wcy5hY2Nlc3NpYmlsaXR5U3RhdGU7XG5cbiAgY29uc3QgaXNQcmVzc2FibGUgPVxuICAgIChvblByZXNzICE9IG51bGwgfHxcbiAgICAgIG9uTG9uZ1ByZXNzICE9IG51bGwgfHxcbiAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXIgIT0gbnVsbCkgJiZcbiAgICBfZGlzYWJsZWQgIT09IHRydWU7XG5cbiAgY29uc3QgaW5pdGlhbGl6ZWQgPSB1c2VMYXp5SW5pdGlhbGl6YXRpb24oaXNQcmVzc2FibGUpO1xuICBjb25zdCBjb25maWcgPSB1c2VNZW1vKFxuICAgICgpID0+XG4gICAgICBpbml0aWFsaXplZFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGRpc2FibGVkOiAhaXNQcmVzc2FibGUsXG4gICAgICAgICAgICBwcmVzc1JlY3RPZmZzZXQ6IHByZXNzUmV0ZW50aW9uT2Zmc2V0LFxuICAgICAgICAgICAgb25Mb25nUHJlc3MsXG4gICAgICAgICAgICBvblByZXNzLFxuICAgICAgICAgICAgb25QcmVzc0luKGV2ZW50OiBQcmVzc0V2ZW50KSB7XG4gICAgICAgICAgICAgIHNldEhpZ2hsaWdodGVkKCFzdXBwcmVzc0hpZ2hsaWdodGluZyk7XG4gICAgICAgICAgICAgIG9uUHJlc3NJbj8uKGV2ZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblByZXNzT3V0KGV2ZW50OiBQcmVzc0V2ZW50KSB7XG4gICAgICAgICAgICAgIHNldEhpZ2hsaWdodGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgb25QcmVzc091dD8uKGV2ZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdF9ERVBSRUNBVEVEOlxuICAgICAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCxcbiAgICAgICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXJfREVQUkVDQVRFRDogb25TdGFydFNob3VsZFNldFJlc3BvbmRlcixcbiAgICAgICAgICB9XG4gICAgICAgIDogbnVsbCxcbiAgICBbXG4gICAgICBpbml0aWFsaXplZCxcbiAgICAgIGlzUHJlc3NhYmxlLFxuICAgICAgcHJlc3NSZXRlbnRpb25PZmZzZXQsXG4gICAgICBvbkxvbmdQcmVzcyxcbiAgICAgIG9uUHJlc3MsXG4gICAgICBvblByZXNzSW4sXG4gICAgICBvblByZXNzT3V0LFxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGlvblJlcXVlc3QsXG4gICAgICBvblN0YXJ0U2hvdWxkU2V0UmVzcG9uZGVyLFxuICAgICAgc3VwcHJlc3NIaWdobGlnaHRpbmcsXG4gICAgXSxcbiAgKTtcblxuICBjb25zdCBldmVudEhhbmRsZXJzID0gdXNlUHJlc3NhYmlsaXR5KGNvbmZpZyk7XG4gIGNvbnN0IGV2ZW50SGFuZGxlcnNGb3JUZXh0ID0gdXNlTWVtbyhcbiAgICAoKSA9PlxuICAgICAgZXZlbnRIYW5kbGVycyA9PSBudWxsXG4gICAgICAgID8gbnVsbFxuICAgICAgICA6IHtcbiAgICAgICAgICAgIG9uUmVzcG9uZGVyR3JhbnQoZXZlbnQ6IFByZXNzRXZlbnQpIHtcbiAgICAgICAgICAgICAgZXZlbnRIYW5kbGVycy5vblJlc3BvbmRlckdyYW50KGV2ZW50KTtcbiAgICAgICAgICAgICAgaWYgKG9uUmVzcG9uZGVyR3JhbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9uUmVzcG9uZGVyR3JhbnQoZXZlbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25SZXNwb25kZXJNb3ZlKGV2ZW50OiBQcmVzc0V2ZW50KSB7XG4gICAgICAgICAgICAgIGV2ZW50SGFuZGxlcnMub25SZXNwb25kZXJNb3ZlKGV2ZW50KTtcbiAgICAgICAgICAgICAgaWYgKG9uUmVzcG9uZGVyTW92ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb25SZXNwb25kZXJNb3ZlKGV2ZW50KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZShldmVudDogUHJlc3NFdmVudCkge1xuICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLm9uUmVzcG9uZGVyUmVsZWFzZShldmVudCk7XG4gICAgICAgICAgICAgIGlmIChvblJlc3BvbmRlclJlbGVhc2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG9uUmVzcG9uZGVyUmVsZWFzZShldmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZShldmVudDogUHJlc3NFdmVudCkge1xuICAgICAgICAgICAgICBldmVudEhhbmRsZXJzLm9uUmVzcG9uZGVyVGVybWluYXRlKGV2ZW50KTtcbiAgICAgICAgICAgICAgaWYgKG9uUmVzcG9uZGVyVGVybWluYXRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0ZShldmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNsaWNrOiBldmVudEhhbmRsZXJzLm9uQ2xpY2ssXG4gICAgICAgICAgICBvblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdDpcbiAgICAgICAgICAgICAgZXZlbnRIYW5kbGVycy5vblJlc3BvbmRlclRlcm1pbmF0aW9uUmVxdWVzdCxcbiAgICAgICAgICAgIG9uU3RhcnRTaG91bGRTZXRSZXNwb25kZXI6IGV2ZW50SGFuZGxlcnMub25TdGFydFNob3VsZFNldFJlc3BvbmRlcixcbiAgICAgICAgICB9LFxuICAgIFtcbiAgICAgIGV2ZW50SGFuZGxlcnMsXG4gICAgICBvblJlc3BvbmRlckdyYW50LFxuICAgICAgb25SZXNwb25kZXJNb3ZlLFxuICAgICAgb25SZXNwb25kZXJSZWxlYXNlLFxuICAgICAgb25SZXNwb25kZXJUZXJtaW5hdGUsXG4gICAgXSxcbiAgKTtcblxuICAvLyBUT0RPOiBNb3ZlIHRoaXMgcHJvY2Vzc2luZyB0byB0aGUgdmlldyBjb25maWd1cmF0aW9uLlxuICBjb25zdCBzZWxlY3Rpb25Db2xvciA9XG4gICAgcmVzdFByb3BzLnNlbGVjdGlvbkNvbG9yID09IG51bGxcbiAgICAgID8gbnVsbFxuICAgICAgOiBwcm9jZXNzQ29sb3IocmVzdFByb3BzLnNlbGVjdGlvbkNvbG9yKTtcblxuICBsZXQgc3R5bGUgPSByZXN0UHJvcHMuc3R5bGU7XG4gIGlmIChfX0RFVl9fKSB7XG4gICAgaWYgKFByZXNzYWJpbGl0eURlYnVnLmlzRW5hYmxlZCgpICYmIG9uUHJlc3MgIT0gbnVsbCkge1xuICAgICAgc3R5bGUgPSBTdHlsZVNoZWV0LmNvbXBvc2UocmVzdFByb3BzLnN0eWxlLCB7XG4gICAgICAgIGNvbG9yOiAnbWFnZW50YScsXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBsZXQgbnVtYmVyT2ZMaW5lcyA9IHJlc3RQcm9wcy5udW1iZXJPZkxpbmVzO1xuICBpZiAobnVtYmVyT2ZMaW5lcyAhPSBudWxsICYmICEobnVtYmVyT2ZMaW5lcyA+PSAwKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBgJ251bWJlck9mTGluZXMnIGluIDxUZXh0PiBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIG51bWJlciwgcmVjZWl2ZWQ6ICR7bnVtYmVyT2ZMaW5lc30uIFRoZSB2YWx1ZSB3aWxsIGJlIHNldCB0byAwLmAsXG4gICAgKTtcbiAgICBudW1iZXJPZkxpbmVzID0gMDtcbiAgfVxuXG4gIGNvbnN0IGhhc1RleHRBbmNlc3RvciA9IHVzZUNvbnRleHQoVGV4dEFuY2VzdG9yKTtcblxuICBjb25zdCBfYWNjZXNzaWJsZSA9IFBsYXRmb3JtLnNlbGVjdCh7XG4gICAgaW9zOiBhY2Nlc3NpYmxlICE9PSBmYWxzZSxcbiAgICBkZWZhdWx0OiBhY2Nlc3NpYmxlLFxuICB9KTtcblxuICByZXR1cm4gaGFzVGV4dEFuY2VzdG9yID8gKFxuICAgIDxOYXRpdmVWaXJ0dWFsVGV4dFxuICAgICAgey4uLnJlc3RQcm9wc31cbiAgICAgIHsuLi5ldmVudEhhbmRsZXJzRm9yVGV4dH1cbiAgICAgIGlzSGlnaGxpZ2h0ZWQ9e2lzSGlnaGxpZ2h0ZWR9XG4gICAgICBpc1ByZXNzYWJsZT17aXNQcmVzc2FibGV9XG4gICAgICBudW1iZXJPZkxpbmVzPXtudW1iZXJPZkxpbmVzfVxuICAgICAgc2VsZWN0aW9uQ29sb3I9e3NlbGVjdGlvbkNvbG9yfVxuICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgcmVmPXtmb3J3YXJkZWRSZWZ9XG4gICAgLz5cbiAgKSA6IChcbiAgICA8VGV4dEFuY2VzdG9yLlByb3ZpZGVyIHZhbHVlPXt0cnVlfT5cbiAgICAgIDxOYXRpdmVUZXh0XG4gICAgICAgIHsuLi5yZXN0UHJvcHN9XG4gICAgICAgIHsuLi5ldmVudEhhbmRsZXJzRm9yVGV4dH1cbiAgICAgICAgZGlzYWJsZWQ9e19kaXNhYmxlZH1cbiAgICAgICAgYWNjZXNzaWJsZT17X2FjY2Vzc2libGV9XG4gICAgICAgIGFjY2Vzc2liaWxpdHlTdGF0ZT17X2FjY2Vzc2liaWxpdHlTdGF0ZX1cbiAgICAgICAgYWxsb3dGb250U2NhbGluZz17YWxsb3dGb250U2NhbGluZyAhPT0gZmFsc2V9XG4gICAgICAgIGVsbGlwc2l6ZU1vZGU9e2VsbGlwc2l6ZU1vZGUgPz8gJ3RhaWwnfVxuICAgICAgICBpc0hpZ2hsaWdodGVkPXtpc0hpZ2hsaWdodGVkfVxuICAgICAgICBudW1iZXJPZkxpbmVzPXtudW1iZXJPZkxpbmVzfVxuICAgICAgICBzZWxlY3Rpb25Db2xvcj17c2VsZWN0aW9uQ29sb3J9XG4gICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgcmVmPXtmb3J3YXJkZWRSZWZ9XG4gICAgICAvPlxuICAgIDwvVGV4dEFuY2VzdG9yLlByb3ZpZGVyPlxuICApO1xufSk7XG5cblRleHQuZGlzcGxheU5hbWUgPSAnVGV4dCc7XG5cbi8qKlxuICogUmV0dXJucyBmYWxzZSB1bnRpbCB0aGUgZmlyc3QgdGltZSBgbmV3VmFsdWVgIGlzIHRydWUsIGFmdGVyIHdoaWNoIHRoaXMgd2lsbFxuICogYWx3YXlzIHJldHVybiB0cnVlLiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBsYXppbHkgaW5pdGlhbGl6ZSBgUHJlc3NhYmlsaXR5YCBzb1xuICogd2UgZG8gbm90IGVhZ2VybHkgY3JlYXRlIG9uZSBmb3IgZXZlcnkgcHJlc3NhYmxlIGBUZXh0YCBjb21wb25lbnQuXG4gKi9cbmZ1bmN0aW9uIHVzZUxhenlJbml0aWFsaXphdGlvbihuZXdWYWx1ZTogYm9vbGVhbik6IGJvb2xlYW4ge1xuICBjb25zdCBbb2xkVmFsdWUsIHNldFZhbHVlXSA9IHVzZVN0YXRlKG5ld1ZhbHVlKTtcbiAgaWYgKCFvbGRWYWx1ZSAmJiBuZXdWYWx1ZSkge1xuICAgIHNldFZhbHVlKG5ld1ZhbHVlKTtcbiAgfVxuICByZXR1cm4gb2xkVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVGV4dDtcbiJdLCJtYXBwaW5ncyI6Ijs7O0FBWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUErQjtBQUFBO0FBQUE7QUFBQTtBQVEvQixJQUFNQSxJQUdMLEdBQUdDLEtBQUssQ0FBQ0MsVUFBVSxDQUFDLFVBQUNDLEtBQWdCLEVBQUVDLFlBQVksRUFBSztFQUFBO0VBQ3ZELElBQ0VDLFVBQVUsR0FnQlJGLEtBQUssQ0FoQlBFLFVBQVU7SUFDVkMsZ0JBQWdCLEdBZWRILEtBQUssQ0FmUEcsZ0JBQWdCO0lBQ2hCQyxh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