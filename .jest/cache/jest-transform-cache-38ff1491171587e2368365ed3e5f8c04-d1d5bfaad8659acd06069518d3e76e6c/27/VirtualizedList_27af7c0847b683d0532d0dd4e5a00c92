06c670a569db3299e3f1c8983c63331f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _VirtualizedListContext = require("./VirtualizedListContext.js");
var _VirtualizeUtils = require("./VirtualizeUtils");
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var RefreshControl = require('../Components/RefreshControl/RefreshControl');
var ScrollView = require('../Components/ScrollView/ScrollView');
var View = require('../Components/View/View');
var Batchinator = require('../Interaction/Batchinator');
var ReactNative = require('../Renderer/shims/ReactNative');
var flattenStyle = require('../StyleSheet/flattenStyle');
var StyleSheet = require('../StyleSheet/StyleSheet');
var infoLog = require('../Utilities/infoLog');
var FillRateHelper = require('./FillRateHelper');
var ViewabilityHelper = require('./ViewabilityHelper');
var invariant = require('invariant');
var ON_END_REACHED_EPSILON = 0.001;
var _usedIndexForKey = false;
var _keylessItemComponentName = '';
function horizontalOrDefault(horizontal) {
  return horizontal != null ? horizontal : false;
}
function initialNumToRenderOrDefault(initialNumToRender) {
  return initialNumToRender != null ? initialNumToRender : 10;
}
function maxToRenderPerBatchOrDefault(maxToRenderPerBatch) {
  return maxToRenderPerBatch != null ? maxToRenderPerBatch : 10;
}
function onEndReachedThresholdOrDefault(onEndReachedThreshold) {
  return onEndReachedThreshold != null ? onEndReachedThreshold : 2;
}
function scrollEventThrottleOrDefault(scrollEventThrottle) {
  return scrollEventThrottle != null ? scrollEventThrottle : 50;
}
function windowSizeOrDefault(windowSize) {
  return windowSize != null ? windowSize : 21;
}
var VirtualizedList = function (_React$PureComponent) {
  (0, _inherits2.default)(VirtualizedList, _React$PureComponent);
  var _super = _createSuper(VirtualizedList);
  function VirtualizedList(_props) {
    var _this$props$updateCel;
    var _this;
    (0, _classCallCheck2.default)(this, VirtualizedList);
    _this = _super.call(this, _props);
    _this._getScrollMetrics = function () {
      return _this._scrollMetrics;
    };
    _this._getOutermostParentListRef = function () {
      if (_this._isNestedWithSameOrientation()) {
        return _this.context.getOutermostParentListRef();
      } else {
        return (0, _assertThisInitialized2.default)(_this);
      }
    };
    _this._getNestedChildState = function (key) {
      var existingChildData = _this._nestedChildLists.get(key);
      return existingChildData && existingChildData.state;
    };
    _this._registerAsNestedChild = function (childList) {
      var childListsInCell = _this._cellKeysToChildListKeys.get(childList.cellKey) || new Set();
      childListsInCell.add(childList.key);
      _this._cellKeysToChildListKeys.set(childList.cellKey, childListsInCell);
      var existingChildData = _this._nestedChildLists.get(childList.key);
      if (existingChildData && existingChildData.ref !== null) {
        console.error('A VirtualizedList contains a cell which itself contains ' + 'more than one VirtualizedList of the same orientation as the parent ' + 'list. You must pass a unique listKey prop to each sibling list.\n\n' + describeNestedLists(Object.assign({}, childList, {
          horizontal: !!childList.ref.props.horizontal
        })));
      }
      _this._nestedChildLists.set(childList.key, {
        ref: childList.ref,
        state: null
      });
      if (_this._hasInteracted) {
        childList.ref.recordInteraction();
      }
    };
    _this._unregisterAsNestedChild = function (childList) {
      _this._nestedChildLists.set(childList.key, {
        ref: null,
        state: childList.state
      });
    };
    _this._onUpdateSeparators = function (keys, newProps) {
      keys.forEach(function (key) {
        var ref = key != null && _this._cellRefs[key];
        ref && ref.updateSeparatorProps(newProps);
      });
    };
    _this._getSpacerKey = function (isVertical) {
      return isVertical ? 'height' : 'width';
    };
    _this._averageCellLength = 0;
    _this._cellKeysToChildListKeys = new Map();
    _this._cellRefs = {};
    _this._frames = {};
    _this._footerLength = 0;
    _this._hasTriggeredInitialScrollToIndex = false;
    _this._hasInteracted = false;
    _this._hasMore = false;
    _this._hasWarned = {};
    _this._headerLength = 0;
    _this._hiPriInProgress = false;
    _this._highestMeasuredFrameIndex = 0;
    _this._indicesToKeys = new Map();
    _this._nestedChildLists = new Map();
    _this._offsetFromParentVirtualizedList = 0;
    _this._prevParentOffset = 0;
    _this._scrollMetrics = {
      contentLength: 0,
      dOffset: 0,
      dt: 10,
      offset: 0,
      timestamp: 0,
      velocity: 0,
      visibleLength: 0,
      zoomScale: 1
    };
    _this._scrollRef = null;
    _this._sentEndForContentLength = 0;
    _this._totalCellLength = 0;
    _this._totalCellsMeasured = 0;
    _this._viewabilityTuples = [];
    _this._captureScrollRef = function (ref) {
      _this._scrollRef = ref;
    };
    _this._defaultRenderScrollComponent = function (props) {
      var onRefresh = props.onRefresh;
      if (_this._isNestedWithSameOrientation()) {
        return (0, _jsxRuntime.jsx)(View, Object.assign({}, props));
      } else if (onRefresh) {
        var _props$refreshing;
        invariant(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify((_props$refreshing = props.refreshing) != null ? _props$refreshing : 'undefined') + '`');
        return (0, _jsxRuntime.jsx)(ScrollView, Object.assign({}, props, {
          refreshControl: props.refreshControl == null ? (0, _jsxRuntime.jsx)(RefreshControl, {
            refreshing: props.refreshing,
            onRefresh: onRefresh,
            progressViewOffset: props.progressViewOffset
          }) : props.refreshControl
        }));
      } else {
        return (0, _jsxRuntime.jsx)(ScrollView, Object.assign({}, props));
      }
    };
    _this._onCellLayout = function (e, cellKey, index) {
      var layout = e.nativeEvent.layout;
      var next = {
        offset: _this._selectOffset(layout),
        length: _this._selectLength(layout),
        index: index,
        inLayout: true
      };
      var curr = _this._frames[cellKey];
      if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {
        _this._totalCellLength += next.length - (curr ? curr.length : 0);
        _this._totalCellsMeasured += curr ? 0 : 1;
        _this._averageCellLength = _this._totalCellLength / _this._totalCellsMeasured;
        _this._frames[cellKey] = next;
        _this._highestMeasuredFrameIndex = Math.max(_this._highestMeasuredFrameIndex, index);
        _this._scheduleCellsToRenderUpdate();
      } else {
        _this._frames[cellKey].inLayout = true;
      }
      _this._triggerRemeasureForChildListsInCell(cellKey);
      _this._computeBlankness();
      _this._updateViewableItems(_this.props.data);
    };
    _this._onCellUnmount = function (cellKey) {
      var curr = _this._frames[cellKey];
      if (curr) {
        _this._frames[cellKey] = Object.assign({}, curr, {
          inLayout: false
        });
      }
    };
    _this._onLayout = function (e) {
      if (_this._isNestedWithSameOrientation()) {
        _this.measureLayoutRelativeToContainingList();
      } else {
        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);
      }
      _this.props.onLayout && _this.props.onLayout(e);
      _this._scheduleCellsToRenderUpdate();
      _this._maybeCallOnEndReached();
    };
    _this._onLayoutEmpty = function (e) {
      _this.props.onLayout && _this.props.onLayout(e);
    };
    _this._onLayoutFooter = function (e) {
      _this._triggerRemeasureForChildListsInCell(_this._getFooterCellKey());
      _this._footerLength = _this._selectLength(e.nativeEvent.layout);
    };
    _this._onLayoutHeader = function (e) {
      _this._headerLength = _this._selectLength(e.nativeEvent.layout);
    };
    _this._onContentSizeChange = function (width, height) {
      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasTriggeredInitialScrollToIndex) {
        if (_this.props.contentOffset == null) {
          _this.scrollToIndex({
            animated: false,
            index: _this.props.initialScrollIndex
          });
        }
        _this._hasTriggeredInitialScrollToIndex = true;
      }
      if (_this.props.onContentSizeChange) {
        _this.props.onContentSizeChange(width, height);
      }
      _this._scrollMetrics.contentLength = _this._selectLength({
        height: height,
        width: width
      });
      _this._scheduleCellsToRenderUpdate();
      _this._maybeCallOnEndReached();
    };
    _this._convertParentScrollMetrics = function (metrics) {
      var offset = metrics.offset - _this._offsetFromParentVirtualizedList;
      var visibleLength = metrics.visibleLength;
      var dOffset = offset - _this._scrollMetrics.offset;
      var contentLength = _this._scrollMetrics.contentLength;
      return {
        visibleLength: visibleLength,
        contentLength: contentLength,
        offset: offset,
        dOffset: dOffset
      };
    };
    _this._onScroll = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScroll(e);
      });
      if (_this.props.onScroll) {
        _this.props.onScroll(e);
      }
      var timestamp = e.timeStamp;
      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);
      var contentLength = _this._selectLength(e.nativeEvent.contentSize);
      var offset = _this._selectOffset(e.nativeEvent.contentOffset);
      var dOffset = offset - _this._scrollMetrics.offset;
      if (_this._isNestedWithSameOrientation()) {
        if (_this._scrollMetrics.contentLength === 0) {
          return;
        }
        var _this$_convertParentS = _this._convertParentScrollMetrics({
          visibleLength: visibleLength,
          offset: offset
        });
        visibleLength = _this$_convertParentS.visibleLength;
        contentLength = _this$_convertParentS.contentLength;
        offset = _this$_convertParentS.offset;
        dOffset = _this$_convertParentS.dOffset;
      }
      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;
      var velocity = dOffset / dt;
      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {
        infoLog('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {
          dt: dt,
          prevDt: _this._scrollMetrics.dt,
          contentLength: contentLength
        });
        _this._hasWarned.perf = true;
      }
      var zoomScale = e.nativeEvent.zoomScale < 0 ? 1 : e.nativeEvent.zoomScale;
      _this._scrollMetrics = {
        contentLength: contentLength,
        dt: dt,
        dOffset: dOffset,
        offset: offset,
        timestamp: timestamp,
        velocity: velocity,
        visibleLength: visibleLength,
        zoomScale: zoomScale
      };
      _this._updateViewableItems(_this.props.data);
      if (!_this.props) {
        return;
      }
      _this._maybeCallOnEndReached();
      if (velocity !== 0) {
        _this._fillRateHelper.activate();
      }
      _this._computeBlankness();
      _this._scheduleCellsToRenderUpdate();
    };
    _this._onScrollBeginDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollBeginDrag(e);
      });
      _this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.recordInteraction();
      });
      _this._hasInteracted = true;
      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);
    };
    _this._onScrollEndDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onScrollEndDrag(e);
      });
      var velocity = e.nativeEvent.velocity;
      if (velocity) {
        _this._scrollMetrics.velocity = _this._selectOffset(velocity);
      }
      _this._computeBlankness();
      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);
    };
    _this._onMomentumScrollBegin = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onMomentumScrollBegin(e);
      });
      _this.props.onMomentumScrollBegin && _this.props.onMomentumScrollBegin(e);
    };
    _this._onMomentumScrollEnd = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref._onMomentumScrollEnd(e);
      });
      _this._scrollMetrics.velocity = 0;
      _this._computeBlankness();
      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);
    };
    _this._updateCellsToRender = function () {
      var _this$props = _this.props,
        data = _this$props.data,
        getItemCount = _this$props.getItemCount,
        _onEndReachedThreshold = _this$props.onEndReachedThreshold;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(_onEndReachedThreshold);
      var isVirtualizationDisabled = _this._isVirtualizationDisabled();
      _this._updateViewableItems(data);
      if (!data) {
        return;
      }
      _this.setState(function (state) {
        var newState;
        var _this$_scrollMetrics = _this._scrollMetrics,
          contentLength = _this$_scrollMetrics.contentLength,
          offset = _this$_scrollMetrics.offset,
          visibleLength = _this$_scrollMetrics.visibleLength;
        var distanceFromEnd = contentLength - visibleLength - offset;
        if (!isVirtualizationDisabled) {
          if (visibleLength > 0 && contentLength > 0) {
            if (!_this.props.initialScrollIndex || _this._scrollMetrics.offset || Math.abs(distanceFromEnd) < Number.EPSILON) {
              newState = (0, _VirtualizeUtils.computeWindowedRenderLimits)(_this.props.data, _this.props.getItemCount, maxToRenderPerBatchOrDefault(_this.props.maxToRenderPerBatch), windowSizeOrDefault(_this.props.windowSize), state, _this.__getFrameMetricsApprox, _this._scrollMetrics);
            }
          }
        } else {
          var renderAhead = distanceFromEnd < onEndReachedThreshold * visibleLength ? maxToRenderPerBatchOrDefault(_this.props.maxToRenderPerBatch) : 0;
          newState = {
            first: 0,
            last: Math.min(state.last + renderAhead, getItemCount(data) - 1)
          };
        }
        if (newState && _this._nestedChildLists.size > 0) {
          var newFirst = newState.first;
          var newLast = newState.last;
          for (var ii = newFirst; ii <= newLast; ii++) {
            var cellKeyForIndex = _this._indicesToKeys.get(ii);
            var childListKeys = cellKeyForIndex && _this._cellKeysToChildListKeys.get(cellKeyForIndex);
            if (!childListKeys) {
              continue;
            }
            var someChildHasMore = false;
            for (var childKey of childListKeys) {
              var childList = _this._nestedChildLists.get(childKey);
              if (childList && childList.ref && childList.ref.hasMore()) {
                someChildHasMore = true;
                break;
              }
            }
            if (someChildHasMore) {
              newState.last = ii;
              break;
            }
          }
        }
        if (newState != null && newState.first === state.first && newState.last === state.last) {
          newState = null;
        }
        return newState;
      });
    };
    _this._createViewToken = function (index, isViewable) {
      var _this$props2 = _this.props,
        data = _this$props2.data,
        getItem = _this$props2.getItem;
      var item = getItem(data, index);
      return {
        index: index,
        item: item,
        key: _this._keyExtractor(item, index),
        isViewable: isViewable
      };
    };
    _this.__getFrameMetricsApprox = function (index) {
      var frame = _this._getFrameMetrics(index);
      if (frame && frame.index === index) {
        return frame;
      } else {
        var getItemLayout = _this.props.getItemLayout;
        invariant(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');
        return {
          length: _this._averageCellLength,
          offset: _this._averageCellLength * index
        };
      }
    };
    _this._getFrameMetrics = function (index) {
      var _this$props3 = _this.props,
        data = _this$props3.data,
        getItem = _this$props3.getItem,
        getItemCount = _this$props3.getItemCount,
        getItemLayout = _this$props3.getItemLayout;
      invariant(getItemCount(data) > index, 'Tried to get frame for out of range index ' + index);
      var item = getItem(data, index);
      var frame = item && _this._frames[_this._keyExtractor(item, index)];
      if (!frame || frame.index !== index) {
        if (getItemLayout) {
          return getItemLayout(data, index);
        }
      }
      return frame;
    };
    invariant(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');
    invariant(windowSizeOrDefault(_props.windowSize) > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');
    _this._fillRateHelper = new FillRateHelper(_this._getFrameMetrics);
    _this._updateCellsToRenderBatcher = new Batchinator(_this._updateCellsToRender, (_this$props$updateCel = _this.props.updateCellsBatchingPeriod) != null ? _this$props$updateCel : 50);
    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityHelper: new ViewabilityHelper(pair.viewabilityConfig),
          onViewableItemsChanged: pair.onViewableItemsChanged
        };
      });
    } else {
      var _this$props4 = _this.props,
        onViewableItemsChanged = _this$props4.onViewableItemsChanged,
        viewabilityConfig = _this$props4.viewabilityConfig;
      if (onViewableItemsChanged) {
        _this._viewabilityTuples.push({
          viewabilityHelper: new ViewabilityHelper(viewabilityConfig),
          onViewableItemsChanged: onViewableItemsChanged
        });
      }
    }
    var initialState = {
      first: _this.props.initialScrollIndex || 0,
      last: Math.min(_this.props.getItemCount(_this.props.data), (_this.props.initialScrollIndex || 0) + initialNumToRenderOrDefault(_this.props.initialNumToRender)) - 1
    };
    if (_this._isNestedWithSameOrientation()) {
      var storedState = _this.context.getNestedChildState(_this._getListKey());
      if (storedState) {
        initialState = storedState;
        _this.state = storedState;
        _this._frames = storedState.frames;
      }
    }
    _this.state = initialState;
    return _this;
  }
  (0, _createClass2.default)(VirtualizedList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      var animated = params ? params.animated : true;
      var veryLast = this.props.getItemCount(this.props.data) - 1;
      var frame = this.__getFrameMetricsApprox(veryLast);
      var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      var _this$props5 = this.props,
        data = _this$props5.data,
        horizontal = _this$props5.horizontal,
        getItemCount = _this$props5.getItemCount,
        getItemLayout = _this$props5.getItemLayout,
        onScrollToIndexFailed = _this$props5.onScrollToIndexFailed;
      var animated = params.animated,
        index = params.index,
        viewOffset = params.viewOffset,
        viewPosition = params.viewPosition;
      invariant(index >= 0, "scrollToIndex out of range: requested index " + index + " but minimum is 0");
      invariant(getItemCount(data) >= 1, "scrollToIndex out of range: item length " + getItemCount(data) + " but minimum is 1");
      invariant(index < getItemCount(data), "scrollToIndex out of range: requested index " + index + " is out of 0 to " + (getItemCount(data) - 1));
      if (!getItemLayout && index > this._highestMeasuredFrameIndex) {
        invariant(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');
        onScrollToIndexFailed({
          averageItemLength: this._averageCellLength,
          highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,
          index: index
        });
        return;
      }
      var frame = this.__getFrameMetricsApprox(index);
      var offset = Math.max(0, frame.offset - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      var item = params.item;
      var _this$props6 = this.props,
        data = _this$props6.data,
        getItem = _this$props6.getItem,
        getItemCount = _this$props6.getItemCount;
      var itemCount = getItemCount(data);
      for (var _index = 0; _index < itemCount; _index++) {
        if (getItem(data, _index) === item) {
          this.scrollToIndex(Object.assign({}, params, {
            index: _index
          }));
          break;
        }
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      var animated = params.animated,
        offset = params.offset;
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      this._nestedChildLists.forEach(function (childList) {
        childList.ref && childList.ref.recordInteraction();
      });
      this._viewabilityTuples.forEach(function (t) {
        t.viewabilityHelper.recordInteraction();
      });
      this._updateViewableItems(this.props.data);
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      if (this._scrollRef == null) {
        return;
      }
      this._scrollRef.flashScrollIndicators();
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._scrollRef && this._scrollRef.getScrollResponder) {
        return this._scrollRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._scrollRef && this._scrollRef.getScrollableNode) {
        return this._scrollRef.getScrollableNode();
      } else {
        return ReactNative.findNodeHandle(this._scrollRef);
      }
    }
  }, {
    key: "getScrollRef",
    value: function getScrollRef() {
      if (this._scrollRef && this._scrollRef.getScrollRef) {
        return this._scrollRef.getScrollRef();
      } else {
        return this._scrollRef;
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._scrollRef) {
        this._scrollRef.setNativeProps(props);
      }
    }
  }, {
    key: "_getCellKey",
    value: function _getCellKey() {
      var _this$context;
      return ((_this$context = this.context) == null ? void 0 : _this$context.cellKey) || 'rootList';
    }
  }, {
    key: "_getListKey",
    value: function _getListKey() {
      return this.props.listKey || this._getCellKey();
    }
  }, {
    key: "_getDebugInfo",
    value: function _getDebugInfo() {
      var _this$context2;
      return {
        listKey: this._getListKey(),
        cellKey: this._getCellKey(),
        horizontal: horizontalOrDefault(this.props.horizontal),
        parent: (_this$context2 = this.context) == null ? void 0 : _this$context2.debugInfo
      };
    }
  }, {
    key: "hasMore",
    value: function hasMore() {
      return this._hasMore;
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.registerAsNestedChild({
          cellKey: this._getCellKey(),
          key: this._getListKey(),
          ref: this,
          parentDebugInfo: this.context.debugInfo
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.unregisterAsNestedChild({
          key: this._getListKey(),
          state: {
            first: this.state.first,
            last: this.state.last,
            frames: this._frames
          }
        });
      }
      this._updateViewableItems(null);
      this._updateCellsToRenderBatcher.dispose({
        abort: true
      });
      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.dispose();
      });
      this._fillRateHelper.deactivateAndFlush();
    }
  }, {
    key: "_pushCells",
    value: function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {
      var _this2 = this;
      var _this$props7 = this.props,
        CellRendererComponent = _this$props7.CellRendererComponent,
        ItemSeparatorComponent = _this$props7.ItemSeparatorComponent,
        ListHeaderComponent = _this$props7.ListHeaderComponent,
        ListItemComponent = _this$props7.ListItemComponent,
        data = _this$props7.data,
        debug = _this$props7.debug,
        getItem = _this$props7.getItem,
        getItemCount = _this$props7.getItemCount,
        getItemLayout = _this$props7.getItemLayout,
        horizontal = _this$props7.horizontal,
        renderItem = _this$props7.renderItem;
      var stickyOffset = ListHeaderComponent ? 1 : 0;
      var end = getItemCount(data) - 1;
      var prevCellKey;
      last = Math.min(end, last);
      var _loop = function _loop() {
        var item = getItem(data, ii);
        var key = _this2._keyExtractor(item, ii);
        _this2._indicesToKeys.set(ii, key);
        if (stickyIndicesFromProps.has(ii + stickyOffset)) {
          stickyHeaderIndices.push(cells.length);
        }
        cells.push((0, _jsxRuntime.jsx)(CellRenderer, {
          CellRendererComponent: CellRendererComponent,
          ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,
          ListItemComponent: ListItemComponent,
          cellKey: key,
          debug: debug,
          fillRateHelper: _this2._fillRateHelper,
          getItemLayout: getItemLayout,
          horizontal: horizontal,
          index: ii,
          inversionStyle: inversionStyle,
          item: item,
          prevCellKey: prevCellKey,
          onCellLayout: _this2._onCellLayout,
          onUpdateSeparators: _this2._onUpdateSeparators,
          onUnmount: _this2._onCellUnmount,
          ref: function ref(_ref) {
            _this2._cellRefs[key] = _ref;
          },
          renderItem: renderItem
        }, key));
        prevCellKey = key;
      };
      for (var ii = first; ii <= last; ii++) {
        _loop();
      }
    }
  }, {
    key: "_isVirtualizationDisabled",
    value: function _isVirtualizationDisabled() {
      return this.props.disableVirtualization || false;
    }
  }, {
    key: "_isNestedWithSameOrientation",
    value: function _isNestedWithSameOrientation() {
      var nestedContext = this.context;
      return !!(nestedContext && !!nestedContext.horizontal === horizontalOrDefault(this.props.horizontal));
    }
  }, {
    key: "_keyExtractor",
    value: function _keyExtractor(item, index) {
      if (this.props.keyExtractor != null) {
        return this.props.keyExtractor(item, index);
      }
      var key = (0, _VirtualizeUtils.keyExtractor)(item, index);
      if (key === String(index)) {
        _usedIndexForKey = true;
        if (item.type && item.type.displayName) {
          _keylessItemComponentName = item.type.displayName;
        }
      }
      return key;
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;
      if (__DEV__) {
        var flatStyles = flattenStyle(this.props.contentContainerStyle);
        if (flatStyles != null && flatStyles.flexWrap === 'wrap') {
          console.warn('`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');
        }
      }
      var _this$props8 = this.props,
        ListEmptyComponent = _this$props8.ListEmptyComponent,
        ListFooterComponent = _this$props8.ListFooterComponent,
        ListHeaderComponent = _this$props8.ListHeaderComponent;
      var _this$props9 = this.props,
        data = _this$props9.data,
        horizontal = _this$props9.horizontal;
      var isVirtualizationDisabled = this._isVirtualizationDisabled();
      var inversionStyle = this.props.inverted ? horizontalOrDefault(this.props.horizontal) ? styles.horizontallyInverted : styles.verticallyInverted : null;
      var cells = [];
      var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);
      var stickyHeaderIndices = [];
      if (ListHeaderComponent) {
        if (stickyIndicesFromProps.has(0)) {
          stickyHeaderIndices.push(0);
        }
        var element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : (0, _jsxRuntime.jsx)(ListHeaderComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getCellKey() + '-header',
          children: (0, _jsxRuntime.jsx)(View, {
            onLayout: this._onLayoutHeader,
            style: StyleSheet.compose(inversionStyle, this.props.ListHeaderComponentStyle),
            children: element
          })
        }, "$header"));
      }
      var itemCount = this.props.getItemCount(data);
      if (itemCount > 0) {
        _usedIndexForKey = false;
        _keylessItemComponentName = '';
        var spacerKey = this._getSpacerKey(!horizontal);
        var lastInitialIndex = this.props.initialScrollIndex ? -1 : initialNumToRenderOrDefault(this.props.initialNumToRender) - 1;
        var _this$state = this.state,
          first = _this$state.first,
          last = _this$state.last;
        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, 0, lastInitialIndex, inversionStyle);
        var firstAfterInitial = Math.max(lastInitialIndex + 1, first);
        if (!isVirtualizationDisabled && first > lastInitialIndex + 1) {
          var insertedStickySpacer = false;
          if (stickyIndicesFromProps.size > 0) {
            var stickyOffset = ListHeaderComponent ? 1 : 0;
            for (var ii = firstAfterInitial - 1; ii > lastInitialIndex; ii--) {
              if (stickyIndicesFromProps.has(ii + stickyOffset)) {
                var initBlock = this.__getFrameMetricsApprox(lastInitialIndex);
                var stickyBlock = this.__getFrameMetricsApprox(ii);
                var leadSpace = stickyBlock.offset - initBlock.offset - (this.props.initialScrollIndex ? 0 : initBlock.length);
                cells.push((0, _jsxRuntime.jsx)(View, {
                  style: (0, _defineProperty2.default)({}, spacerKey, leadSpace)
                }, "$sticky_lead"));
                this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, ii, ii, inversionStyle);
                var trailSpace = this.__getFrameMetricsApprox(first).offset - (stickyBlock.offset + stickyBlock.length);
                cells.push((0, _jsxRuntime.jsx)(View, {
                  style: (0, _defineProperty2.default)({}, spacerKey, trailSpace)
                }, "$sticky_trail"));
                insertedStickySpacer = true;
                break;
              }
            }
          }
          if (!insertedStickySpacer) {
            var _initBlock = this.__getFrameMetricsApprox(lastInitialIndex);
            var firstSpace = this.__getFrameMetricsApprox(first).offset - (_initBlock.offset + _initBlock.length);
            cells.push((0, _jsxRuntime.jsx)(View, {
              style: (0, _defineProperty2.default)({}, spacerKey, firstSpace)
            }, "$lead_spacer"));
          }
        }
        this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, firstAfterInitial, last, inversionStyle);
        if (!this._hasWarned.keys && _usedIndexForKey) {
          console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);
          this._hasWarned.keys = true;
        }
        if (!isVirtualizationDisabled && last < itemCount - 1) {
          var lastFrame = this.__getFrameMetricsApprox(last);
          var end = this.props.getItemLayout ? itemCount - 1 : Math.min(itemCount - 1, this._highestMeasuredFrameIndex);
          var endFrame = this.__getFrameMetricsApprox(end);
          var tailSpacerLength = endFrame.offset + endFrame.length - (lastFrame.offset + lastFrame.length);
          cells.push((0, _jsxRuntime.jsx)(View, {
            style: (0, _defineProperty2.default)({}, spacerKey, tailSpacerLength)
          }, "$tail_spacer"));
        }
      } else if (ListEmptyComponent) {
        var _element = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : (0, _jsxRuntime.jsx)(ListEmptyComponent, {});
        cells.push(React.cloneElement(_element, {
          key: '$empty',
          onLayout: function onLayout(event) {
            _this3._onLayoutEmpty(event);
            if (_element.props.onLayout) {
              _element.props.onLayout(event);
            }
          },
          style: StyleSheet.compose(inversionStyle, _element.props.style)
        }));
      }
      if (ListFooterComponent) {
        var _element2 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : (0, _jsxRuntime.jsx)(ListFooterComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getFooterCellKey(),
          children: (0, _jsxRuntime.jsx)(View, {
            onLayout: this._onLayoutFooter,
            style: StyleSheet.compose(inversionStyle, this.props.ListFooterComponentStyle),
            children: _element2
          })
        }, "$footer"));
      }
      var scrollProps = Object.assign({}, this.props, {
        onContentSizeChange: this._onContentSizeChange,
        onLayout: this._onLayout,
        onScroll: this._onScroll,
        onScrollBeginDrag: this._onScrollBeginDrag,
        onScrollEndDrag: this._onScrollEndDrag,
        onMomentumScrollBegin: this._onMomentumScrollBegin,
        onMomentumScrollEnd: this._onMomentumScrollEnd,
        scrollEventThrottle: scrollEventThrottleOrDefault(this.props.scrollEventThrottle),
        invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,
        stickyHeaderIndices: stickyHeaderIndices,
        style: inversionStyle ? [inversionStyle, this.props.style] : this.props.style
      });
      this._hasMore = this.state.last < this.props.getItemCount(this.props.data) - 1;
      var innerRet = (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListContextProvider, {
        value: {
          cellKey: null,
          getScrollMetrics: this._getScrollMetrics,
          horizontal: horizontalOrDefault(this.props.horizontal),
          getOutermostParentListRef: this._getOutermostParentListRef,
          getNestedChildState: this._getNestedChildState,
          registerAsNestedChild: this._registerAsNestedChild,
          unregisterAsNestedChild: this._unregisterAsNestedChild,
          debugInfo: this._getDebugInfo()
        },
        children: React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {
          ref: this._captureScrollRef
        }, cells)
      });
      var ret = innerRet;
      if (__DEV__) {
        ret = (0, _jsxRuntime.jsx)(ScrollView.Context.Consumer, {
          children: function children(scrollContext) {
            if (scrollContext != null && !scrollContext.horizontal === !horizontalOrDefault(_this3.props.horizontal) && !_this3._hasWarned.nesting && _this3.context == null) {
              console.error('VirtualizedLists should never be nested inside plain ScrollViews with the same ' + 'orientation because it can break windowing and other functionality - use another ' + 'VirtualizedList-backed container instead.');
              _this3._hasWarned.nesting = true;
            }
            return innerRet;
          }
        });
      }
      if (this.props.debug) {
        return (0, _jsxRuntime.jsxs)(View, {
          style: styles.debug,
          children: [ret, this._renderDebugOverlay()]
        });
      } else {
        return ret;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props10 = this.props,
        data = _this$props10.data,
        extraData = _this$props10.extraData;
      if (data !== prevProps.data || extraData !== prevProps.extraData) {
        this._viewabilityTuples.forEach(function (tuple) {
          tuple.viewabilityHelper.resetViewableIndices();
        });
      }
      var hiPriInProgress = this._hiPriInProgress;
      this._scheduleCellsToRenderUpdate();
      if (hiPriInProgress) {
        this._hiPriInProgress = false;
      }
    }
  }, {
    key: "_computeBlankness",
    value: function _computeBlankness() {
      this._fillRateHelper.computeBlankness(this.props, this.state, this._scrollMetrics);
    }
  }, {
    key: "_triggerRemeasureForChildListsInCell",
    value: function _triggerRemeasureForChildListsInCell(cellKey) {
      var childListKeys = this._cellKeysToChildListKeys.get(cellKey);
      if (childListKeys) {
        for (var childKey of childListKeys) {
          var childList = this._nestedChildLists.get(childKey);
          childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
        }
      }
    }
  }, {
    key: "measureLayoutRelativeToContainingList",
    value: function measureLayoutRelativeToContainingList() {
      var _this4 = this;
      try {
        if (!this._scrollRef) {
          return;
        }
        this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(), function (x, y, width, height) {
          _this4._offsetFromParentVirtualizedList = _this4._selectOffset({
            x: x,
            y: y
          });
          _this4._scrollMetrics.contentLength = _this4._selectLength({
            width: width,
            height: height
          });
          var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.getScrollMetrics());
          var metricsChanged = _this4._scrollMetrics.visibleLength !== scrollMetrics.visibleLength || _this4._scrollMetrics.offset !== scrollMetrics.offset;
          if (metricsChanged) {
            _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;
            _this4._scrollMetrics.offset = scrollMetrics.offset;
            _this4._cellKeysToChildListKeys.forEach(function (childListKeys) {
              if (childListKeys) {
                for (var childKey of childListKeys) {
                  var childList = _this4._nestedChildLists.get(childKey);
                  childList && childList.ref && childList.ref.measureLayoutRelativeToContainingList();
                }
              }
            });
          }
        }, function (error) {
          console.warn("VirtualizedList: Encountered an error while measuring a list's" + ' offset from its containing VirtualizedList.');
        });
      } catch (error) {
        console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);
      }
    }
  }, {
    key: "_getFooterCellKey",
    value: function _getFooterCellKey() {
      return this._getCellKey() + '-footer';
    }
  }, {
    key: "_renderDebugOverlay",
    value: function _renderDebugOverlay() {
      var normalize = this._scrollMetrics.visibleLength / (this._scrollMetrics.contentLength || 1);
      var framesInLayout = [];
      var itemCount = this.props.getItemCount(this.props.data);
      for (var ii = 0; ii < itemCount; ii++) {
        var frame = this.__getFrameMetricsApprox(ii);
        if (frame.inLayout) {
          framesInLayout.push(frame);
        }
      }
      var windowTop = this.__getFrameMetricsApprox(this.state.first).offset;
      var frameLast = this.__getFrameMetricsApprox(this.state.last);
      var windowLen = frameLast.offset + frameLast.length - windowTop;
      var visTop = this._scrollMetrics.offset;
      var visLen = this._scrollMetrics.visibleLength;
      return (0, _jsxRuntime.jsxs)(View, {
        style: [styles.debugOverlayBase, styles.debugOverlay],
        children: [framesInLayout.map(function (f, ii) {
          return (0, _jsxRuntime.jsx)(View, {
            style: [styles.debugOverlayBase, styles.debugOverlayFrame, {
              top: f.offset * normalize,
              height: f.length * normalize
            }]
          }, 'f' + ii);
        }), (0, _jsxRuntime.jsx)(View, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameLast, {
            top: windowTop * normalize,
            height: windowLen * normalize
          }]
        }), (0, _jsxRuntime.jsx)(View, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameVis, {
            top: visTop * normalize,
            height: visLen * normalize
          }]
        })]
      });
    }
  }, {
    key: "_selectLength",
    value: function _selectLength(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.height : metrics.width;
    }
  }, {
    key: "_selectOffset",
    value: function _selectOffset(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.y : metrics.x;
    }
  }, {
    key: "_maybeCallOnEndReached",
    value: function _maybeCallOnEndReached() {
      var _this$props11 = this.props,
        data = _this$props11.data,
        getItemCount = _this$props11.getItemCount,
        onEndReached = _this$props11.onEndReached,
        onEndReachedThreshold = _this$props11.onEndReachedThreshold;
      var _this$_scrollMetrics2 = this._scrollMetrics,
        contentLength = _this$_scrollMetrics2.contentLength,
        visibleLength = _this$_scrollMetrics2.visibleLength,
        offset = _this$_scrollMetrics2.offset;
      var distanceFromEnd = contentLength - visibleLength - offset;
      if (distanceFromEnd < ON_END_REACHED_EPSILON) {
        distanceFromEnd = 0;
      }
      var threshold = onEndReachedThreshold != null ? onEndReachedThreshold * visibleLength : 2;
      if (onEndReached && this.state.last === getItemCount(data) - 1 && distanceFromEnd <= threshold && this._scrollMetrics.contentLength !== this._sentEndForContentLength) {
        this._sentEndForContentLength = this._scrollMetrics.contentLength;
        onEndReached({
          distanceFromEnd: distanceFromEnd
        });
      } else if (distanceFromEnd > threshold) {
        this._sentEndForContentLength = 0;
      }
    }
  }, {
    key: "_scheduleCellsToRenderUpdate",
    value: function _scheduleCellsToRenderUpdate() {
      var _this$state2 = this.state,
        first = _this$state2.first,
        last = _this$state2.last;
      var _this$_scrollMetrics3 = this._scrollMetrics,
        offset = _this$_scrollMetrics3.offset,
        visibleLength = _this$_scrollMetrics3.visibleLength,
        velocity = _this$_scrollMetrics3.velocity;
      var itemCount = this.props.getItemCount(this.props.data);
      var hiPri = false;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(this.props.onEndReachedThreshold);
      var scrollingThreshold = onEndReachedThreshold * visibleLength / 2;
      if (first > 0) {
        var distTop = offset - this.__getFrameMetricsApprox(first).offset;
        hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;
      }
      if (last < itemCount - 1) {
        var distBottom = this.__getFrameMetricsApprox(last).offset - (offset + visibleLength);
        hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;
      }
      if (hiPri && (this._averageCellLength || this.props.getItemLayout) && !this._hiPriInProgress) {
        this._hiPriInProgress = true;
        this._updateCellsToRenderBatcher.dispose({
          abort: true
        });
        this._updateCellsToRender();
        return;
      } else {
        this._updateCellsToRenderBatcher.schedule();
      }
    }
  }, {
    key: "_updateViewableItems",
    value: function _updateViewableItems(data) {
      var _this5 = this;
      var getItemCount = this.props.getItemCount;
      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.onUpdate(getItemCount(data), _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, _this5.state);
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(newProps, prevState) {
      var data = newProps.data,
        getItemCount = newProps.getItemCount;
      var maxToRenderPerBatch = maxToRenderPerBatchOrDefault(newProps.maxToRenderPerBatch);
      return {
        first: Math.max(0, Math.min(prevState.first, getItemCount(data) - 1 - maxToRenderPerBatch)),
        last: Math.max(0, Math.min(prevState.last, getItemCount(data) - 1))
      };
    }
  }]);
  return VirtualizedList;
}(React.PureComponent);
VirtualizedList.contextType = _VirtualizedListContext.VirtualizedListContext;
var CellRenderer = function (_React$Component) {
  (0, _inherits2.default)(CellRenderer, _React$Component);
  var _super2 = _createSuper(CellRenderer);
  function CellRenderer() {
    var _this6;
    (0, _classCallCheck2.default)(this, CellRenderer);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this6 = _super2.call.apply(_super2, [this].concat(args));
    _this6.state = {
      separatorProps: {
        highlighted: false,
        leadingItem: _this6.props.item
      }
    };
    _this6._separators = {
      highlight: function highlight() {
        var _this6$props = _this6.props,
          cellKey = _this6$props.cellKey,
          prevCellKey = _this6$props.prevCellKey;
        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: true
        });
      },
      unhighlight: function unhighlight() {
        var _this6$props2 = _this6.props,
          cellKey = _this6$props2.cellKey,
          prevCellKey = _this6$props2.prevCellKey;
        _this6.props.onUpdateSeparators([cellKey, prevCellKey], {
          highlighted: false
        });
      },
      updateProps: function updateProps(select, newProps) {
        var _this6$props3 = _this6.props,
          cellKey = _this6$props3.cellKey,
          prevCellKey = _this6$props3.prevCellKey;
        _this6.props.onUpdateSeparators([select === 'leading' ? prevCellKey : cellKey], newProps);
      }
    };
    _this6._onLayout = function (nativeEvent) {
      _this6.props.onCellLayout && _this6.props.onCellLayout(nativeEvent, _this6.props.cellKey, _this6.props.index);
    };
    return _this6;
  }
  (0, _createClass2.default)(CellRenderer, [{
    key: "updateSeparatorProps",
    value: function updateSeparatorProps(newProps) {
      this.setState(function (state) {
        return {
          separatorProps: Object.assign({}, state.separatorProps, newProps)
        };
      });
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      this.props.onUnmount(this.props.cellKey);
    }
  }, {
    key: "_renderElement",
    value: function _renderElement(renderItem, ListItemComponent, item, index) {
      if (renderItem && ListItemComponent) {
        console.warn('VirtualizedList: Both ListItemComponent and renderItem props are present. ListItemComponent will take' + ' precedence over renderItem.');
      }
      if (ListItemComponent) {
        return React.createElement(ListItemComponent, {
          item: item,
          index: index,
          separators: this._separators
        });
      }
      if (renderItem) {
        return renderItem({
          item: item,
          index: index,
          separators: this._separators
        });
      }
      invariant(false, 'VirtualizedList: Either ListItemComponent or renderItem props are required but none were found.');
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props12 = this.props,
        CellRendererComponent = _this$props12.CellRendererComponent,
        ItemSeparatorComponent = _this$props12.ItemSeparatorComponent,
        ListItemComponent = _this$props12.ListItemComponent,
        debug = _this$props12.debug,
        fillRateHelper = _this$props12.fillRateHelper,
        getItemLayout = _this$props12.getItemLayout,
        horizontal = _this$props12.horizontal,
        item = _this$props12.item,
        index = _this$props12.index,
        inversionStyle = _this$props12.inversionStyle,
        renderItem = _this$props12.renderItem;
      var element = this._renderElement(renderItem, ListItemComponent, item, index);
      var onLayout = getItemLayout && !debug && !fillRateHelper.enabled() || !this.props.onCellLayout ? undefined : this._onLayout;
      var itemSeparator = React.isValidElement(ItemSeparatorComponent) ? ItemSeparatorComponent : ItemSeparatorComponent && (0, _jsxRuntime.jsx)(ItemSeparatorComponent, Object.assign({}, this.state.separatorProps));
      var cellStyle = inversionStyle ? horizontal ? [styles.rowReverse, inversionStyle] : [styles.columnReverse, inversionStyle] : horizontal ? [styles.row, inversionStyle] : inversionStyle;
      var result = !CellRendererComponent ? (0, _jsxRuntime.jsxs)(View, {
        style: cellStyle,
        onLayout: onLayout,
        children: [element, itemSeparator]
      }) : (0, _jsxRuntime.jsxs)(CellRendererComponent, Object.assign({}, this.props, {
        style: cellStyle,
        onLayout: onLayout,
        children: [element, itemSeparator]
      }));
      return (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
        cellKey: this.props.cellKey,
        children: result
      });
    }
  }], [{
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(props, prevState) {
      return {
        separatorProps: Object.assign({}, prevState.separatorProps, {
          leadingItem: props.item
        })
      };
    }
  }]);
  return CellRenderer;
}(React.Component);
function describeNestedLists(childList) {
  var trace = 'VirtualizedList trace:\n' + ("  Child (" + (childList.horizontal ? 'horizontal' : 'vertical') + "):\n") + ("    listKey: " + childList.key + "\n") + ("    cellKey: " + childList.cellKey);
  var debugInfo = childList.parentDebugInfo;
  while (debugInfo) {
    trace += "\n  Parent (" + (debugInfo.horizontal ? 'horizontal' : 'vertical') + "):\n" + ("    listKey: " + debugInfo.listKey + "\n") + ("    cellKey: " + debugInfo.cellKey);
    debugInfo = debugInfo.parent;
  }
  return trace;
}
var styles = StyleSheet.create({
  verticallyInverted: {
    transform: [{
      scaleY: -1
    }]
  },
  horizontallyInverted: {
    transform: [{
      scaleX: -1
    }]
  },
  row: {
    flexDirection: 'row'
  },
  rowReverse: {
    flexDirection: 'row-reverse'
  },
  columnReverse: {
    flexDirection: 'column-reverse'
  },
  debug: {
    flex: 1
  },
  debugOverlayBase: {
    position: 'absolute',
    top: 0,
    right: 0
  },
  debugOverlay: {
    bottom: 0,
    width: 20,
    borderColor: 'blue',
    borderWidth: 1
  },
  debugOverlayFrame: {
    left: 0,
    backgroundColor: 'orange'
  },
  debugOverlayFrameLast: {
    left: 0,
    borderColor: 'green',
    borderWidth: 2
  },
  debugOverlayFrameVis: {
    left: 0,
    borderColor: 'red',
    borderWidth: 2
  }
});
module.exports = VirtualizedList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWZyZXNoQ29udHJvbCIsInJlcXVpcmUiLCJTY3JvbGxWaWV3IiwiVmlldyIsIkJhdGNoaW5hdG9yIiwiUmVhY3ROYXRpdmUiLCJmbGF0dGVuU3R5bGUiLCJTdHlsZVNoZWV0IiwiaW5mb0xvZyIsIkZpbGxSYXRlSGVscGVyIiwiVmlld2FiaWxpdHlIZWxwZXIiLCJpbnZhcmlhbnQiLCJPTl9FTkRfUkVBQ0hFRF9FUFNJTE9OIiwiX3VzZWRJbmRleEZvcktleSIsIl9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUiLCJob3Jpem9udGFsT3JEZWZhdWx0IiwiaG9yaXpvbnRhbCIsImluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCIsImluaXRpYWxOdW1Ub1JlbmRlciIsIm1heFRvUmVuZGVyUGVyQmF0Y2hPckRlZmF1bHQiLCJtYXhUb1JlbmRlclBlckJhdGNoIiwib25FbmRSZWFjaGVkVGhyZXNob2xkT3JEZWZhdWx0Iiwib25FbmRSZWFjaGVkVGhyZXNob2xkIiwic2Nyb2xsRXZlbnRUaHJvdHRsZU9yRGVmYXVsdCIsInNjcm9sbEV2ZW50VGhyb3R0bGUiLCJ3aW5kb3dTaXplT3JEZWZhdWx0Iiwid2luZG93U2l6ZSIsIlZpcnR1YWxpemVkTGlzdCIsInByb3BzIiwiX2dldFNjcm9sbE1ldHJpY3MiLCJfc2Nyb2xsTWV0cmljcyIsIl9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmIiwiX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbiIsImNvbnRleHQiLCJnZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmIiwiX2dldE5lc3RlZENoaWxkU3RhdGUiLCJrZXkiLCJleGlzdGluZ0NoaWxkRGF0YSIsIl9uZXN0ZWRDaGlsZExpc3RzIiwiZ2V0Iiwic3RhdGUiLCJfcmVnaXN0ZXJBc05lc3RlZENoaWxkIiwiY2hpbGRMaXN0IiwiY2hpbGRMaXN0c0luQ2VsbCIsIl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cyIsImNlbGxLZXkiLCJTZXQiLCJhZGQiLCJzZXQiLCJyZWYiLCJjb25zb2xlIiwiZXJyb3IiLCJkZXNjcmliZU5lc3RlZExpc3RzIiwiX2hhc0ludGVyYWN0ZWQiLCJyZWNvcmRJbnRlcmFjdGlvbiIsIl91bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCIsIl9vblVwZGF0ZVNlcGFyYXRvcnMiLCJrZXlzIiwibmV3UHJvcHMiLCJmb3JFYWNoIiwiX2NlbGxSZWZzIiwidXBkYXRlU2VwYXJhdG9yUHJvcHMiLCJfZ2V0U3BhY2VyS2V5IiwiaXNWZXJ0aWNhbCIsIl9hdmVyYWdlQ2VsbExlbmd0aCIsIk1hcCIsIl9mcmFtZXMiLCJfZm9vdGVyTGVuZ3RoIiwiX2hhc1RyaWdnZXJlZEluaXRpYWxTY3JvbGxUb0luZGV4IiwiX2hhc01vcmUiLCJfaGFzV2FybmVkIiwiX2hlYWRlckxlbmd0aCIsIl9oaVByaUluUHJvZ3Jlc3MiLCJfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsIl9pbmRpY2VzVG9LZXlzIiwiX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3QiLCJfcHJldlBhcmVudE9mZnNldCIsImNvbnRlbnRMZW5ndGgiLCJkT2Zmc2V0IiwiZHQiLCJvZmZzZXQiLCJ0aW1lc3RhbXAiLCJ2ZWxvY2l0eSIsInZpc2libGVMZW5ndGgiLCJ6b29tU2NhbGUiLCJfc2Nyb2xsUmVmIiwiX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoIiwiX3RvdGFsQ2VsbExlbmd0aCIsIl90b3RhbENlbGxzTWVhc3VyZWQiLCJfdmlld2FiaWxpdHlUdXBsZXMiLCJfY2FwdHVyZVNjcm9sbFJlZiIsIl9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50Iiwib25SZWZyZXNoIiwicmVmcmVzaGluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJyZWZyZXNoQ29udHJvbCIsInByb2dyZXNzVmlld09mZnNldCIsIl9vbkNlbGxMYXlvdXQiLCJlIiwiaW5kZXgiLCJsYXlvdXQiLCJuYXRpdmVFdmVudCIsIm5leHQiLCJfc2VsZWN0T2Zmc2V0IiwibGVuZ3RoIiwiX3NlbGVjdExlbmd0aCIsImluTGF5b3V0IiwiY3VyciIsIk1hdGgiLCJtYXgiLCJfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlIiwiX3RyaWdnZXJSZW1lYXN1cmVGb3JDaGlsZExpc3RzSW5DZWxsIiwiX2NvbXB1dGVCbGFua25lc3MiLCJfdXBkYXRlVmlld2FibGVJdGVtcyIsImRhdGEiLCJfb25DZWxsVW5tb3VudCIsIl9vbkxheW91dCIsIm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QiLCJvbkxheW91dCIsIl9tYXliZUNhbGxPbkVuZFJlYWNoZWQiLCJfb25MYXlvdXRFbXB0eSIsIl9vbkxheW91dEZvb3RlciIsIl9nZXRGb290ZXJDZWxsS2V5IiwiX29uTGF5b3V0SGVhZGVyIiwiX29uQ29udGVudFNpemVDaGFuZ2UiLCJ3aWR0aCIsImhlaWdodCIsImluaXRpYWxTY3JvbGxJbmRleCIsImNvbnRlbnRPZmZzZXQiLCJzY3JvbGxUb0luZGV4IiwiYW5pbWF0ZWQiLCJvbkNvbnRlbnRTaXplQ2hhbmdlIiwiX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzIiwibWV0cmljcyIsIl9vblNjcm9sbCIsIm9uU2Nyb2xsIiwidGltZVN0YW1wIiwibGF5b3V0TWVhc3VyZW1lbnQiLCJjb250ZW50U2l6ZSIsInBlcmYiLCJwcmV2RHQiLCJfZmlsbFJhdGVIZWxwZXIiLCJhY3RpdmF0ZSIsIl9vblNjcm9sbEJlZ2luRHJhZyIsInR1cGxlIiwidmlld2FiaWxpdHlIZWxwZXIiLCJvblNjcm9sbEJlZ2luRHJhZyIsIl9vblNjcm9sbEVuZERyYWciLCJvblNjcm9sbEVuZERyYWciLCJfb25Nb21lbnR1bVNjcm9sbEJlZ2luIiwib25Nb21lbnR1bVNjcm9sbEJlZ2luIiwiX29uTW9tZW50dW1TY3JvbGxFbmQiLCJvbk1vbWVudHVtU2Nyb2xsRW5kIiwiX3VwZGF0ZUNlbGxzVG9SZW5kZXIiLCJnZXRJdGVtQ291bnQiLCJfb25FbmRSZWFjaGVkVGhyZXNob2xkIiwiaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkIiwiX2lzVmlydHVhbGl6YXRpb25EaXNhYmxlZCIsInNldFN0YXRlIiwibmV3U3RhdGUiLCJkaXN0YW5jZUZyb21FbmQiLCJhYnMiLCJOdW1iZXIiLCJFUFNJTE9OIiwiY29tcHV0ZVdpbmRvd2VkUmVuZGVyTGltaXRzIiwiX19nZXRGcmFtZU1ldHJpY3NBcHByb3giLCJyZW5kZXJBaGVhZCIsImZpcnN0IiwibGFzdCIsIm1pbiIsInNpemUiLCJuZXdGaXJzdCIsIm5ld0xhc3QiLCJpaSIsImNlbGxLZXlGb3JJbmRleCIsImNoaWxkTGlzdEtleXMiLCJzb21lQ2hpbGRIYXNNb3JlIiwiY2hpbGRLZXkiLCJoYXNNb3JlIiwiX2NyZWF0ZVZpZXdUb2tlbiIsImlzVmlld2FibGUiLCJnZXRJdGVtIiwiaXRlbSIsIl9rZXlFeHRyYWN0b3IiLCJmcmFtZSIsIl9nZXRGcmFtZU1ldHJpY3MiLCJnZXRJdGVtTGF5b3V0IiwiX19pc05hdGl2ZSIsIl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlciIsInVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2QiLCJ2aWV3YWJpbGl0eUNvbmZpZ0NhbGxiYWNrUGFpcnMiLCJtYXAiLCJwYWlyIiwidmlld2FiaWxpdHlDb25maWciLCJvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwicHVzaCIsImluaXRpYWxTdGF0ZSIsInN0b3JlZFN0YXRlIiwiZ2V0TmVzdGVkQ2hpbGRTdGF0ZSIsIl9nZXRMaXN0S2V5IiwiZnJhbWVzIiwicGFyYW1zIiwidmVyeUxhc3QiLCJzY3JvbGxUbyIsIndhcm4iLCJ4IiwieSIsIm9uU2Nyb2xsVG9JbmRleEZhaWxlZCIsInZpZXdPZmZzZXQiLCJ2aWV3UG9zaXRpb24iLCJhdmVyYWdlSXRlbUxlbmd0aCIsImhpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgiLCJpdGVtQ291bnQiLCJ0IiwiZmxhc2hTY3JvbGxJbmRpY2F0b3JzIiwiZ2V0U2Nyb2xsUmVzcG9uZGVyIiwiZ2V0U2Nyb2xsYWJsZU5vZGUiLCJmaW5kTm9kZUhhbmRsZSIsImdldFNjcm9sbFJlZiIsInNldE5hdGl2ZVByb3BzIiwibGlzdEtleSIsIl9nZXRDZWxsS2V5IiwicGFyZW50IiwiZGVidWdJbmZvIiwicmVnaXN0ZXJBc05lc3RlZENoaWxkIiwicGFyZW50RGVidWdJbmZvIiwidW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJkaXNwb3NlIiwiYWJvcnQiLCJkZWFjdGl2YXRlQW5kRmx1c2giLCJjZWxscyIsInN0aWNreUhlYWRlckluZGljZXMiLCJzdGlja3lJbmRpY2VzRnJvbVByb3BzIiwiaW52ZXJzaW9uU3R5bGUiLCJDZWxsUmVuZGVyZXJDb21wb25lbnQiLCJJdGVtU2VwYXJhdG9yQ29tcG9uZW50IiwiTGlzdEhlYWRlckNvbXBvbmVudCIsIkxpc3RJdGVtQ29tcG9uZW50IiwiZGVidWciLCJyZW5kZXJJdGVtIiwic3RpY2t5T2Zmc2V0IiwiZW5kIiwicHJldkNlbGxLZXkiLCJoYXMiLCJ1bmRlZmluZWQiLCJkaXNhYmxlVmlydHVhbGl6YXRpb24iLCJuZXN0ZWRDb250ZXh0Iiwia2V5RXh0cmFjdG9yIiwiZGVmYXVsdEtleUV4dHJhY3RvciIsIlN0cmluZyIsInR5cGUiLCJkaXNwbGF5TmFtZSIsIl9fREVWX18iLCJmbGF0U3R5bGVzIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwiZmxleFdyYXAiLCJMaXN0RW1wdHlDb21wb25lbnQiLCJMaXN0Rm9vdGVyQ29tcG9uZW50IiwiaW52ZXJ0ZWQiLCJzdHlsZXMiLCJob3Jpem9udGFsbHlJbnZlcnRlZCIsInZlcnRpY2FsbHlJbnZlcnRlZCIsImVsZW1lbnQiLCJSZWFjdCIsImlzVmFsaWRFbGVtZW50IiwiY29tcG9zZSIsIkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSIsInNwYWNlcktleSIsImxhc3RJbml0aWFsSW5kZXgiLCJfcHVzaENlbGxzIiwiZmlyc3RBZnRlckluaXRpYWwiLCJpbnNlcnRlZFN0aWNreVNwYWNlciIsImluaXRCbG9jayIsInN0aWNreUJsb2NrIiwibGVhZFNwYWNlIiwidHJhaWxTcGFjZSIsImZpcnN0U3BhY2UiLCJsYXN0RnJhbWUiLCJlbmRGcmFtZSIsInRhaWxTcGFjZXJMZW5ndGgiLCJjbG9uZUVsZW1lbnQiLCJldmVudCIsInN0eWxlIiwiTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlIiwic2Nyb2xsUHJvcHMiLCJpbnZlcnRTdGlja3lIZWFkZXJzIiwiaW5uZXJSZXQiLCJnZXRTY3JvbGxNZXRyaWNzIiwiX2dldERlYnVnSW5mbyIsInJlbmRlclNjcm9sbENvbXBvbmVudCIsInJldCIsInNjcm9sbENvbnRleHQiLCJuZXN0aW5nIiwiX3JlbmRlckRlYnVnT3ZlcmxheSIsInByZXZQcm9wcyIsImV4dHJhRGF0YSIsInJlc2V0Vmlld2FibGVJbmRpY2VzIiwiaGlQcmlJblByb2dyZXNzIiwiY29tcHV0ZUJsYW5rbmVzcyIsIm1lYXN1cmVMYXlvdXQiLCJzY3JvbGxNZXRyaWNzIiwibWV0cmljc0NoYW5nZWQiLCJzdGFjayIsIm5vcm1hbGl6ZSIsImZyYW1lc0luTGF5b3V0Iiwid2luZG93VG9wIiwiZnJhbWVMYXN0Iiwid2luZG93TGVuIiwidmlzVG9wIiwidmlzTGVuIiwiZGVidWdPdmVybGF5QmFzZSIsImRlYnVnT3ZlcmxheSIsImYiLCJkZWJ1Z092ZXJsYXlGcmFtZSIsInRvcCIsImRlYnVnT3ZlcmxheUZyYW1lTGFzdCIsImRlYnVnT3ZlcmxheUZyYW1lVmlzIiwib25FbmRSZWFjaGVkIiwidGhyZXNob2xkIiwiaGlQcmkiLCJzY3JvbGxpbmdUaHJlc2hvbGQiLCJkaXN0VG9wIiwiZGlzdEJvdHRvbSIsInNjaGVkdWxlIiwib25VcGRhdGUiLCJwcmV2U3RhdGUiLCJQdXJlQ29tcG9uZW50IiwiY29udGV4dFR5cGUiLCJWaXJ0dWFsaXplZExpc3RDb250ZXh0IiwiQ2VsbFJlbmRlcmVyIiwic2VwYXJhdG9yUHJvcHMiLCJoaWdobGlnaHRlZCIsImxlYWRpbmdJdGVtIiwiX3NlcGFyYXRvcnMiLCJoaWdobGlnaHQiLCJvblVwZGF0ZVNlcGFyYXRvcnMiLCJ1bmhpZ2hsaWdodCIsInVwZGF0ZVByb3BzIiwic2VsZWN0Iiwib25DZWxsTGF5b3V0Iiwib25Vbm1vdW50IiwiY3JlYXRlRWxlbWVudCIsInNlcGFyYXRvcnMiLCJmaWxsUmF0ZUhlbHBlciIsIl9yZW5kZXJFbGVtZW50IiwiZW5hYmxlZCIsIml0ZW1TZXBhcmF0b3IiLCJjZWxsU3R5bGUiLCJyb3dSZXZlcnNlIiwiY29sdW1uUmV2ZXJzZSIsInJvdyIsInJlc3VsdCIsIkNvbXBvbmVudCIsInRyYWNlIiwiY3JlYXRlIiwidHJhbnNmb3JtIiwic2NhbGVZIiwic2NhbGVYIiwiZmxleERpcmVjdGlvbiIsImZsZXgiLCJwb3NpdGlvbiIsInJpZ2h0IiwiYm90dG9tIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImxlZnQiLCJiYWNrZ3JvdW5kQ29sb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVmlydHVhbGl6ZWRMaXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvd1xuICogQGZvcm1hdFxuICovXG5cbmltcG9ydCB0eXBlIHtTY3JvbGxSZXNwb25kZXJUeXBlfSBmcm9tICcuLi9Db21wb25lbnRzL1Njcm9sbFZpZXcvU2Nyb2xsVmlldyc7XG5pbXBvcnQgdHlwZSB7Vmlld1N0eWxlUHJvcH0gZnJvbSAnLi4vU3R5bGVTaGVldC9TdHlsZVNoZWV0JztcbmltcG9ydCB0eXBlIHtMYXlvdXRFdmVudCwgU2Nyb2xsRXZlbnR9IGZyb20gJy4uL1R5cGVzL0NvcmVFdmVudFR5cGVzJztcbmltcG9ydCB0eXBlIHtcbiAgVmlld2FiaWxpdHlDb25maWcsXG4gIFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyLFxuICBWaWV3VG9rZW4sXG59IGZyb20gJy4vVmlld2FiaWxpdHlIZWxwZXInO1xuXG5pbXBvcnQge1xuICB0eXBlIENoaWxkTGlzdFN0YXRlLFxuICB0eXBlIExpc3REZWJ1Z0luZm8sXG4gIFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXIsXG4gIFZpcnR1YWxpemVkTGlzdENvbnRleHQsXG4gIFZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlcixcbn0gZnJvbSAnLi9WaXJ0dWFsaXplZExpc3RDb250ZXh0LmpzJztcbmltcG9ydCB7XG4gIGNvbXB1dGVXaW5kb3dlZFJlbmRlckxpbWl0cyxcbiAga2V5RXh0cmFjdG9yIGFzIGRlZmF1bHRLZXlFeHRyYWN0b3IsXG59IGZyb20gJy4vVmlydHVhbGl6ZVV0aWxzJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcblxuY29uc3QgUmVmcmVzaENvbnRyb2wgPSByZXF1aXJlKCcuLi9Db21wb25lbnRzL1JlZnJlc2hDb250cm9sL1JlZnJlc2hDb250cm9sJyk7XG5jb25zdCBTY3JvbGxWaWV3ID0gcmVxdWlyZSgnLi4vQ29tcG9uZW50cy9TY3JvbGxWaWV3L1Njcm9sbFZpZXcnKTtcbmNvbnN0IFZpZXcgPSByZXF1aXJlKCcuLi9Db21wb25lbnRzL1ZpZXcvVmlldycpO1xuY29uc3QgQmF0Y2hpbmF0b3IgPSByZXF1aXJlKCcuLi9JbnRlcmFjdGlvbi9CYXRjaGluYXRvcicpO1xuY29uc3QgUmVhY3ROYXRpdmUgPSByZXF1aXJlKCcuLi9SZW5kZXJlci9zaGltcy9SZWFjdE5hdGl2ZScpO1xuY29uc3QgZmxhdHRlblN0eWxlID0gcmVxdWlyZSgnLi4vU3R5bGVTaGVldC9mbGF0dGVuU3R5bGUnKTtcbmNvbnN0IFN0eWxlU2hlZXQgPSByZXF1aXJlKCcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnKTtcbmNvbnN0IGluZm9Mb2cgPSByZXF1aXJlKCcuLi9VdGlsaXRpZXMvaW5mb0xvZycpO1xuY29uc3QgRmlsbFJhdGVIZWxwZXIgPSByZXF1aXJlKCcuL0ZpbGxSYXRlSGVscGVyJyk7XG5jb25zdCBWaWV3YWJpbGl0eUhlbHBlciA9IHJlcXVpcmUoJy4vVmlld2FiaWxpdHlIZWxwZXInKTtcbmNvbnN0IGludmFyaWFudCA9IHJlcXVpcmUoJ2ludmFyaWFudCcpO1xuXG5jb25zdCBPTl9FTkRfUkVBQ0hFRF9FUFNJTE9OID0gMC4wMDE7XG5cbnR5cGUgSXRlbSA9IGFueTtcblxuZXhwb3J0IHR5cGUgU2VwYXJhdG9ycyA9IHtcbiAgaGlnaGxpZ2h0OiAoKSA9PiB2b2lkLFxuICB1bmhpZ2hsaWdodDogKCkgPT4gdm9pZCxcbiAgdXBkYXRlUHJvcHM6IChzZWxlY3Q6ICdsZWFkaW5nJyB8ICd0cmFpbGluZycsIG5ld1Byb3BzOiBPYmplY3QpID0+IHZvaWQsXG4gIC4uLlxufTtcblxuZXhwb3J0IHR5cGUgUmVuZGVySXRlbVByb3BzPEl0ZW1UPiA9IHtcbiAgaXRlbTogSXRlbVQsXG4gIGluZGV4OiBudW1iZXIsXG4gIHNlcGFyYXRvcnM6IFNlcGFyYXRvcnMsXG4gIC4uLlxufTtcblxuZXhwb3J0IHR5cGUgUmVuZGVySXRlbVR5cGU8SXRlbVQ+ID0gKFxuICBpbmZvOiBSZW5kZXJJdGVtUHJvcHM8SXRlbVQ+LFxuKSA9PiBSZWFjdC5Ob2RlO1xuXG50eXBlIFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZSA9IHtcbiAgdmlld2FiaWxpdHlIZWxwZXI6IFZpZXdhYmlsaXR5SGVscGVyLFxuICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiAoaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgICAuLi5cbiAgfSkgPT4gdm9pZCxcbiAgLi4uXG59O1xuXG50eXBlIFJlcXVpcmVkUHJvcHMgPSB7fFxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgYWNjZXNzb3IgZnVuY3Rpb25zIGFzc3VtZSB0aGlzIGlzIGFuIEFycmF5PHtrZXk6IHN0cmluZ30gfCB7aWQ6IHN0cmluZ30+IGJ1dCB5b3UgY2FuIG92ZXJyaWRlXG4gICAqIGdldEl0ZW0sIGdldEl0ZW1Db3VudCwgYW5kIGtleUV4dHJhY3RvciB0byBoYW5kbGUgYW55IHR5cGUgb2YgaW5kZXgtYmFzZWQgZGF0YS5cbiAgICovXG4gIGRhdGE/OiBhbnksXG4gIC8qKlxuICAgKiBBIGdlbmVyaWMgYWNjZXNzb3IgZm9yIGV4dHJhY3RpbmcgYW4gaXRlbSBmcm9tIGFueSBzb3J0IG9mIGRhdGEgYmxvYi5cbiAgICovXG4gIGdldEl0ZW06IChkYXRhOiBhbnksIGluZGV4OiBudW1iZXIpID0+ID9JdGVtLFxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBob3cgbWFueSBpdGVtcyBhcmUgaW4gdGhlIGRhdGEgYmxvYi5cbiAgICovXG4gIGdldEl0ZW1Db3VudDogKGRhdGE6IGFueSkgPT4gbnVtYmVyLFxufH07XG50eXBlIE9wdGlvbmFsUHJvcHMgPSB7fFxuICByZW5kZXJJdGVtPzogP1JlbmRlckl0ZW1UeXBlPEl0ZW0+LFxuICAvKipcbiAgICogYGRlYnVnYCB3aWxsIHR1cm4gb24gZXh0cmEgbG9nZ2luZyBhbmQgdmlzdWFsIG92ZXJsYXlzIHRvIGFpZCB3aXRoIGRlYnVnZ2luZyBib3RoIHVzYWdlIGFuZFxuICAgKiBpbXBsZW1lbnRhdGlvbiwgYnV0IHdpdGggYSBzaWduaWZpY2FudCBwZXJmIGhpdC5cbiAgICovXG4gIGRlYnVnPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBERVBSRUNBVEVEOiBWaXJ0dWFsaXphdGlvbiBwcm92aWRlcyBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5IG9wdGltaXphdGlvbnMsIGJ1dCBmdWxseVxuICAgKiB1bm1vdW50cyByZWFjdCBpbnN0YW5jZXMgdGhhdCBhcmUgb3V0c2lkZSBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gWW91IHNob3VsZCBvbmx5IG5lZWQgdG8gZGlzYWJsZVxuICAgKiB0aGlzIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKi9cbiAgZGlzYWJsZVZpcnR1YWxpemF0aW9uPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBBIG1hcmtlciBwcm9wZXJ0eSBmb3IgdGVsbGluZyB0aGUgbGlzdCB0byByZS1yZW5kZXIgKHNpbmNlIGl0IGltcGxlbWVudHMgYFB1cmVDb21wb25lbnRgKS4gSWZcbiAgICogYW55IG9mIHlvdXIgYHJlbmRlckl0ZW1gLCBIZWFkZXIsIEZvb3RlciwgZXRjLiBmdW5jdGlvbnMgZGVwZW5kIG9uIGFueXRoaW5nIG91dHNpZGUgb2YgdGhlXG4gICAqIGBkYXRhYCBwcm9wLCBzdGljayBpdCBoZXJlIGFuZCB0cmVhdCBpdCBpbW11dGFibHkuXG4gICAqL1xuICBleHRyYURhdGE/OiBhbnksXG4gIC8vIGUuZy4gaGVpZ2h0LCB5XG4gIGdldEl0ZW1MYXlvdXQ/OiAoXG4gICAgZGF0YTogYW55LFxuICAgIGluZGV4OiBudW1iZXIsXG4gICkgPT4ge1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgLi4uXG4gIH0sXG4gIGhvcml6b250YWw/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIEhvdyBtYW55IGl0ZW1zIHRvIHJlbmRlciBpbiB0aGUgaW5pdGlhbCBiYXRjaC4gVGhpcyBzaG91bGQgYmUgZW5vdWdoIHRvIGZpbGwgdGhlIHNjcmVlbiBidXQgbm90XG4gICAqIG11Y2ggbW9yZS4gTm90ZSB0aGVzZSBpdGVtcyB3aWxsIG5ldmVyIGJlIHVubW91bnRlZCBhcyBwYXJ0IG9mIHRoZSB3aW5kb3dlZCByZW5kZXJpbmcgaW4gb3JkZXJcbiAgICogdG8gaW1wcm92ZSBwZXJjZWl2ZWQgcGVyZm9ybWFuY2Ugb2Ygc2Nyb2xsLXRvLXRvcCBhY3Rpb25zLlxuICAgKi9cbiAgaW5pdGlhbE51bVRvUmVuZGVyPzogP251bWJlcixcbiAgLyoqXG4gICAqIEluc3RlYWQgb2Ygc3RhcnRpbmcgYXQgdGhlIHRvcCB3aXRoIHRoZSBmaXJzdCBpdGVtLCBzdGFydCBhdCBgaW5pdGlhbFNjcm9sbEluZGV4YC4gVGhpc1xuICAgKiBkaXNhYmxlcyB0aGUgXCJzY3JvbGwgdG8gdG9wXCIgb3B0aW1pemF0aW9uIHRoYXQga2VlcHMgdGhlIGZpcnN0IGBpbml0aWFsTnVtVG9SZW5kZXJgIGl0ZW1zXG4gICAqIGFsd2F5cyByZW5kZXJlZCBhbmQgaW1tZWRpYXRlbHkgcmVuZGVycyB0aGUgaXRlbXMgc3RhcnRpbmcgYXQgdGhpcyBpbml0aWFsIGluZGV4LiBSZXF1aXJlc1xuICAgKiBgZ2V0SXRlbUxheW91dGAgdG8gYmUgaW1wbGVtZW50ZWQuXG4gICAqL1xuICBpbml0aWFsU2Nyb2xsSW5kZXg/OiA/bnVtYmVyLFxuICAvKipcbiAgICogUmV2ZXJzZXMgdGhlIGRpcmVjdGlvbiBvZiBzY3JvbGwuIFVzZXMgc2NhbGUgdHJhbnNmb3JtcyBvZiAtMS5cbiAgICovXG4gIGludmVydGVkPzogP2Jvb2xlYW4sXG4gIGtleUV4dHJhY3Rvcj86ID8oaXRlbTogSXRlbSwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAvKipcbiAgICogRWFjaCBjZWxsIGlzIHJlbmRlcmVkIHVzaW5nIHRoaXMgZWxlbWVudC4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLFxuICAgKiBvciBhIHJlbmRlciBmdW5jdGlvbi4gRGVmYXVsdHMgdG8gdXNpbmcgVmlldy5cbiAgICovXG4gIENlbGxSZW5kZXJlckNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBpbiBiZXR3ZWVuIGVhY2ggaXRlbSwgYnV0IG5vdCBhdCB0aGUgdG9wIG9yIGJvdHRvbS4gQnkgZGVmYXVsdCwgYGhpZ2hsaWdodGVkYCBhbmRcbiAgICogYGxlYWRpbmdJdGVtYCBwcm9wcyBhcmUgcHJvdmlkZWQuIGByZW5kZXJJdGVtYCBwcm92aWRlcyBgc2VwYXJhdG9ycy5oaWdobGlnaHRgL2B1bmhpZ2hsaWdodGBcbiAgICogd2hpY2ggd2lsbCB1cGRhdGUgdGhlIGBoaWdobGlnaHRlZGAgcHJvcCwgYnV0IHlvdSBjYW4gYWxzbyBhZGQgY3VzdG9tIHByb3BzIHdpdGhcbiAgICogYHNlcGFyYXRvcnMudXBkYXRlUHJvcHNgLlxuICAgKi9cbiAgSXRlbVNlcGFyYXRvckNvbXBvbmVudD86ID9SZWFjdC5Db21wb25lbnRUeXBlPGFueT4sXG4gIC8qKlxuICAgKiBUYWtlcyBhbiBpdGVtIGZyb20gYGRhdGFgIGFuZCByZW5kZXJzIGl0IGludG8gdGhlIGxpc3QuIEV4YW1wbGUgdXNhZ2U6XG4gICAqXG4gICAqICAgICA8RmxhdExpc3RcbiAgICogICAgICAgSXRlbVNlcGFyYXRvckNvbXBvbmVudD17UGxhdGZvcm0uT1MgIT09ICdhbmRyb2lkJyAmJiAoe2hpZ2hsaWdodGVkfSkgPT4gKFxuICAgKiAgICAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGUuc2VwYXJhdG9yLCBoaWdobGlnaHRlZCAmJiB7bWFyZ2luTGVmdDogMH1dfSAvPlxuICAgKiAgICAgICApfVxuICAgKiAgICAgICBkYXRhPXtbe3RpdGxlOiAnVGl0bGUgVGV4dCcsIGtleTogJ2l0ZW0xJ31dfVxuICAgKiAgICAgICBMaXN0SXRlbUNvbXBvbmVudD17KHtpdGVtLCBzZXBhcmF0b3JzfSkgPT4gKFxuICAgKiAgICAgICAgIDxUb3VjaGFibGVIaWdobGlnaHRcbiAgICogICAgICAgICAgIG9uUHJlc3M9eygpID0+IHRoaXMuX29uUHJlc3MoaXRlbSl9XG4gICAqICAgICAgICAgICBvblNob3dVbmRlcmxheT17c2VwYXJhdG9ycy5oaWdobGlnaHR9XG4gICAqICAgICAgICAgICBvbkhpZGVVbmRlcmxheT17c2VwYXJhdG9ycy51bmhpZ2hsaWdodH0+XG4gICAqICAgICAgICAgICA8VmlldyBzdHlsZT17e2JhY2tncm91bmRDb2xvcjogJ3doaXRlJ319PlxuICAgKiAgICAgICAgICAgICA8VGV4dD57aXRlbS50aXRsZX08L1RleHQ+XG4gICAqICAgICAgICAgICA8L1ZpZXc+XG4gICAqICAgICAgICAgPC9Ub3VjaGFibGVIaWdobGlnaHQ+XG4gICAqICAgICAgICl9XG4gICAqICAgICAvPlxuICAgKlxuICAgKiBQcm92aWRlcyBhZGRpdGlvbmFsIG1ldGFkYXRhIGxpa2UgYGluZGV4YCBpZiB5b3UgbmVlZCBpdCwgYXMgd2VsbCBhcyBhIG1vcmUgZ2VuZXJpY1xuICAgKiBgc2VwYXJhdG9ycy51cGRhdGVQcm9wc2AgZnVuY3Rpb24gd2hpY2ggbGV0J3MgeW91IHNldCB3aGF0ZXZlciBwcm9wcyB5b3Ugd2FudCB0byBjaGFuZ2UgdGhlXG4gICAqIHJlbmRlcmluZyBvZiBlaXRoZXIgdGhlIGxlYWRpbmcgc2VwYXJhdG9yIG9yIHRyYWlsaW5nIHNlcGFyYXRvciBpbiBjYXNlIHRoZSBtb3JlIGNvbW1vblxuICAgKiBgaGlnaGxpZ2h0YCBhbmQgYHVuaGlnaGxpZ2h0YCAod2hpY2ggc2V0IHRoZSBgaGlnaGxpZ2h0ZWQ6IGJvb2xlYW5gIHByb3ApIGFyZSBpbnN1ZmZpY2llbnQgZm9yXG4gICAqIHlvdXIgdXNlLWNhc2UuXG4gICAqL1xuICBMaXN0SXRlbUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFJlbmRlcmVkIHdoZW4gdGhlIGxpc3QgaXMgZW1wdHkuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RFbXB0eUNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFJlbmRlcmVkIGF0IHRoZSBib3R0b20gb2YgYWxsIHRoZSBpdGVtcy4gQ2FuIGJlIGEgUmVhY3QgQ29tcG9uZW50IENsYXNzLCBhIHJlbmRlciBmdW5jdGlvbiwgb3JcbiAgICogYSByZW5kZXJlZCBlbGVtZW50LlxuICAgKi9cbiAgTGlzdEZvb3RlckNvbXBvbmVudD86ID8oUmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+IHwgUmVhY3QuRWxlbWVudDxhbnk+KSxcbiAgLyoqXG4gICAqIFN0eWxpbmcgZm9yIGludGVybmFsIFZpZXcgZm9yIExpc3RGb290ZXJDb21wb25lbnRcbiAgICovXG4gIExpc3RGb290ZXJDb21wb25lbnRTdHlsZT86IFZpZXdTdHlsZVByb3AsXG4gIC8qKlxuICAgKiBSZW5kZXJlZCBhdCB0aGUgdG9wIG9mIGFsbCB0aGUgaXRlbXMuIENhbiBiZSBhIFJlYWN0IENvbXBvbmVudCBDbGFzcywgYSByZW5kZXIgZnVuY3Rpb24sIG9yXG4gICAqIGEgcmVuZGVyZWQgZWxlbWVudC5cbiAgICovXG4gIExpc3RIZWFkZXJDb21wb25lbnQ/OiA/KFJlYWN0LkNvbXBvbmVudFR5cGU8YW55PiB8IFJlYWN0LkVsZW1lbnQ8YW55PiksXG4gIC8qKlxuICAgKiBTdHlsaW5nIGZvciBpbnRlcm5hbCBWaWV3IGZvciBMaXN0SGVhZGVyQ29tcG9uZW50XG4gICAqL1xuICBMaXN0SGVhZGVyQ29tcG9uZW50U3R5bGU/OiBWaWV3U3R5bGVQcm9wLFxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBsaXN0LiBJZiB0aGVyZSBhcmUgbXVsdGlwbGUgVmlydHVhbGl6ZWRMaXN0cyBhdCB0aGUgc2FtZSBsZXZlbCBvZlxuICAgKiBuZXN0aW5nIHdpdGhpbiBhbm90aGVyIFZpcnR1YWxpemVkTGlzdCwgdGhpcyBrZXkgaXMgbmVjZXNzYXJ5IGZvciB2aXJ0dWFsaXphdGlvbiB0b1xuICAgKiB3b3JrIHByb3Blcmx5LlxuICAgKi9cbiAgbGlzdEtleT86IHN0cmluZyxcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZW5kZXIgaW4gZWFjaCBpbmNyZW1lbnRhbCByZW5kZXIgYmF0Y2guIFRoZSBtb3JlIHJlbmRlcmVkIGF0XG4gICAqIG9uY2UsIHRoZSBiZXR0ZXIgdGhlIGZpbGwgcmF0ZSwgYnV0IHJlc3BvbnNpdmVuZXNzIG1heSBzdWZmZXIgYmVjYXVzZSByZW5kZXJpbmcgY29udGVudCBtYXlcbiAgICogaW50ZXJmZXJlIHdpdGggcmVzcG9uZGluZyB0byBidXR0b24gdGFwcyBvciBvdGhlciBpbnRlcmFjdGlvbnMuXG4gICAqL1xuICBtYXhUb1JlbmRlclBlckJhdGNoPzogP251bWJlcixcbiAgLyoqXG4gICAqIENhbGxlZCBvbmNlIHdoZW4gdGhlIHNjcm9sbCBwb3NpdGlvbiBnZXRzIHdpdGhpbiBgb25FbmRSZWFjaGVkVGhyZXNob2xkYCBvZiB0aGUgcmVuZGVyZWRcbiAgICogY29udGVudC5cbiAgICovXG4gIG9uRW5kUmVhY2hlZD86ID8oaW5mbzoge2Rpc3RhbmNlRnJvbUVuZDogbnVtYmVyLCAuLi59KSA9PiB2b2lkLFxuICAvKipcbiAgICogSG93IGZhciBmcm9tIHRoZSBlbmQgKGluIHVuaXRzIG9mIHZpc2libGUgbGVuZ3RoIG9mIHRoZSBsaXN0KSB0aGUgYm90dG9tIGVkZ2Ugb2YgdGhlXG4gICAqIGxpc3QgbXVzdCBiZSBmcm9tIHRoZSBlbmQgb2YgdGhlIGNvbnRlbnQgdG8gdHJpZ2dlciB0aGUgYG9uRW5kUmVhY2hlZGAgY2FsbGJhY2suXG4gICAqIFRodXMgYSB2YWx1ZSBvZiAwLjUgd2lsbCB0cmlnZ2VyIGBvbkVuZFJlYWNoZWRgIHdoZW4gdGhlIGVuZCBvZiB0aGUgY29udGVudCBpc1xuICAgKiB3aXRoaW4gaGFsZiB0aGUgdmlzaWJsZSBsZW5ndGggb2YgdGhlIGxpc3QuIEEgdmFsdWUgb2YgMCB3aWxsIG5vdCB0cmlnZ2VyIHVudGlsIHNjcm9sbGluZ1xuICAgKiB0byB0aGUgdmVyeSBlbmQgb2YgdGhlIGxpc3QuXG4gICAqL1xuICBvbkVuZFJlYWNoZWRUaHJlc2hvbGQ/OiA/bnVtYmVyLFxuICAvKipcbiAgICogSWYgcHJvdmlkZWQsIGEgc3RhbmRhcmQgUmVmcmVzaENvbnRyb2wgd2lsbCBiZSBhZGRlZCBmb3IgXCJQdWxsIHRvIFJlZnJlc2hcIiBmdW5jdGlvbmFsaXR5LiBNYWtlXG4gICAqIHN1cmUgdG8gYWxzbyBzZXQgdGhlIGByZWZyZXNoaW5nYCBwcm9wIGNvcnJlY3RseS5cbiAgICovXG4gIG9uUmVmcmVzaD86ID8oKSA9PiB2b2lkLFxuICAvKipcbiAgICogVXNlZCB0byBoYW5kbGUgZmFpbHVyZXMgd2hlbiBzY3JvbGxpbmcgdG8gYW4gaW5kZXggdGhhdCBoYXMgbm90IGJlZW4gbWVhc3VyZWQgeWV0LiBSZWNvbW1lbmRlZFxuICAgKiBhY3Rpb24gaXMgdG8gZWl0aGVyIGNvbXB1dGUgeW91ciBvd24gb2Zmc2V0IGFuZCBgc2Nyb2xsVG9gIGl0LCBvciBzY3JvbGwgYXMgZmFyIGFzIHBvc3NpYmxlIGFuZFxuICAgKiB0aGVuIHRyeSBhZ2FpbiBhZnRlciBtb3JlIGl0ZW1zIGhhdmUgYmVlbiByZW5kZXJlZC5cbiAgICovXG4gIG9uU2Nyb2xsVG9JbmRleEZhaWxlZD86ID8oaW5mbzoge1xuICAgIGluZGV4OiBudW1iZXIsXG4gICAgaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleDogbnVtYmVyLFxuICAgIGF2ZXJhZ2VJdGVtTGVuZ3RoOiBudW1iZXIsXG4gICAgLi4uXG4gIH0pID0+IHZvaWQsXG4gIC8qKlxuICAgKiBDYWxsZWQgd2hlbiB0aGUgdmlld2FiaWxpdHkgb2Ygcm93cyBjaGFuZ2VzLCBhcyBkZWZpbmVkIGJ5IHRoZVxuICAgKiBgdmlld2FiaWxpdHlDb25maWdgIHByb3AuXG4gICAqL1xuICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkPzogPyhpbmZvOiB7XG4gICAgdmlld2FibGVJdGVtczogQXJyYXk8Vmlld1Rva2VuPixcbiAgICBjaGFuZ2VkOiBBcnJheTxWaWV3VG9rZW4+LFxuICAgIC4uLlxuICB9KSA9PiB2b2lkLFxuICBwZXJzaXN0ZW50U2Nyb2xsYmFyPzogP2Jvb2xlYW4sXG4gIC8qKlxuICAgKiBTZXQgdGhpcyB3aGVuIG9mZnNldCBpcyBuZWVkZWQgZm9yIHRoZSBsb2FkaW5nIGluZGljYXRvciB0byBzaG93IGNvcnJlY3RseS5cbiAgICovXG4gIHByb2dyZXNzVmlld09mZnNldD86IG51bWJlcixcbiAgLyoqXG4gICAqIEEgY3VzdG9tIHJlZnJlc2ggY29udHJvbCBlbGVtZW50LiBXaGVuIHNldCwgaXQgb3ZlcnJpZGVzIHRoZSBkZWZhdWx0XG4gICAqIDxSZWZyZXNoQ29udHJvbD4gY29tcG9uZW50IGJ1aWx0IGludGVybmFsbHkuIFRoZSBvblJlZnJlc2ggYW5kIHJlZnJlc2hpbmdcbiAgICogcHJvcHMgYXJlIGFsc28gaWdub3JlZC4gT25seSB3b3JrcyBmb3IgdmVydGljYWwgVmlydHVhbGl6ZWRMaXN0LlxuICAgKi9cbiAgcmVmcmVzaENvbnRyb2w/OiA/UmVhY3QuRWxlbWVudDxhbnk+LFxuICAvKipcbiAgICogU2V0IHRoaXMgdHJ1ZSB3aGlsZSB3YWl0aW5nIGZvciBuZXcgZGF0YSBmcm9tIGEgcmVmcmVzaC5cbiAgICovXG4gIHJlZnJlc2hpbmc/OiA/Ym9vbGVhbixcbiAgLyoqXG4gICAqIE5vdGU6IG1heSBoYXZlIGJ1Z3MgKG1pc3NpbmcgY29udGVudCkgaW4gc29tZSBjaXJjdW1zdGFuY2VzIC0gdXNlIGF0IHlvdXIgb3duIHJpc2suXG4gICAqXG4gICAqIFRoaXMgbWF5IGltcHJvdmUgc2Nyb2xsIHBlcmZvcm1hbmNlIGZvciBsYXJnZSBsaXN0cy5cbiAgICovXG4gIHJlbW92ZUNsaXBwZWRTdWJ2aWV3cz86IGJvb2xlYW4sXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBjdXN0b20gc2Nyb2xsIGNvbXBvbmVudCwgZS5nLiB3aXRoIGEgZGlmZmVyZW50bHkgc3R5bGVkIGBSZWZyZXNoQ29udHJvbGAuXG4gICAqL1xuICByZW5kZXJTY3JvbGxDb21wb25lbnQ/OiAocHJvcHM6IE9iamVjdCkgPT4gUmVhY3QuRWxlbWVudDxhbnk+LFxuICAvKipcbiAgICogQW1vdW50IG9mIHRpbWUgYmV0d2VlbiBsb3ctcHJpIGl0ZW0gcmVuZGVyIGJhdGNoZXMsIGUuZy4gZm9yIHJlbmRlcmluZyBpdGVtcyBxdWl0ZSBhIHdheXMgb2ZmXG4gICAqIHNjcmVlbi4gU2ltaWxhciBmaWxsIHJhdGUvcmVzcG9uc2l2ZW5lc3MgdHJhZGVvZmYgYXMgYG1heFRvUmVuZGVyUGVyQmF0Y2hgLlxuICAgKi9cbiAgdXBkYXRlQ2VsbHNCYXRjaGluZ1BlcmlvZD86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBTZWUgYFZpZXdhYmlsaXR5SGVscGVyYCBmb3IgZmxvdyB0eXBlIGFuZCBmdXJ0aGVyIGRvY3VtZW50YXRpb24uXG4gICAqL1xuICB2aWV3YWJpbGl0eUNvbmZpZz86IFZpZXdhYmlsaXR5Q29uZmlnLFxuICAvKipcbiAgICogTGlzdCBvZiBWaWV3YWJpbGl0eUNvbmZpZy9vblZpZXdhYmxlSXRlbXNDaGFuZ2VkIHBhaXJzLiBBIHNwZWNpZmljIG9uVmlld2FibGVJdGVtc0NoYW5nZWRcbiAgICogd2lsbCBiZSBjYWxsZWQgd2hlbiBpdHMgY29ycmVzcG9uZGluZyBWaWV3YWJpbGl0eUNvbmZpZydzIGNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICovXG4gIHZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycz86IEFycmF5PFZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlyPixcbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHJlbmRlcmVkIG91dHNpZGUgb2YgdGhlIHZpc2libGUgYXJlYSwgaW4gdW5pdHMgb2ZcbiAgICogdmlzaWJsZSBsZW5ndGhzLiBTbyBpZiB5b3VyIGxpc3QgZmlsbHMgdGhlIHNjcmVlbiwgdGhlbiBgd2luZG93U2l6ZT17MjF9YCAodGhlIGRlZmF1bHQpIHdpbGxcbiAgICogcmVuZGVyIHRoZSB2aXNpYmxlIHNjcmVlbiBhcmVhIHBsdXMgdXAgdG8gMTAgc2NyZWVucyBhYm92ZSBhbmQgMTAgYmVsb3cgdGhlIHZpZXdwb3J0LiBSZWR1Y2luZ1xuICAgKiB0aGlzIG51bWJlciB3aWxsIHJlZHVjZSBtZW1vcnkgY29uc3VtcHRpb24gYW5kIG1heSBpbXByb3ZlIHBlcmZvcm1hbmNlLCBidXQgd2lsbCBpbmNyZWFzZSB0aGVcbiAgICogY2hhbmNlIHRoYXQgZmFzdCBzY3JvbGxpbmcgbWF5IHJldmVhbCBtb21lbnRhcnkgYmxhbmsgYXJlYXMgb2YgdW5yZW5kZXJlZCBjb250ZW50LlxuICAgKi9cbiAgd2luZG93U2l6ZT86ID9udW1iZXIsXG4gIC8qKlxuICAgKiBUaGUgbGVnYWN5IGltcGxlbWVudGF0aW9uIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQuXG4gICAqL1xuICBsZWdhY3lJbXBsZW1lbnRhdGlvbj86IGVtcHR5LFxufH07XG5cbnR5cGUgUHJvcHMgPSB7fFxuICAuLi5SZWFjdC5FbGVtZW50Q29uZmlnPHR5cGVvZiBTY3JvbGxWaWV3PixcbiAgLi4uUmVxdWlyZWRQcm9wcyxcbiAgLi4uT3B0aW9uYWxQcm9wcyxcbnx9O1xuXG5sZXQgX3VzZWRJbmRleEZvcktleSA9IGZhbHNlO1xubGV0IF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWU6IHN0cmluZyA9ICcnO1xuXG50eXBlIFN0YXRlID0ge1xuICBmaXJzdDogbnVtYmVyLFxuICBsYXN0OiBudW1iZXIsXG59O1xuXG4vKipcbiAqIERlZmF1bHQgUHJvcHMgSGVscGVyIEZ1bmN0aW9uc1xuICogVXNlIHRoZSBmb2xsb3dpbmcgaGVscGVyIGZ1bmN0aW9ucyBmb3IgZGVmYXVsdCB2YWx1ZXNcbiAqL1xuXG4vLyBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbmZ1bmN0aW9uIGhvcml6b250YWxPckRlZmF1bHQoaG9yaXpvbnRhbDogP2Jvb2xlYW4pIHtcbiAgcmV0dXJuIGhvcml6b250YWwgPz8gZmFsc2U7XG59XG5cbi8vIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCh0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdClcbmZ1bmN0aW9uIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdChpbml0aWFsTnVtVG9SZW5kZXI6ID9udW1iZXIpIHtcbiAgcmV0dXJuIGluaXRpYWxOdW1Ub1JlbmRlciA/PyAxMDtcbn1cblxuLy8gbWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdCh0aGlzLnByb3BzLm1heFRvUmVuZGVyUGVyQmF0Y2gpXG5mdW5jdGlvbiBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KG1heFRvUmVuZGVyUGVyQmF0Y2g6ID9udW1iZXIpIHtcbiAgcmV0dXJuIG1heFRvUmVuZGVyUGVyQmF0Y2ggPz8gMTA7XG59XG5cbi8vIG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdCh0aGlzLnByb3BzLm9uRW5kUmVhY2hlZFRocmVzaG9sZClcbmZ1bmN0aW9uIG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdChvbkVuZFJlYWNoZWRUaHJlc2hvbGQ6ID9udW1iZXIpIHtcbiAgcmV0dXJuIG9uRW5kUmVhY2hlZFRocmVzaG9sZCA/PyAyO1xufVxuXG4vLyBzY3JvbGxFdmVudFRocm90dGxlT3JEZWZhdWx0KHRoaXMucHJvcHMuc2Nyb2xsRXZlbnRUaHJvdHRsZSlcbmZ1bmN0aW9uIHNjcm9sbEV2ZW50VGhyb3R0bGVPckRlZmF1bHQoc2Nyb2xsRXZlbnRUaHJvdHRsZTogP251bWJlcikge1xuICByZXR1cm4gc2Nyb2xsRXZlbnRUaHJvdHRsZSA/PyA1MDtcbn1cblxuLy8gd2luZG93U2l6ZU9yRGVmYXVsdCh0aGlzLnByb3BzLndpbmRvd1NpemUpXG5mdW5jdGlvbiB3aW5kb3dTaXplT3JEZWZhdWx0KHdpbmRvd1NpemU6ID9udW1iZXIpIHtcbiAgcmV0dXJuIHdpbmRvd1NpemUgPz8gMjE7XG59XG5cbi8qKlxuICogQmFzZSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIG1vcmUgY29udmVuaWVudCBbYDxGbGF0TGlzdD5gXShodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2ZsYXRsaXN0KVxuICogYW5kIFtgPFNlY3Rpb25MaXN0PmBdKGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3Mvc2VjdGlvbmxpc3QpIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBhbHNvIGJldHRlclxuICogZG9jdW1lbnRlZC4gSW4gZ2VuZXJhbCwgdGhpcyBzaG91bGQgb25seSByZWFsbHkgYmUgdXNlZCBpZiB5b3UgbmVlZCBtb3JlIGZsZXhpYmlsaXR5IHRoYW5cbiAqIGBGbGF0TGlzdGAgcHJvdmlkZXMsIGUuZy4gZm9yIHVzZSB3aXRoIGltbXV0YWJsZSBkYXRhIGluc3RlYWQgb2YgcGxhaW4gYXJyYXlzLlxuICpcbiAqIFZpcnR1YWxpemF0aW9uIG1hc3NpdmVseSBpbXByb3ZlcyBtZW1vcnkgY29uc3VtcHRpb24gYW5kIHBlcmZvcm1hbmNlIG9mIGxhcmdlIGxpc3RzIGJ5XG4gKiBtYWludGFpbmluZyBhIGZpbml0ZSByZW5kZXIgd2luZG93IG9mIGFjdGl2ZSBpdGVtcyBhbmQgcmVwbGFjaW5nIGFsbCBpdGVtcyBvdXRzaWRlIG9mIHRoZSByZW5kZXJcbiAqIHdpbmRvdyB3aXRoIGFwcHJvcHJpYXRlbHkgc2l6ZWQgYmxhbmsgc3BhY2UuIFRoZSB3aW5kb3cgYWRhcHRzIHRvIHNjcm9sbGluZyBiZWhhdmlvciwgYW5kIGl0ZW1zXG4gKiBhcmUgcmVuZGVyZWQgaW5jcmVtZW50YWxseSB3aXRoIGxvdy1wcmkgKGFmdGVyIGFueSBydW5uaW5nIGludGVyYWN0aW9ucykgaWYgdGhleSBhcmUgZmFyIGZyb20gdGhlXG4gKiB2aXNpYmxlIGFyZWEsIG9yIHdpdGggaGktcHJpIG90aGVyd2lzZSB0byBtaW5pbWl6ZSB0aGUgcG90ZW50aWFsIG9mIHNlZWluZyBibGFuayBzcGFjZS5cbiAqXG4gKiBTb21lIGNhdmVhdHM6XG4gKlxuICogLSBJbnRlcm5hbCBzdGF0ZSBpcyBub3QgcHJlc2VydmVkIHdoZW4gY29udGVudCBzY3JvbGxzIG91dCBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gTWFrZSBzdXJlIGFsbFxuICogICB5b3VyIGRhdGEgaXMgY2FwdHVyZWQgaW4gdGhlIGl0ZW0gZGF0YSBvciBleHRlcm5hbCBzdG9yZXMgbGlrZSBGbHV4LCBSZWR1eCwgb3IgUmVsYXkuXG4gKiAtIFRoaXMgaXMgYSBgUHVyZUNvbXBvbmVudGAgd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIG5vdCByZS1yZW5kZXIgaWYgYHByb3BzYCByZW1haW4gc2hhbGxvdy1cbiAqICAgZXF1YWwuIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgeW91ciBgcmVuZGVySXRlbWAgZnVuY3Rpb24gZGVwZW5kcyBvbiBpcyBwYXNzZWQgYXMgYSBwcm9wXG4gKiAgIChlLmcuIGBleHRyYURhdGFgKSB0aGF0IGlzIG5vdCBgPT09YCBhZnRlciB1cGRhdGVzLCBvdGhlcndpc2UgeW91ciBVSSBtYXkgbm90IHVwZGF0ZSBvblxuICogICBjaGFuZ2VzLiBUaGlzIGluY2x1ZGVzIHRoZSBgZGF0YWAgcHJvcCBhbmQgcGFyZW50IGNvbXBvbmVudCBzdGF0ZS5cbiAqIC0gSW4gb3JkZXIgdG8gY29uc3RyYWluIG1lbW9yeSBhbmQgZW5hYmxlIHNtb290aCBzY3JvbGxpbmcsIGNvbnRlbnQgaXMgcmVuZGVyZWQgYXN5bmNocm9ub3VzbHlcbiAqICAgb2Zmc2NyZWVuLiBUaGlzIG1lYW5zIGl0J3MgcG9zc2libGUgdG8gc2Nyb2xsIGZhc3RlciB0aGFuIHRoZSBmaWxsIHJhdGUgYW5kcyBtb21lbnRhcmlseSBzZWVcbiAqICAgYmxhbmsgY29udGVudC4gVGhpcyBpcyBhIHRyYWRlb2ZmIHRoYXQgY2FuIGJlIGFkanVzdGVkIHRvIHN1aXQgdGhlIG5lZWRzIG9mIGVhY2ggYXBwbGljYXRpb24sXG4gKiAgIGFuZCB3ZSBhcmUgd29ya2luZyBvbiBpbXByb3ZpbmcgaXQgYmVoaW5kIHRoZSBzY2VuZXMuXG4gKiAtIEJ5IGRlZmF1bHQsIHRoZSBsaXN0IGxvb2tzIGZvciBhIGBrZXlgIG9yIGBpZGAgcHJvcCBvbiBlYWNoIGl0ZW0gYW5kIHVzZXMgdGhhdCBmb3IgdGhlIFJlYWN0IGtleS5cbiAqICAgQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwcm92aWRlIGEgY3VzdG9tIGBrZXlFeHRyYWN0b3JgIHByb3AuXG4gKiAtIEFzIGFuIGVmZm9ydCB0byByZW1vdmUgZGVmYXVsdFByb3BzLCB1c2UgaGVscGVyIGZ1bmN0aW9ucyB3aGVuIHJlZmVyZW5jaW5nIGNlcnRhaW4gcHJvcHNcbiAqXG4gKi9cbmNsYXNzIFZpcnR1YWxpemVkTGlzdCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8UHJvcHMsIFN0YXRlPiB7XG4gIHN0YXRpYyBjb250ZXh0VHlwZTogdHlwZW9mIFZpcnR1YWxpemVkTGlzdENvbnRleHQgPSBWaXJ0dWFsaXplZExpc3RDb250ZXh0O1xuXG4gIC8vIHNjcm9sbFRvRW5kIG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcFxuICBzY3JvbGxUb0VuZChwYXJhbXM/OiA/e2FuaW1hdGVkPzogP2Jvb2xlYW4sIC4uLn0pIHtcbiAgICBjb25zdCBhbmltYXRlZCA9IHBhcmFtcyA/IHBhcmFtcy5hbmltYXRlZCA6IHRydWU7XG4gICAgY29uc3QgdmVyeUxhc3QgPSB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpIC0gMTtcbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3godmVyeUxhc3QpO1xuICAgIGNvbnN0IG9mZnNldCA9IE1hdGgubWF4KFxuICAgICAgMCxcbiAgICAgIGZyYW1lLm9mZnNldCArXG4gICAgICAgIGZyYW1lLmxlbmd0aCArXG4gICAgICAgIHRoaXMuX2Zvb3Rlckxlbmd0aCAtXG4gICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCxcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdObyBzY3JvbGxUbyBtZXRob2QgcHJvdmlkZWQuIFRoaXMgbWF5IGJlIGJlY2F1c2UgeW91IGhhdmUgdHdvIG5lc3RlZCAnICtcbiAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0cyB3aXRoIHRoZSBzYW1lIG9yaWVudGF0aW9uLCBvciBiZWNhdXNlIHlvdSBhcmUgJyArXG4gICAgICAgICAgJ3VzaW5nIGEgY3VzdG9tIGNvbXBvbmVudCB0aGF0IGRvZXMgbm90IGltcGxlbWVudCBzY3JvbGxUby4nLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8oXG4gICAgICBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgICAgPyB7eDogb2Zmc2V0LCBhbmltYXRlZH1cbiAgICAgICAgOiB7eTogb2Zmc2V0LCBhbmltYXRlZH0sXG4gICAgKTtcbiAgfVxuXG4gIC8vIHNjcm9sbFRvSW5kZXggbWF5IGJlIGphbmt5IHdpdGhvdXQgZ2V0SXRlbUxheW91dCBwcm9wXG4gIHNjcm9sbFRvSW5kZXgocGFyYW1zOiB7XG4gICAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHZpZXdPZmZzZXQ/OiBudW1iZXIsXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICAgIC4uLlxuICB9KSB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICBnZXRJdGVtQ291bnQsXG4gICAgICBnZXRJdGVtTGF5b3V0LFxuICAgICAgb25TY3JvbGxUb0luZGV4RmFpbGVkLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHthbmltYXRlZCwgaW5kZXgsIHZpZXdPZmZzZXQsIHZpZXdQb3NpdGlvbn0gPSBwYXJhbXM7XG4gICAgaW52YXJpYW50KFxuICAgICAgaW5kZXggPj0gMCxcbiAgICAgIGBzY3JvbGxUb0luZGV4IG91dCBvZiByYW5nZTogcmVxdWVzdGVkIGluZGV4ICR7aW5kZXh9IGJ1dCBtaW5pbXVtIGlzIDBgLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgZ2V0SXRlbUNvdW50KGRhdGEpID49IDEsXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IGl0ZW0gbGVuZ3RoICR7Z2V0SXRlbUNvdW50KFxuICAgICAgICBkYXRhLFxuICAgICAgKX0gYnV0IG1pbmltdW0gaXMgMWAsXG4gICAgKTtcbiAgICBpbnZhcmlhbnQoXG4gICAgICBpbmRleCA8IGdldEl0ZW1Db3VudChkYXRhKSxcbiAgICAgIGBzY3JvbGxUb0luZGV4IG91dCBvZiByYW5nZTogcmVxdWVzdGVkIGluZGV4ICR7aW5kZXh9IGlzIG91dCBvZiAwIHRvICR7XG4gICAgICAgIGdldEl0ZW1Db3VudChkYXRhKSAtIDFcbiAgICAgIH1gLFxuICAgICk7XG4gICAgaWYgKCFnZXRJdGVtTGF5b3V0ICYmIGluZGV4ID4gdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCkge1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICAhIW9uU2Nyb2xsVG9JbmRleEZhaWxlZCxcbiAgICAgICAgJ3Njcm9sbFRvSW5kZXggc2hvdWxkIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCBnZXRJdGVtTGF5b3V0IG9yIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCwgJyArXG4gICAgICAgICAgJ290aGVyd2lzZSB0aGVyZSBpcyBubyB3YXkgdG8ga25vdyB0aGUgbG9jYXRpb24gb2Ygb2Zmc2NyZWVuIGluZGljZXMgb3IgaGFuZGxlIGZhaWx1cmVzLicsXG4gICAgICApO1xuICAgICAgb25TY3JvbGxUb0luZGV4RmFpbGVkKHtcbiAgICAgICAgYXZlcmFnZUl0ZW1MZW5ndGg6IHRoaXMuX2F2ZXJhZ2VDZWxsTGVuZ3RoLFxuICAgICAgICBoaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4OiB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4LFxuICAgICAgICBpbmRleCxcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBmcmFtZSA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goaW5kZXgpO1xuICAgIGNvbnN0IG9mZnNldCA9XG4gICAgICBNYXRoLm1heChcbiAgICAgICAgMCxcbiAgICAgICAgZnJhbWUub2Zmc2V0IC1cbiAgICAgICAgICAodmlld1Bvc2l0aW9uIHx8IDApICpcbiAgICAgICAgICAgICh0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggLSBmcmFtZS5sZW5ndGgpLFxuICAgICAgKSAtICh2aWV3T2Zmc2V0IHx8IDApO1xuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdObyBzY3JvbGxUbyBtZXRob2QgcHJvdmlkZWQuIFRoaXMgbWF5IGJlIGJlY2F1c2UgeW91IGhhdmUgdHdvIG5lc3RlZCAnICtcbiAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0cyB3aXRoIHRoZSBzYW1lIG9yaWVudGF0aW9uLCBvciBiZWNhdXNlIHlvdSBhcmUgJyArXG4gICAgICAgICAgJ3VzaW5nIGEgY3VzdG9tIGNvbXBvbmVudCB0aGF0IGRvZXMgbm90IGltcGxlbWVudCBzY3JvbGxUby4nLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8oXG4gICAgICBob3Jpem9udGFsID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9IDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICAvLyBzY3JvbGxUb0l0ZW0gbWF5IGJlIGphbmt5IHdpdGhvdXQgZ2V0SXRlbUxheW91dCBwcm9wLiBSZXF1aXJlZCBsaW5lYXIgc2NhbiB0aHJvdWdoIGl0ZW1zIC1cbiAgLy8gdXNlIHNjcm9sbFRvSW5kZXggaW5zdGVhZCBpZiBwb3NzaWJsZS5cbiAgc2Nyb2xsVG9JdGVtKHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaXRlbTogSXRlbSxcbiAgICB2aWV3UG9zaXRpb24/OiBudW1iZXIsXG4gICAgLi4uXG4gIH0pIHtcbiAgICBjb25zdCB7aXRlbX0gPSBwYXJhbXM7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW0sIGdldEl0ZW1Db3VudH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGl0ZW1Db3VudCA9IGdldEl0ZW1Db3VudChkYXRhKTtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaXRlbUNvdW50OyBpbmRleCsrKSB7XG4gICAgICBpZiAoZ2V0SXRlbShkYXRhLCBpbmRleCkgPT09IGl0ZW0pIHtcbiAgICAgICAgdGhpcy5zY3JvbGxUb0luZGV4KHsuLi5wYXJhbXMsIGluZGV4fSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTY3JvbGwgdG8gYSBzcGVjaWZpYyBjb250ZW50IHBpeGVsIG9mZnNldCBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogUGFyYW0gYG9mZnNldGAgZXhwZWN0cyB0aGUgb2Zmc2V0IHRvIHNjcm9sbCB0by5cbiAgICogSW4gY2FzZSBvZiBgaG9yaXpvbnRhbGAgaXMgdHJ1ZSwgdGhlIG9mZnNldCBpcyB0aGUgeC12YWx1ZSxcbiAgICogaW4gYW55IG90aGVyIGNhc2UgdGhlIG9mZnNldCBpcyB0aGUgeS12YWx1ZS5cbiAgICpcbiAgICogUGFyYW0gYGFuaW1hdGVkYCAoYHRydWVgIGJ5IGRlZmF1bHQpIGRlZmluZXMgd2hldGhlciB0aGUgbGlzdFxuICAgKiBzaG91bGQgZG8gYW4gYW5pbWF0aW9uIHdoaWxlIHNjcm9sbGluZy5cbiAgICovXG4gIHNjcm9sbFRvT2Zmc2V0KHBhcmFtczoge2FuaW1hdGVkPzogP2Jvb2xlYW4sIG9mZnNldDogbnVtYmVyLCAuLi59KSB7XG4gICAgY29uc3Qge2FuaW1hdGVkLCBvZmZzZXR9ID0gcGFyYW1zO1xuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyA9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdObyBzY3JvbGxUbyBtZXRob2QgcHJvdmlkZWQuIFRoaXMgbWF5IGJlIGJlY2F1c2UgeW91IGhhdmUgdHdvIG5lc3RlZCAnICtcbiAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0cyB3aXRoIHRoZSBzYW1lIG9yaWVudGF0aW9uLCBvciBiZWNhdXNlIHlvdSBhcmUgJyArXG4gICAgICAgICAgJ3VzaW5nIGEgY3VzdG9tIGNvbXBvbmVudCB0aGF0IGRvZXMgbm90IGltcGxlbWVudCBzY3JvbGxUby4nLFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8oXG4gICAgICBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgICAgPyB7eDogb2Zmc2V0LCBhbmltYXRlZH1cbiAgICAgICAgOiB7eTogb2Zmc2V0LCBhbmltYXRlZH0sXG4gICAgKTtcbiAgfVxuXG4gIHJlY29yZEludGVyYWN0aW9uKCkge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0ID0+IHtcbiAgICAgIHQudmlld2FiaWxpdHlIZWxwZXIucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMuZGF0YSk7XG4gIH1cblxuICBmbGFzaFNjcm9sbEluZGljYXRvcnMoKSB7XG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLmZsYXNoU2Nyb2xsSW5kaWNhdG9ycygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGEgaGFuZGxlIHRvIHRoZSB1bmRlcmx5aW5nIHNjcm9sbCByZXNwb25kZXIuXG4gICAqIE5vdGUgdGhhdCBgdGhpcy5fc2Nyb2xsUmVmYCBtaWdodCBub3QgYmUgYSBgU2Nyb2xsVmlld2AsIHNvIHdlXG4gICAqIG5lZWQgdG8gY2hlY2sgdGhhdCBpdCByZXNwb25kcyB0byBgZ2V0U2Nyb2xsUmVzcG9uZGVyYCBiZWZvcmUgY2FsbGluZyBpdC5cbiAgICovXG4gIGdldFNjcm9sbFJlc3BvbmRlcigpOiA/U2Nyb2xsUmVzcG9uZGVyVHlwZSB7XG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZiAmJiB0aGlzLl9zY3JvbGxSZWYuZ2V0U2Nyb2xsUmVzcG9uZGVyKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlc3BvbmRlcigpO1xuICAgIH1cbiAgfVxuXG4gIGdldFNjcm9sbGFibGVOb2RlKCk6ID9udW1iZXIge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbGFibGVOb2RlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBSZWFjdE5hdGl2ZS5maW5kTm9kZUhhbmRsZSh0aGlzLl9zY3JvbGxSZWYpO1xuICAgIH1cbiAgfVxuXG4gIGdldFNjcm9sbFJlZigpOlxuICAgIHwgP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFNjcm9sbFZpZXc+XG4gICAgfCA/UmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlldz4ge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlZikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZWYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZjtcbiAgICB9XG4gIH1cblxuICBzZXROYXRpdmVQcm9wcyhwcm9wczogT2JqZWN0KSB7XG4gICAgaWYgKHRoaXMuX3Njcm9sbFJlZikge1xuICAgICAgdGhpcy5fc2Nyb2xsUmVmLnNldE5hdGl2ZVByb3BzKHByb3BzKTtcbiAgICB9XG4gIH1cblxuICBfZ2V0Q2VsbEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNvbnRleHQ/LmNlbGxLZXkgfHwgJ3Jvb3RMaXN0JztcbiAgfVxuXG4gIF9nZXRMaXN0S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucHJvcHMubGlzdEtleSB8fCB0aGlzLl9nZXRDZWxsS2V5KCk7XG4gIH1cblxuICBfZ2V0RGVidWdJbmZvKCk6IExpc3REZWJ1Z0luZm8ge1xuICAgIHJldHVybiB7XG4gICAgICBsaXN0S2V5OiB0aGlzLl9nZXRMaXN0S2V5KCksXG4gICAgICBjZWxsS2V5OiB0aGlzLl9nZXRDZWxsS2V5KCksXG4gICAgICBob3Jpem9udGFsOiBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbCksXG4gICAgICBwYXJlbnQ6IHRoaXMuY29udGV4dD8uZGVidWdJbmZvLFxuICAgIH07XG4gIH1cblxuICBfZ2V0U2Nyb2xsTWV0cmljcyA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgfTtcblxuICBoYXNNb3JlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9oYXNNb3JlO1xuICB9XG5cbiAgX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250ZXh0LmdldE91dGVybW9zdFBhcmVudExpc3RSZWYoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIF9nZXROZXN0ZWRDaGlsZFN0YXRlID0gKGtleTogc3RyaW5nKTogP0NoaWxkTGlzdFN0YXRlID0+IHtcbiAgICBjb25zdCBleGlzdGluZ0NoaWxkRGF0YSA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGtleSk7XG4gICAgcmV0dXJuIGV4aXN0aW5nQ2hpbGREYXRhICYmIGV4aXN0aW5nQ2hpbGREYXRhLnN0YXRlO1xuICB9O1xuXG4gIF9yZWdpc3RlckFzTmVzdGVkQ2hpbGQgPSAoY2hpbGRMaXN0OiB7XG4gICAgY2VsbEtleTogc3RyaW5nLFxuICAgIGtleTogc3RyaW5nLFxuICAgIHJlZjogVmlydHVhbGl6ZWRMaXN0LFxuICAgIHBhcmVudERlYnVnSW5mbzogTGlzdERlYnVnSW5mbyxcbiAgICAuLi5cbiAgfSk6ID9DaGlsZExpc3RTdGF0ZSA9PiB7XG4gICAgLy8gUmVnaXN0ZXIgdGhlIG1hcHBpbmcgYmV0d2VlbiB0aGlzIGNoaWxkIGtleSBhbmQgdGhlIGNlbGxLZXkgZm9yIGl0cyBjZWxsXG4gICAgY29uc3QgY2hpbGRMaXN0c0luQ2VsbCA9XG4gICAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5nZXQoY2hpbGRMaXN0LmNlbGxLZXkpIHx8IG5ldyBTZXQoKTtcbiAgICBjaGlsZExpc3RzSW5DZWxsLmFkZChjaGlsZExpc3Qua2V5KTtcbiAgICB0aGlzLl9jZWxsS2V5c1RvQ2hpbGRMaXN0S2V5cy5zZXQoY2hpbGRMaXN0LmNlbGxLZXksIGNoaWxkTGlzdHNJbkNlbGwpO1xuICAgIGNvbnN0IGV4aXN0aW5nQ2hpbGREYXRhID0gdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5nZXQoY2hpbGRMaXN0LmtleSk7XG4gICAgaWYgKGV4aXN0aW5nQ2hpbGREYXRhICYmIGV4aXN0aW5nQ2hpbGREYXRhLnJlZiAhPT0gbnVsbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ0EgVmlydHVhbGl6ZWRMaXN0IGNvbnRhaW5zIGEgY2VsbCB3aGljaCBpdHNlbGYgY29udGFpbnMgJyArXG4gICAgICAgICAgJ21vcmUgdGhhbiBvbmUgVmlydHVhbGl6ZWRMaXN0IG9mIHRoZSBzYW1lIG9yaWVudGF0aW9uIGFzIHRoZSBwYXJlbnQgJyArXG4gICAgICAgICAgJ2xpc3QuIFlvdSBtdXN0IHBhc3MgYSB1bmlxdWUgbGlzdEtleSBwcm9wIHRvIGVhY2ggc2libGluZyBsaXN0LlxcblxcbicgK1xuICAgICAgICAgIGRlc2NyaWJlTmVzdGVkTGlzdHMoe1xuICAgICAgICAgICAgLi4uY2hpbGRMaXN0LFxuICAgICAgICAgICAgLy8gV2UncmUgY2FsbGVkIGZyb20gdGhlIGNoaWxkJ3MgY29tcG9uZW50RGlkTW91bnQsIHNvIGl0J3Mgc2FmZSB0b1xuICAgICAgICAgICAgLy8gcmVhZCB0aGUgY2hpbGQncyBwcm9wcyBoZXJlIChhbGJlaXQgd2VpcmQpLlxuICAgICAgICAgICAgaG9yaXpvbnRhbDogISFjaGlsZExpc3QucmVmLnByb3BzLmhvcml6b250YWwsXG4gICAgICAgICAgfSksXG4gICAgICApO1xuICAgIH1cbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLnNldChjaGlsZExpc3Qua2V5LCB7XG4gICAgICByZWY6IGNoaWxkTGlzdC5yZWYsXG4gICAgICBzdGF0ZTogbnVsbCxcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9oYXNJbnRlcmFjdGVkKSB7XG4gICAgICBjaGlsZExpc3QucmVmLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfVxuICB9O1xuXG4gIF91bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCA9IChjaGlsZExpc3Q6IHtcbiAgICBrZXk6IHN0cmluZyxcbiAgICBzdGF0ZTogQ2hpbGRMaXN0U3RhdGUsXG4gICAgLi4uXG4gIH0pOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLnNldChjaGlsZExpc3Qua2V5LCB7XG4gICAgICByZWY6IG51bGwsXG4gICAgICBzdGF0ZTogY2hpbGRMaXN0LnN0YXRlLFxuICAgIH0pO1xuICB9O1xuXG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgaW52YXJpYW50KFxuICAgICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICAhcHJvcHMub25TY3JvbGwgfHwgIXByb3BzLm9uU2Nyb2xsLl9faXNOYXRpdmUsXG4gICAgICAnQ29tcG9uZW50cyBiYXNlZCBvbiBWaXJ0dWFsaXplZExpc3QgbXVzdCBiZSB3cmFwcGVkIHdpdGggQW5pbWF0ZWQuY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQgJyArXG4gICAgICAgICd0byBzdXBwb3J0IG5hdGl2ZSBvblNjcm9sbCBldmVudHMgd2l0aCB1c2VOYXRpdmVEcml2ZXInLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgd2luZG93U2l6ZU9yRGVmYXVsdChwcm9wcy53aW5kb3dTaXplKSA+IDAsXG4gICAgICAnVmlydHVhbGl6ZWRMaXN0OiBUaGUgd2luZG93U2l6ZSBwcm9wIG11c3QgYmUgcHJlc2VudCBhbmQgc2V0IHRvIGEgdmFsdWUgZ3JlYXRlciB0aGFuIDAuJyxcbiAgICApO1xuXG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIgPSBuZXcgRmlsbFJhdGVIZWxwZXIodGhpcy5fZ2V0RnJhbWVNZXRyaWNzKTtcbiAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlciA9IG5ldyBCYXRjaGluYXRvcihcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXIsXG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2QgPz8gNTAsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycykge1xuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMgPSB0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycy5tYXAoXG4gICAgICAgIHBhaXIgPT4gKHtcbiAgICAgICAgICB2aWV3YWJpbGl0eUhlbHBlcjogbmV3IFZpZXdhYmlsaXR5SGVscGVyKHBhaXIudmlld2FiaWxpdHlDb25maWcpLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHBhaXIub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7b25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCwgdmlld2FiaWxpdHlDb25maWd9ID0gdGhpcy5wcm9wcztcbiAgICAgIGlmIChvblZpZXdhYmxlSXRlbXNDaGFuZ2VkKSB7XG4gICAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLnB1c2goe1xuICAgICAgICAgIHZpZXdhYmlsaXR5SGVscGVyOiBuZXcgVmlld2FiaWxpdHlIZWxwZXIodmlld2FiaWxpdHlDb25maWcpLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IG9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBpbml0aWFsU3RhdGUgPSB7XG4gICAgICBmaXJzdDogdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHwgMCxcbiAgICAgIGxhc3Q6XG4gICAgICAgIE1hdGgubWluKFxuICAgICAgICAgIHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSksXG4gICAgICAgICAgKHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4IHx8IDApICtcbiAgICAgICAgICAgIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCh0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlciksXG4gICAgICAgICkgLSAxLFxuICAgIH07XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGNvbnN0IHN0b3JlZFN0YXRlID0gdGhpcy5jb250ZXh0LmdldE5lc3RlZENoaWxkU3RhdGUodGhpcy5fZ2V0TGlzdEtleSgpKTtcbiAgICAgIGlmIChzdG9yZWRTdGF0ZSkge1xuICAgICAgICBpbml0aWFsU3RhdGUgPSBzdG9yZWRTdGF0ZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHN0b3JlZFN0YXRlO1xuICAgICAgICB0aGlzLl9mcmFtZXMgPSBzdG9yZWRTdGF0ZS5mcmFtZXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zdGF0ZSA9IGluaXRpYWxTdGF0ZTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgdGhpcy5jb250ZXh0LnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCh7XG4gICAgICAgIGNlbGxLZXk6IHRoaXMuX2dldENlbGxLZXkoKSxcbiAgICAgICAga2V5OiB0aGlzLl9nZXRMaXN0S2V5KCksXG4gICAgICAgIHJlZjogdGhpcyxcbiAgICAgICAgLy8gTk9URTogV2hlbiB0aGUgY2hpbGQgbW91bnRzIChoZXJlKSBpdCdzIG5vdCBuZWNlc3NhcmlseSBzYWZlIHRvIHJlYWRcbiAgICAgICAgLy8gdGhlIHBhcmVudCdzIHByb3BzLiBUaGlzIGlzIHdoeSB3ZSBleHBsaWNpdGx5IHByb3BhZ2F0ZSBkZWJ1Z0luZm9cbiAgICAgICAgLy8gXCJkb3duXCIgdmlhIGNvbnRleHQgYW5kIFwidXBcIiBhZ2FpbiB2aWEgdGhpcyBtZXRob2QgY2FsbCBvbiB0aGVcbiAgICAgICAgLy8gcGFyZW50LlxuICAgICAgICBwYXJlbnREZWJ1Z0luZm86IHRoaXMuY29udGV4dC5kZWJ1Z0luZm8sXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC51bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCh7XG4gICAgICAgIGtleTogdGhpcy5fZ2V0TGlzdEtleSgpLFxuICAgICAgICBzdGF0ZToge1xuICAgICAgICAgIGZpcnN0OiB0aGlzLnN0YXRlLmZpcnN0LFxuICAgICAgICAgIGxhc3Q6IHRoaXMuc3RhdGUubGFzdCxcbiAgICAgICAgICBmcmFtZXM6IHRoaXMuX2ZyYW1lcyxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKG51bGwpO1xuICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLmRpc3Bvc2Uoe2Fib3J0OiB0cnVlfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5kaXNwb3NlKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gIH1cblxuICBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5ld1Byb3BzOiBQcm9wcywgcHJldlN0YXRlOiBTdGF0ZSk6IFN0YXRlIHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50fSA9IG5ld1Byb3BzO1xuICAgIGNvbnN0IG1heFRvUmVuZGVyUGVyQmF0Y2ggPSBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KFxuICAgICAgbmV3UHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaCxcbiAgICApO1xuICAgIC8vIGZpcnN0IGFuZCBsYXN0IGNvdWxkIGJlIHN0YWxlIChlLmcuIGlmIGEgbmV3LCBzaG9ydGVyIGl0ZW1zIHByb3BzIGlzIHBhc3NlZCBpbiksIHNvIHdlIG1ha2VcbiAgICAvLyBzdXJlIHdlJ3JlIHJlbmRlcmluZyBhIHJlYXNvbmFibGUgcmFuZ2UgaGVyZS5cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICBNYXRoLm1pbihwcmV2U3RhdGUuZmlyc3QsIGdldEl0ZW1Db3VudChkYXRhKSAtIDEgLSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAgICksXG4gICAgICBsYXN0OiBNYXRoLm1heCgwLCBNYXRoLm1pbihwcmV2U3RhdGUubGFzdCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSkpLFxuICAgIH07XG4gIH1cblxuICBfcHVzaENlbGxzKFxuICAgIGNlbGxzOiBBcnJheTxPYmplY3Q+LFxuICAgIHN0aWNreUhlYWRlckluZGljZXM6IEFycmF5PG51bWJlcj4sXG4gICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wczogU2V0PG51bWJlcj4sXG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6IFZpZXdTdHlsZVByb3AsXG4gICkge1xuICAgIGNvbnN0IHtcbiAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudCxcbiAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQsXG4gICAgICBMaXN0SGVhZGVyQ29tcG9uZW50LFxuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICBkYXRhLFxuICAgICAgZGVidWcsXG4gICAgICBnZXRJdGVtLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICByZW5kZXJJdGVtLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHN0aWNreU9mZnNldCA9IExpc3RIZWFkZXJDb21wb25lbnQgPyAxIDogMDtcbiAgICBjb25zdCBlbmQgPSBnZXRJdGVtQ291bnQoZGF0YSkgLSAxO1xuICAgIGxldCBwcmV2Q2VsbEtleTtcbiAgICBsYXN0ID0gTWF0aC5taW4oZW5kLCBsYXN0KTtcbiAgICBmb3IgKGxldCBpaSA9IGZpcnN0OyBpaSA8PSBsYXN0OyBpaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZ2V0SXRlbShkYXRhLCBpaSk7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLl9rZXlFeHRyYWN0b3IoaXRlbSwgaWkpO1xuICAgICAgdGhpcy5faW5kaWNlc1RvS2V5cy5zZXQoaWksIGtleSk7XG4gICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoaWkgKyBzdGlja3lPZmZzZXQpKSB7XG4gICAgICAgIHN0aWNreUhlYWRlckluZGljZXMucHVzaChjZWxscy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgPENlbGxSZW5kZXJlclxuICAgICAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudD17Q2VsbFJlbmRlcmVyQ29tcG9uZW50fVxuICAgICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e2lpIDwgZW5kID8gSXRlbVNlcGFyYXRvckNvbXBvbmVudCA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBMaXN0SXRlbUNvbXBvbmVudD17TGlzdEl0ZW1Db21wb25lbnR9XG4gICAgICAgICAgY2VsbEtleT17a2V5fVxuICAgICAgICAgIGRlYnVnPXtkZWJ1Z31cbiAgICAgICAgICBmaWxsUmF0ZUhlbHBlcj17dGhpcy5fZmlsbFJhdGVIZWxwZXJ9XG4gICAgICAgICAgZ2V0SXRlbUxheW91dD17Z2V0SXRlbUxheW91dH1cbiAgICAgICAgICBob3Jpem9udGFsPXtob3Jpem9udGFsfVxuICAgICAgICAgIGluZGV4PXtpaX1cbiAgICAgICAgICBpbnZlcnNpb25TdHlsZT17aW52ZXJzaW9uU3R5bGV9XG4gICAgICAgICAgaXRlbT17aXRlbX1cbiAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICBwcmV2Q2VsbEtleT17cHJldkNlbGxLZXl9XG4gICAgICAgICAgb25DZWxsTGF5b3V0PXt0aGlzLl9vbkNlbGxMYXlvdXR9XG4gICAgICAgICAgb25VcGRhdGVTZXBhcmF0b3JzPXt0aGlzLl9vblVwZGF0ZVNlcGFyYXRvcnN9XG4gICAgICAgICAgb25Vbm1vdW50PXt0aGlzLl9vbkNlbGxVbm1vdW50fVxuICAgICAgICAgIHJlZj17cmVmID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2NlbGxSZWZzW2tleV0gPSByZWY7XG4gICAgICAgICAgfX1cbiAgICAgICAgICByZW5kZXJJdGVtPXtyZW5kZXJJdGVtfVxuICAgICAgICAvPixcbiAgICAgICk7XG4gICAgICBwcmV2Q2VsbEtleSA9IGtleTtcbiAgICB9XG4gIH1cblxuICBfb25VcGRhdGVTZXBhcmF0b3JzID0gKGtleXM6IEFycmF5PD9zdHJpbmc+LCBuZXdQcm9wczogT2JqZWN0KSA9PiB7XG4gICAga2V5cy5mb3JFYWNoKGtleSA9PiB7XG4gICAgICBjb25zdCByZWYgPSBrZXkgIT0gbnVsbCAmJiB0aGlzLl9jZWxsUmVmc1trZXldO1xuICAgICAgcmVmICYmIHJlZi51cGRhdGVTZXBhcmF0b3JQcm9wcyhuZXdQcm9wcyk7XG4gICAgfSk7XG4gIH07XG5cbiAgX2lzVmlydHVhbGl6YXRpb25EaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wcy5kaXNhYmxlVmlydHVhbGl6YXRpb24gfHwgZmFsc2U7XG4gIH1cblxuICBfaXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5lc3RlZENvbnRleHQgPSB0aGlzLmNvbnRleHQ7XG4gICAgcmV0dXJuICEhKFxuICAgICAgbmVzdGVkQ29udGV4dCAmJlxuICAgICAgISFuZXN0ZWRDb250ZXh0Lmhvcml6b250YWwgPT09IGhvcml6b250YWxPckRlZmF1bHQodGhpcy5wcm9wcy5ob3Jpem9udGFsKVxuICAgICk7XG4gIH1cblxuICBfZ2V0U3BhY2VyS2V5ID0gKGlzVmVydGljYWw6IGJvb2xlYW4pOiBzdHJpbmcgPT5cbiAgICBpc1ZlcnRpY2FsID8gJ2hlaWdodCcgOiAnd2lkdGgnO1xuXG4gIF9rZXlFeHRyYWN0b3IoaXRlbTogSXRlbSwgaW5kZXg6IG51bWJlcikge1xuICAgIGlmICh0aGlzLnByb3BzLmtleUV4dHJhY3RvciAhPSBudWxsKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm9wcy5rZXlFeHRyYWN0b3IoaXRlbSwgaW5kZXgpO1xuICAgIH1cblxuICAgIGNvbnN0IGtleSA9IGRlZmF1bHRLZXlFeHRyYWN0b3IoaXRlbSwgaW5kZXgpO1xuICAgIGlmIChrZXkgPT09IFN0cmluZyhpbmRleCkpIHtcbiAgICAgIF91c2VkSW5kZXhGb3JLZXkgPSB0cnVlO1xuICAgICAgaWYgKGl0ZW0udHlwZSAmJiBpdGVtLnR5cGUuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSA9IGl0ZW0udHlwZS5kaXNwbGF5TmFtZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuXG4gIHJlbmRlcigpOiBSZWFjdC5Ob2RlIHtcbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgY29uc3QgZmxhdFN0eWxlcyA9IGZsYXR0ZW5TdHlsZSh0aGlzLnByb3BzLmNvbnRlbnRDb250YWluZXJTdHlsZSk7XG4gICAgICBpZiAoZmxhdFN0eWxlcyAhPSBudWxsICYmIGZsYXRTdHlsZXMuZmxleFdyYXAgPT09ICd3cmFwJykge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ2BmbGV4V3JhcDogYHdyYXBgYCBpcyBub3Qgc3VwcG9ydGVkIHdpdGggdGhlIGBWaXJ0dWFsaXplZExpc3RgIGNvbXBvbmVudHMuJyArXG4gICAgICAgICAgICAnQ29uc2lkZXIgdXNpbmcgYG51bUNvbHVtbnNgIHdpdGggYEZsYXRMaXN0YCBpbnN0ZWFkLicsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHtMaXN0RW1wdHlDb21wb25lbnQsIExpc3RGb290ZXJDb21wb25lbnQsIExpc3RIZWFkZXJDb21wb25lbnR9ID1cbiAgICAgIHRoaXMucHJvcHM7XG4gICAgY29uc3Qge2RhdGEsIGhvcml6b250YWx9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgPSB0aGlzLl9pc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQoKTtcbiAgICBjb25zdCBpbnZlcnNpb25TdHlsZSA9IHRoaXMucHJvcHMuaW52ZXJ0ZWRcbiAgICAgID8gaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8gc3R5bGVzLmhvcml6b250YWxseUludmVydGVkXG4gICAgICAgIDogc3R5bGVzLnZlcnRpY2FsbHlJbnZlcnRlZFxuICAgICAgOiBudWxsO1xuICAgIGNvbnN0IGNlbGxzID0gW107XG4gICAgY29uc3Qgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyA9IG5ldyBTZXQodGhpcy5wcm9wcy5zdGlja3lIZWFkZXJJbmRpY2VzKTtcbiAgICBjb25zdCBzdGlja3lIZWFkZXJJbmRpY2VzID0gW107XG4gICAgaWYgKExpc3RIZWFkZXJDb21wb25lbnQpIHtcbiAgICAgIGlmIChzdGlja3lJbmRpY2VzRnJvbVByb3BzLmhhcygwKSkge1xuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLnB1c2goMCk7XG4gICAgICB9XG4gICAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoTGlzdEhlYWRlckNvbXBvbmVudCkgPyAoXG4gICAgICAgIExpc3RIZWFkZXJDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbbm90LWEtY29tcG9uZW50XVxuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ11cbiAgICAgICAgPExpc3RIZWFkZXJDb21wb25lbnQgLz5cbiAgICAgICk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldENlbGxLZXkoKSArICctaGVhZGVyJ31cbiAgICAgICAgICBrZXk9XCIkaGVhZGVyXCI+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIG9uTGF5b3V0PXt0aGlzLl9vbkxheW91dEhlYWRlcn1cbiAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSxcbiAgICAgICAgICAgICl9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9WaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyPixcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KGRhdGEpO1xuICAgIGlmIChpdGVtQ291bnQgPiAwKSB7XG4gICAgICBfdXNlZEluZGV4Rm9yS2V5ID0gZmFsc2U7XG4gICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lID0gJyc7XG4gICAgICBjb25zdCBzcGFjZXJLZXkgPSB0aGlzLl9nZXRTcGFjZXJLZXkoIWhvcml6b250YWwpO1xuICAgICAgY29uc3QgbGFzdEluaXRpYWxJbmRleCA9IHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4XG4gICAgICAgID8gLTFcbiAgICAgICAgOiBpbml0aWFsTnVtVG9SZW5kZXJPckRlZmF1bHQodGhpcy5wcm9wcy5pbml0aWFsTnVtVG9SZW5kZXIpIC0gMTtcbiAgICAgIGNvbnN0IHtmaXJzdCwgbGFzdH0gPSB0aGlzLnN0YXRlO1xuICAgICAgdGhpcy5fcHVzaENlbGxzKFxuICAgICAgICBjZWxscyxcbiAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyxcbiAgICAgICAgMCxcbiAgICAgICAgbGFzdEluaXRpYWxJbmRleCxcbiAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICApO1xuICAgICAgY29uc3QgZmlyc3RBZnRlckluaXRpYWwgPSBNYXRoLm1heChsYXN0SW5pdGlhbEluZGV4ICsgMSwgZmlyc3QpO1xuICAgICAgaWYgKCFpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQgJiYgZmlyc3QgPiBsYXN0SW5pdGlhbEluZGV4ICsgMSkge1xuICAgICAgICBsZXQgaW5zZXJ0ZWRTdGlja3lTcGFjZXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuc2l6ZSA+IDApIHtcbiAgICAgICAgICBjb25zdCBzdGlja3lPZmZzZXQgPSBMaXN0SGVhZGVyQ29tcG9uZW50ID8gMSA6IDA7XG4gICAgICAgICAgLy8gU2VlIGlmIHRoZXJlIGFyZSBhbnkgc3RpY2t5IGhlYWRlcnMgaW4gdGhlIHZpcnR1YWxpemVkIHNwYWNlIHRoYXQgd2UgbmVlZCB0byByZW5kZXIuXG4gICAgICAgICAgZm9yIChsZXQgaWkgPSBmaXJzdEFmdGVySW5pdGlhbCAtIDE7IGlpID4gbGFzdEluaXRpYWxJbmRleDsgaWktLSkge1xuICAgICAgICAgICAgaWYgKHN0aWNreUluZGljZXNGcm9tUHJvcHMuaGFzKGlpICsgc3RpY2t5T2Zmc2V0KSkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0QmxvY2sgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3RJbml0aWFsSW5kZXgpO1xuICAgICAgICAgICAgICBjb25zdCBzdGlja3lCbG9jayA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goaWkpO1xuICAgICAgICAgICAgICBjb25zdCBsZWFkU3BhY2UgPVxuICAgICAgICAgICAgICAgIHN0aWNreUJsb2NrLm9mZnNldCAtXG4gICAgICAgICAgICAgICAgaW5pdEJsb2NrLm9mZnNldCAtXG4gICAgICAgICAgICAgICAgKHRoaXMucHJvcHMuaW5pdGlhbFNjcm9sbEluZGV4ID8gMCA6IGluaXRCbG9jay5sZW5ndGgpO1xuICAgICAgICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgICAgICAgIDxWaWV3IGtleT1cIiRzdGlja3lfbGVhZFwiIHN0eWxlPXt7W3NwYWNlcktleV06IGxlYWRTcGFjZX19IC8+LFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLl9wdXNoQ2VsbHMoXG4gICAgICAgICAgICAgICAgY2VsbHMsXG4gICAgICAgICAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcyxcbiAgICAgICAgICAgICAgICBzdGlja3lJbmRpY2VzRnJvbVByb3BzLFxuICAgICAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgICAgIGlpLFxuICAgICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBjb25zdCB0cmFpbFNwYWNlID1cbiAgICAgICAgICAgICAgICB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGZpcnN0KS5vZmZzZXQgLVxuICAgICAgICAgICAgICAgIChzdGlja3lCbG9jay5vZmZzZXQgKyBzdGlja3lCbG9jay5sZW5ndGgpO1xuICAgICAgICAgICAgICBjZWxscy5wdXNoKFxuICAgICAgICAgICAgICAgIDxWaWV3IGtleT1cIiRzdGlja3lfdHJhaWxcIiBzdHlsZT17e1tzcGFjZXJLZXldOiB0cmFpbFNwYWNlfX0gLz4sXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIGluc2VydGVkU3RpY2t5U3BhY2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaW5zZXJ0ZWRTdGlja3lTcGFjZXIpIHtcbiAgICAgICAgICBjb25zdCBpbml0QmxvY2sgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3RJbml0aWFsSW5kZXgpO1xuICAgICAgICAgIGNvbnN0IGZpcnN0U3BhY2UgPVxuICAgICAgICAgICAgdGhpcy5fX2dldEZyYW1lTWV0cmljc0FwcHJveChmaXJzdCkub2Zmc2V0IC1cbiAgICAgICAgICAgIChpbml0QmxvY2sub2Zmc2V0ICsgaW5pdEJsb2NrLmxlbmd0aCk7XG4gICAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICAgIDxWaWV3IGtleT1cIiRsZWFkX3NwYWNlclwiIHN0eWxlPXt7W3NwYWNlcktleV06IGZpcnN0U3BhY2V9fSAvPixcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9wdXNoQ2VsbHMoXG4gICAgICAgIGNlbGxzLFxuICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgICBzdGlja3lJbmRpY2VzRnJvbVByb3BzLFxuICAgICAgICBmaXJzdEFmdGVySW5pdGlhbCxcbiAgICAgICAgbGFzdCxcbiAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICApO1xuICAgICAgaWYgKCF0aGlzLl9oYXNXYXJuZWQua2V5cyAmJiBfdXNlZEluZGV4Rm9yS2V5KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0OiBtaXNzaW5nIGtleXMgZm9yIGl0ZW1zLCBtYWtlIHN1cmUgdG8gc3BlY2lmeSBhIGtleSBvciBpZCBwcm9wZXJ0eSBvbiBlYWNoICcgK1xuICAgICAgICAgICAgJ2l0ZW0gb3IgcHJvdmlkZSBhIGN1c3RvbSBrZXlFeHRyYWN0b3IuJyxcbiAgICAgICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lLFxuICAgICAgICApO1xuICAgICAgICB0aGlzLl9oYXNXYXJuZWQua2V5cyA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoIWlzVmlydHVhbGl6YXRpb25EaXNhYmxlZCAmJiBsYXN0IDwgaXRlbUNvdW50IC0gMSkge1xuICAgICAgICBjb25zdCBsYXN0RnJhbWUgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3QpO1xuICAgICAgICAvLyBXaXRob3V0IGdldEl0ZW1MYXlvdXQsIHdlIGxpbWl0IG91ciB0YWlsIHNwYWNlciB0byB0aGUgX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXggdG9cbiAgICAgICAgLy8gcHJldmVudCB0aGUgdXNlciBmb3IgaHlwZXJzY3JvbGxpbmcgaW50byB1bi1tZWFzdXJlZCBhcmVhIGJlY2F1c2Ugb3RoZXJ3aXNlIGNvbnRlbnQgd2lsbFxuICAgICAgICAvLyBsaWtlbHkganVtcCBhcm91bmQgYXMgaXQgcmVuZGVycyBpbiBhYm92ZSB0aGUgdmlld3BvcnQuXG4gICAgICAgIGNvbnN0IGVuZCA9IHRoaXMucHJvcHMuZ2V0SXRlbUxheW91dFxuICAgICAgICAgID8gaXRlbUNvdW50IC0gMVxuICAgICAgICAgIDogTWF0aC5taW4oaXRlbUNvdW50IC0gMSwgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCk7XG4gICAgICAgIGNvbnN0IGVuZEZyYW1lID0gdGhpcy5fX2dldEZyYW1lTWV0cmljc0FwcHJveChlbmQpO1xuICAgICAgICBjb25zdCB0YWlsU3BhY2VyTGVuZ3RoID1cbiAgICAgICAgICBlbmRGcmFtZS5vZmZzZXQgK1xuICAgICAgICAgIGVuZEZyYW1lLmxlbmd0aCAtXG4gICAgICAgICAgKGxhc3RGcmFtZS5vZmZzZXQgKyBsYXN0RnJhbWUubGVuZ3RoKTtcbiAgICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgICA8VmlldyBrZXk9XCIkdGFpbF9zcGFjZXJcIiBzdHlsZT17e1tzcGFjZXJLZXldOiB0YWlsU3BhY2VyTGVuZ3RofX0gLz4sXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChMaXN0RW1wdHlDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQ6IFJlYWN0LkVsZW1lbnQ8YW55PiA9ICgoUmVhY3QuaXNWYWxpZEVsZW1lbnQoXG4gICAgICAgIExpc3RFbXB0eUNvbXBvbmVudCxcbiAgICAgICkgPyAoXG4gICAgICAgIExpc3RFbXB0eUNvbXBvbmVudFxuICAgICAgKSA6IChcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtub3QtYS1jb21wb25lbnRdXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGUtYXJnXVxuICAgICAgICA8TGlzdEVtcHR5Q29tcG9uZW50IC8+XG4gICAgICApKTogYW55KTtcbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIFJlYWN0LmNsb25lRWxlbWVudChlbGVtZW50LCB7XG4gICAgICAgICAga2V5OiAnJGVtcHR5JyxcbiAgICAgICAgICBvbkxheW91dDogZXZlbnQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fb25MYXlvdXRFbXB0eShldmVudCk7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5wcm9wcy5vbkxheW91dCkge1xuICAgICAgICAgICAgICBlbGVtZW50LnByb3BzLm9uTGF5b3V0KGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0eWxlOiBTdHlsZVNoZWV0LmNvbXBvc2UoaW52ZXJzaW9uU3R5bGUsIGVsZW1lbnQucHJvcHMuc3R5bGUpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfVxuICAgIGlmIChMaXN0Rm9vdGVyQ29tcG9uZW50KSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoTGlzdEZvb3RlckNvbXBvbmVudCkgPyAoXG4gICAgICAgIExpc3RGb290ZXJDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbbm90LWEtY29tcG9uZW50XVxuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ11cbiAgICAgICAgPExpc3RGb290ZXJDb21wb25lbnQgLz5cbiAgICAgICk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldEZvb3RlckNlbGxLZXkoKX1cbiAgICAgICAgICBrZXk9XCIkZm9vdGVyXCI+XG4gICAgICAgICAgPFZpZXdcbiAgICAgICAgICAgIG9uTGF5b3V0PXt0aGlzLl9vbkxheW91dEZvb3Rlcn1cbiAgICAgICAgICAgIHN0eWxlPXtTdHlsZVNoZWV0LmNvbXBvc2UoXG4gICAgICAgICAgICAgIGludmVyc2lvblN0eWxlLFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLkxpc3RGb290ZXJDb21wb25lbnRTdHlsZSxcbiAgICAgICAgICAgICl9PlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9WaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyPixcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHNjcm9sbFByb3BzID0ge1xuICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgIG9uQ29udGVudFNpemVDaGFuZ2U6IHRoaXMuX29uQ29udGVudFNpemVDaGFuZ2UsXG4gICAgICBvbkxheW91dDogdGhpcy5fb25MYXlvdXQsXG4gICAgICBvblNjcm9sbDogdGhpcy5fb25TY3JvbGwsXG4gICAgICBvblNjcm9sbEJlZ2luRHJhZzogdGhpcy5fb25TY3JvbGxCZWdpbkRyYWcsXG4gICAgICBvblNjcm9sbEVuZERyYWc6IHRoaXMuX29uU2Nyb2xsRW5kRHJhZyxcbiAgICAgIG9uTW9tZW50dW1TY3JvbGxCZWdpbjogdGhpcy5fb25Nb21lbnR1bVNjcm9sbEJlZ2luLFxuICAgICAgb25Nb21lbnR1bVNjcm9sbEVuZDogdGhpcy5fb25Nb21lbnR1bVNjcm9sbEVuZCxcbiAgICAgIHNjcm9sbEV2ZW50VGhyb3R0bGU6IHNjcm9sbEV2ZW50VGhyb3R0bGVPckRlZmF1bHQoXG4gICAgICAgIHRoaXMucHJvcHMuc2Nyb2xsRXZlbnRUaHJvdHRsZSxcbiAgICAgICksIC8vIFRPRE86IEFuZHJvaWQgc3VwcG9ydFxuICAgICAgaW52ZXJ0U3RpY2t5SGVhZGVyczpcbiAgICAgICAgdGhpcy5wcm9wcy5pbnZlcnRTdGlja3lIZWFkZXJzICE9PSB1bmRlZmluZWRcbiAgICAgICAgICA/IHRoaXMucHJvcHMuaW52ZXJ0U3RpY2t5SGVhZGVyc1xuICAgICAgICAgIDogdGhpcy5wcm9wcy5pbnZlcnRlZCxcbiAgICAgIHN0aWNreUhlYWRlckluZGljZXMsXG4gICAgICBzdHlsZTogaW52ZXJzaW9uU3R5bGVcbiAgICAgICAgPyBbaW52ZXJzaW9uU3R5bGUsIHRoaXMucHJvcHMuc3R5bGVdXG4gICAgICAgIDogdGhpcy5wcm9wcy5zdHlsZSxcbiAgICB9O1xuXG4gICAgdGhpcy5faGFzTW9yZSA9XG4gICAgICB0aGlzLnN0YXRlLmxhc3QgPCB0aGlzLnByb3BzLmdldEl0ZW1Db3VudCh0aGlzLnByb3BzLmRhdGEpIC0gMTtcblxuICAgIGNvbnN0IGlubmVyUmV0ID0gKFxuICAgICAgPFZpcnR1YWxpemVkTGlzdENvbnRleHRQcm92aWRlclxuICAgICAgICB2YWx1ZT17e1xuICAgICAgICAgIGNlbGxLZXk6IG51bGwsXG4gICAgICAgICAgZ2V0U2Nyb2xsTWV0cmljczogdGhpcy5fZ2V0U2Nyb2xsTWV0cmljcyxcbiAgICAgICAgICBob3Jpem9udGFsOiBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbCksXG4gICAgICAgICAgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZjogdGhpcy5fZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZixcbiAgICAgICAgICBnZXROZXN0ZWRDaGlsZFN0YXRlOiB0aGlzLl9nZXROZXN0ZWRDaGlsZFN0YXRlLFxuICAgICAgICAgIHJlZ2lzdGVyQXNOZXN0ZWRDaGlsZDogdGhpcy5fcmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgICAgIHVucmVnaXN0ZXJBc05lc3RlZENoaWxkOiB0aGlzLl91bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCxcbiAgICAgICAgICBkZWJ1Z0luZm86IHRoaXMuX2dldERlYnVnSW5mbygpLFxuICAgICAgICB9fT5cbiAgICAgICAge1JlYWN0LmNsb25lRWxlbWVudChcbiAgICAgICAgICAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlbmRlclNjcm9sbENvbXBvbmVudCB8fFxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFJlbmRlclNjcm9sbENvbXBvbmVudFxuICAgICAgICAgICkoc2Nyb2xsUHJvcHMpLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlZjogdGhpcy5fY2FwdHVyZVNjcm9sbFJlZixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNlbGxzLFxuICAgICAgICApfVxuICAgICAgPC9WaXJ0dWFsaXplZExpc3RDb250ZXh0UHJvdmlkZXI+XG4gICAgKTtcbiAgICBsZXQgcmV0OiBSZWFjdC5Ob2RlID0gaW5uZXJSZXQ7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHJldCA9IChcbiAgICAgICAgPFNjcm9sbFZpZXcuQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgICB7c2Nyb2xsQ29udGV4dCA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNjcm9sbENvbnRleHQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAhc2Nyb2xsQ29udGV4dC5ob3Jpem9udGFsID09PVxuICAgICAgICAgICAgICAgICFob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbCkgJiZcbiAgICAgICAgICAgICAgIXRoaXMuX2hhc1dhcm5lZC5uZXN0aW5nICYmXG4gICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9PSBudWxsXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgLy8gVE9ETyAoVDQ2NTQ3MDQ0KTogdXNlIFJlYWN0Lndhcm4gb25jZSAxNi45IGlzIHN5bmMnZDogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L3B1bGwvMTUxNzBcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0cyBzaG91bGQgbmV2ZXIgYmUgbmVzdGVkIGluc2lkZSBwbGFpbiBTY3JvbGxWaWV3cyB3aXRoIHRoZSBzYW1lICcgK1xuICAgICAgICAgICAgICAgICAgJ29yaWVudGF0aW9uIGJlY2F1c2UgaXQgY2FuIGJyZWFrIHdpbmRvd2luZyBhbmQgb3RoZXIgZnVuY3Rpb25hbGl0eSAtIHVzZSBhbm90aGVyICcgK1xuICAgICAgICAgICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdC1iYWNrZWQgY29udGFpbmVyIGluc3RlYWQuJyxcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgdGhpcy5faGFzV2FybmVkLm5lc3RpbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlubmVyUmV0O1xuICAgICAgICAgIH19XG4gICAgICAgIDwvU2Nyb2xsVmlldy5Db250ZXh0LkNvbnN1bWVyPlxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMuZGVidWcpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuZGVidWd9PlxuICAgICAgICAgIHtyZXR9XG4gICAgICAgICAge3RoaXMuX3JlbmRlckRlYnVnT3ZlcmxheSgpfVxuICAgICAgICA8L1ZpZXc+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IFByb3BzKSB7XG4gICAgY29uc3Qge2RhdGEsIGV4dHJhRGF0YX0gPSB0aGlzLnByb3BzO1xuICAgIGlmIChkYXRhICE9PSBwcmV2UHJvcHMuZGF0YSB8fCBleHRyYURhdGEgIT09IHByZXZQcm9wcy5leHRyYURhdGEpIHtcbiAgICAgIC8vIGNsZWFyIHRoZSB2aWV3YWJsZUluZGljZXMgY2FjaGUgdG8gYWxzbyB0cmlnZ2VyXG4gICAgICAvLyB0aGUgb25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCBjYWxsYmFjayB3aXRoIHRoZSBuZXcgZGF0YVxuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLnJlc2V0Vmlld2FibGVJbmRpY2VzKCk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gVGhlIGB0aGlzLl9oaVByaUluUHJvZ3Jlc3NgIGlzIGd1YXJhbnRlZWluZyBhIGhpUHJpIGNlbGwgdXBkYXRlIHdpbGwgb25seSBoYXBwZW5cbiAgICAvLyBvbmNlIHBlciBmaWJlciB1cGRhdGUuIFRoZSBgX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZWAgd2lsbCBzZXQgaXQgdG8gdHJ1ZVxuICAgIC8vIGlmIGEgaGlQcmkgdXBkYXRlIG5lZWRzIHRvIHBlcmZvcm0uIElmIGBjb21wb25lbnREaWRVcGRhdGVgIGlzIHRyaWdnZXJlZCB3aXRoXG4gICAgLy8gYHRoaXMuX2hpUHJpSW5Qcm9ncmVzcz10cnVlYCwgbWVhbnMgaXQncyB0cmlnZ2VyZWQgYnkgdGhlIGhpUHJpIHVwZGF0ZS4gVGhlXG4gICAgLy8gYF9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGVgIHdpbGwgY2hlY2sgdGhpcyBjb25kaXRpb24gYW5kIG5vdCBwZXJmb3JtXG4gICAgLy8gYW5vdGhlciBoaVByaSB1cGRhdGUuXG4gICAgY29uc3QgaGlQcmlJblByb2dyZXNzID0gdGhpcy5faGlQcmlJblByb2dyZXNzO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIC8vIE1ha2Ugc3VyZSBzZXR0aW5nIGB0aGlzLl9oaVByaUluUHJvZ3Jlc3NgIGJhY2sgdG8gZmFsc2UgYWZ0ZXIgYGNvbXBvbmVudERpZFVwZGF0ZWBcbiAgICAvLyBpcyB0cmlnZ2VyZWQgd2l0aCBgdGhpcy5faGlQcmlJblByb2dyZXNzID0gdHJ1ZWBcbiAgICBpZiAoaGlQcmlJblByb2dyZXNzKSB7XG4gICAgICB0aGlzLl9oaVByaUluUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBfYXZlcmFnZUNlbGxMZW5ndGggPSAwO1xuICAvLyBNYXBzIGEgY2VsbCBrZXkgdG8gdGhlIHNldCBvZiBrZXlzIGZvciBhbGwgb3V0ZXJtb3N0IGNoaWxkIGxpc3RzIHdpdGhpbiB0aGF0IGNlbGxcbiAgX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzOiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj4gPSBuZXcgTWFwKCk7XG4gIF9jZWxsUmVmczoge1tzdHJpbmddOiBudWxsIHwgQ2VsbFJlbmRlcmVyfSA9IHt9O1xuICBfZmlsbFJhdGVIZWxwZXI6IEZpbGxSYXRlSGVscGVyO1xuICBfZnJhbWVzOiB7XG4gICAgW3N0cmluZ106IHtcbiAgICAgIGluTGF5b3V0PzogYm9vbGVhbixcbiAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICBsZW5ndGg6IG51bWJlcixcbiAgICAgIG9mZnNldDogbnVtYmVyLFxuICAgIH0sXG4gIH0gPSB7fTtcbiAgX2Zvb3Rlckxlbmd0aCA9IDA7XG4gIC8vIFVzZWQgZm9yIHByZXZlbnRpbmcgc2Nyb2xsVG9JbmRleCBmcm9tIGJlaW5nIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBmb3IgaW5pdGlhbFNjcm9sbEluZGV4XG4gIF9oYXNUcmlnZ2VyZWRJbml0aWFsU2Nyb2xsVG9JbmRleCA9IGZhbHNlO1xuICBfaGFzSW50ZXJhY3RlZCA9IGZhbHNlO1xuICBfaGFzTW9yZSA9IGZhbHNlO1xuICBfaGFzV2FybmVkOiB7W3N0cmluZ106IGJvb2xlYW59ID0ge307XG4gIF9oZWFkZXJMZW5ndGggPSAwO1xuICBfaGlQcmlJblByb2dyZXNzOiBib29sZWFuID0gZmFsc2U7IC8vIGZsYWcgdG8gcHJldmVudCBpbmZpbml0ZSBoaVByaSBjZWxsIGxpbWl0IHVwZGF0ZVxuICBfaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IDA7XG4gIF9pbmRpY2VzVG9LZXlzOiBNYXA8bnVtYmVyLCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuICBfbmVzdGVkQ2hpbGRMaXN0czogTWFwPFxuICAgIHN0cmluZyxcbiAgICB7XG4gICAgICByZWY6ID9WaXJ0dWFsaXplZExpc3QsXG4gICAgICBzdGF0ZTogP0NoaWxkTGlzdFN0YXRlLFxuICAgICAgLi4uXG4gICAgfSxcbiAgPiA9IG5ldyBNYXAoKTtcbiAgX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3Q6IG51bWJlciA9IDA7XG4gIF9wcmV2UGFyZW50T2Zmc2V0OiBudW1iZXIgPSAwO1xuICBfc2Nyb2xsTWV0cmljcyA9IHtcbiAgICBjb250ZW50TGVuZ3RoOiAwLFxuICAgIGRPZmZzZXQ6IDAsXG4gICAgZHQ6IDEwLFxuICAgIG9mZnNldDogMCxcbiAgICB0aW1lc3RhbXA6IDAsXG4gICAgdmVsb2NpdHk6IDAsXG4gICAgdmlzaWJsZUxlbmd0aDogMCxcbiAgICB6b29tU2NhbGU6IDEsXG4gIH07XG4gIF9zY3JvbGxSZWY6ID9SZWFjdC5FbGVtZW50UmVmPGFueT4gPSBudWxsO1xuICBfc2VudEVuZEZvckNvbnRlbnRMZW5ndGggPSAwO1xuICBfdG90YWxDZWxsTGVuZ3RoID0gMDtcbiAgX3RvdGFsQ2VsbHNNZWFzdXJlZCA9IDA7XG4gIF91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlcjogQmF0Y2hpbmF0b3I7XG4gIF92aWV3YWJpbGl0eVR1cGxlczogQXJyYXk8Vmlld2FiaWxpdHlIZWxwZXJDYWxsYmFja1R1cGxlPiA9IFtdO1xuXG4gIC8qICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF0gVGhlIHR5cGUgYW5ub3RhdGlvbihzKSByZXF1aXJlZCBieSBGbG93J3NcbiAgICogTFRJIHVwZGF0ZSBjb3VsZCBub3QgYmUgYWRkZWQgdmlhIGNvZGVtb2QgKi9cbiAgX2NhcHR1cmVTY3JvbGxSZWYgPSByZWYgPT4ge1xuICAgIHRoaXMuX3Njcm9sbFJlZiA9IHJlZjtcbiAgfTtcblxuICBfY29tcHV0ZUJsYW5rbmVzcygpIHtcbiAgICB0aGlzLl9maWxsUmF0ZUhlbHBlci5jb21wdXRlQmxhbmtuZXNzKFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICAgIHRoaXMuc3RhdGUsXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLFxuICAgICk7XG4gIH1cblxuICAvKiAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdIFRoZSB0eXBlIGFubm90YXRpb24ocykgcmVxdWlyZWQgYnkgRmxvdydzXG4gICAqIExUSSB1cGRhdGUgY291bGQgbm90IGJlIGFkZGVkIHZpYSBjb2RlbW9kICovXG4gIF9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IG9uUmVmcmVzaCA9IHByb3BzLm9uUmVmcmVzaDtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgIHJldHVybiA8VmlldyB7Li4ucHJvcHN9IC8+O1xuICAgIH0gZWxzZSBpZiAob25SZWZyZXNoKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHR5cGVvZiBwcm9wcy5yZWZyZXNoaW5nID09PSAnYm9vbGVhbicsXG4gICAgICAgICdgcmVmcmVzaGluZ2AgcHJvcCBtdXN0IGJlIHNldCBhcyBhIGJvb2xlYW4gaW4gb3JkZXIgdG8gdXNlIGBvblJlZnJlc2hgLCBidXQgZ290IGAnICtcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9wcy5yZWZyZXNoaW5nID8/ICd1bmRlZmluZWQnKSArXG4gICAgICAgICAgJ2AnLFxuICAgICAgKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSBJbnZhbGlkIHByb3AgdXNhZ2VcbiAgICAgICAgPFNjcm9sbFZpZXdcbiAgICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAgICAgcmVmcmVzaENvbnRyb2w9e1xuICAgICAgICAgICAgcHJvcHMucmVmcmVzaENvbnRyb2wgPT0gbnVsbCA/IChcbiAgICAgICAgICAgICAgPFJlZnJlc2hDb250cm9sXG4gICAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV1cbiAgICAgICAgICAgICAgICByZWZyZXNoaW5nPXtwcm9wcy5yZWZyZXNoaW5nfVxuICAgICAgICAgICAgICAgIG9uUmVmcmVzaD17b25SZWZyZXNofVxuICAgICAgICAgICAgICAgIHByb2dyZXNzVmlld09mZnNldD17cHJvcHMucHJvZ3Jlc3NWaWV3T2Zmc2V0fVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgcHJvcHMucmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIC8+XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gSW52YWxpZCBwcm9wIHVzYWdlXG4gICAgICByZXR1cm4gPFNjcm9sbFZpZXcgey4uLnByb3BzfSAvPjtcbiAgICB9XG4gIH07XG5cbiAgX29uQ2VsbExheW91dCA9IChlOiBMYXlvdXRFdmVudCwgY2VsbEtleTogc3RyaW5nLCBpbmRleDogbnVtYmVyKTogdm9pZCA9PiB7XG4gICAgY29uc3QgbGF5b3V0ID0gZS5uYXRpdmVFdmVudC5sYXlvdXQ7XG4gICAgY29uc3QgbmV4dCA9IHtcbiAgICAgIG9mZnNldDogdGhpcy5fc2VsZWN0T2Zmc2V0KGxheW91dCksXG4gICAgICBsZW5ndGg6IHRoaXMuX3NlbGVjdExlbmd0aChsYXlvdXQpLFxuICAgICAgaW5kZXgsXG4gICAgICBpbkxheW91dDogdHJ1ZSxcbiAgICB9O1xuICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9mcmFtZXNbY2VsbEtleV07XG4gICAgaWYgKFxuICAgICAgIWN1cnIgfHxcbiAgICAgIG5leHQub2Zmc2V0ICE9PSBjdXJyLm9mZnNldCB8fFxuICAgICAgbmV4dC5sZW5ndGggIT09IGN1cnIubGVuZ3RoIHx8XG4gICAgICBpbmRleCAhPT0gY3Vyci5pbmRleFxuICAgICkge1xuICAgICAgdGhpcy5fdG90YWxDZWxsTGVuZ3RoICs9IG5leHQubGVuZ3RoIC0gKGN1cnIgPyBjdXJyLmxlbmd0aCA6IDApO1xuICAgICAgdGhpcy5fdG90YWxDZWxsc01lYXN1cmVkICs9IGN1cnIgPyAwIDogMTtcbiAgICAgIHRoaXMuX2F2ZXJhZ2VDZWxsTGVuZ3RoID1cbiAgICAgICAgdGhpcy5fdG90YWxDZWxsTGVuZ3RoIC8gdGhpcy5fdG90YWxDZWxsc01lYXN1cmVkO1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldID0gbmV4dDtcbiAgICAgIHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXggPSBNYXRoLm1heChcbiAgICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCxcbiAgICAgICAgaW5kZXgsXG4gICAgICApO1xuICAgICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZyYW1lc1tjZWxsS2V5XS5pbkxheW91dCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5fdHJpZ2dlclJlbWVhc3VyZUZvckNoaWxkTGlzdHNJbkNlbGwoY2VsbEtleSk7XG5cbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLmRhdGEpO1xuICB9O1xuXG4gIF9vbkNlbGxVbm1vdW50ID0gKGNlbGxLZXk6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IGN1cnIgPSB0aGlzLl9mcmFtZXNbY2VsbEtleV07XG4gICAgaWYgKGN1cnIpIHtcbiAgICAgIHRoaXMuX2ZyYW1lc1tjZWxsS2V5XSA9IHsuLi5jdXJyLCBpbkxheW91dDogZmFsc2V9O1xuICAgIH1cbiAgfTtcblxuICBfdHJpZ2dlclJlbWVhc3VyZUZvckNoaWxkTGlzdHNJbkNlbGwoY2VsbEtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgY2hpbGRMaXN0S2V5cyA9IHRoaXMuX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzLmdldChjZWxsS2V5KTtcbiAgICBpZiAoY2hpbGRMaXN0S2V5cykge1xuICAgICAgZm9yIChsZXQgY2hpbGRLZXkgb2YgY2hpbGRMaXN0S2V5cykge1xuICAgICAgICBjb25zdCBjaGlsZExpc3QgPSB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmdldChjaGlsZEtleSk7XG4gICAgICAgIGNoaWxkTGlzdCAmJlxuICAgICAgICAgIGNoaWxkTGlzdC5yZWYgJiZcbiAgICAgICAgICBjaGlsZExpc3QucmVmLm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBtZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk6IHZvaWQge1xuICAgIC8vIFRPRE8gKFQzNTU3NDUzOCk6IGZpbmROb2RlSGFuZGxlIHNvbWV0aW1lcyBjcmFzaGVzIHdpdGggXCJVbmFibGUgdG8gZmluZFxuICAgIC8vIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudFwiIGR1cmluZyBzY3JvbGxpbmdcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLl9zY3JvbGxSZWYpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gV2UgYXJlIGFzc3VtaW5nIHRoYXQgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZigpLmdldFNjcm9sbFJlZigpXG4gICAgICAvLyBpcyBhIG5vbi1udWxsIHJlZmVyZW5jZSB0byBhIFNjcm9sbFZpZXdcbiAgICAgIHRoaXMuX3Njcm9sbFJlZi5tZWFzdXJlTGF5b3V0KFxuICAgICAgICB0aGlzLmNvbnRleHQuZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZigpLmdldFNjcm9sbFJlZigpLFxuICAgICAgICAoeCwgeSwgd2lkdGgsIGhlaWdodCkgPT4ge1xuICAgICAgICAgIHRoaXMuX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3QgPSB0aGlzLl9zZWxlY3RPZmZzZXQoe3gsIHl9KTtcbiAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoe1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3Qgc2Nyb2xsTWV0cmljcyA9IHRoaXMuX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzKFxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmdldFNjcm9sbE1ldHJpY3MoKSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgbWV0cmljc0NoYW5nZWQgPVxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoICE9PSBzY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggfHxcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0ICE9PSBzY3JvbGxNZXRyaWNzLm9mZnNldDtcblxuICAgICAgICAgIGlmIChtZXRyaWNzQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoID0gc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQgPSBzY3JvbGxNZXRyaWNzLm9mZnNldDtcblxuICAgICAgICAgICAgLy8gSWYgbWV0cmljcyBvZiB0aGUgc2Nyb2xsVmlldyBjaGFuZ2VkLCB0aGVuIHdlIHRyaWdnZXJlZCByZW1lYXN1cmUgZm9yIGNoaWxkIGxpc3RcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSBWaXJ0dWFsaXplZExpc3QgaGFzIHRoZSByaWdodCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIHRoaXMuX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzLmZvckVhY2goY2hpbGRMaXN0S2V5cyA9PiB7XG4gICAgICAgICAgICAgIGlmIChjaGlsZExpc3RLZXlzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRLZXkgb2YgY2hpbGRMaXN0S2V5cykge1xuICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRMaXN0ID0gdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5nZXQoY2hpbGRLZXkpO1xuICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0ICYmXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdC5yZWYgJiZcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRMaXN0LnJlZi5tZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIlZpcnR1YWxpemVkTGlzdDogRW5jb3VudGVyZWQgYW4gZXJyb3Igd2hpbGUgbWVhc3VyaW5nIGEgbGlzdCdzXCIgK1xuICAgICAgICAgICAgICAnIG9mZnNldCBmcm9tIGl0cyBjb250YWluaW5nIFZpcnR1YWxpemVkTGlzdC4nLFxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICdtZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0IHRocmV3IGFuIGVycm9yJyxcbiAgICAgICAgZXJyb3Iuc3RhY2ssXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIF9vbkxheW91dCA9IChlOiBMYXlvdXRFdmVudCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgLy8gTmVlZCB0byBhZGp1c3Qgb3VyIHNjcm9sbCBtZXRyaWNzIHRvIGJlIHJlbGF0aXZlIHRvIG91ciBjb250YWluaW5nXG4gICAgICAvLyBWaXJ0dWFsaXplZExpc3QgYmVmb3JlIHdlIGNhbiBtYWtlIGNsYWltcyBhYm91dCBsaXN0IGl0ZW0gdmlld2FiaWxpdHlcbiAgICAgIHRoaXMubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoXG4gICAgICAgIGUubmF0aXZlRXZlbnQubGF5b3V0LFxuICAgICAgKTtcbiAgICB9XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICB9O1xuXG4gIF9vbkxheW91dEVtcHR5ID0gKGU6IExheW91dEV2ZW50KSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkxheW91dCAmJiB0aGlzLnByb3BzLm9uTGF5b3V0KGUpO1xuICB9O1xuXG4gIF9nZXRGb290ZXJDZWxsS2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuX2dldENlbGxLZXkoKSArICctZm9vdGVyJztcbiAgfVxuXG4gIF9vbkxheW91dEZvb3RlciA9IChlOiBMYXlvdXRFdmVudCkgPT4ge1xuICAgIHRoaXMuX3RyaWdnZXJSZW1lYXN1cmVGb3JDaGlsZExpc3RzSW5DZWxsKHRoaXMuX2dldEZvb3RlckNlbGxLZXkoKSk7XG4gICAgdGhpcy5fZm9vdGVyTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0KTtcbiAgfTtcblxuICBfb25MYXlvdXRIZWFkZXIgPSAoZTogTGF5b3V0RXZlbnQpID0+IHtcbiAgICB0aGlzLl9oZWFkZXJMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXQpO1xuICB9O1xuXG4gIF9yZW5kZXJEZWJ1Z092ZXJsYXkoKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplID1cbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCAvXG4gICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoIHx8IDEpO1xuICAgIGNvbnN0IGZyYW1lc0luTGF5b3V0ID0gW107XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgaXRlbUNvdW50OyBpaSsrKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goaWkpO1xuICAgICAgLyogJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddICg+PTAuNjguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50XG4gICAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42OCB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGVcbiAgICAgICAqIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgaWYgKGZyYW1lLmluTGF5b3V0KSB7XG4gICAgICAgIGZyYW1lc0luTGF5b3V0LnB1c2goZnJhbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3aW5kb3dUb3AgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHRoaXMuc3RhdGUuZmlyc3QpLm9mZnNldDtcbiAgICBjb25zdCBmcmFtZUxhc3QgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHRoaXMuc3RhdGUubGFzdCk7XG4gICAgY29uc3Qgd2luZG93TGVuID0gZnJhbWVMYXN0Lm9mZnNldCArIGZyYW1lTGFzdC5sZW5ndGggLSB3aW5kb3dUb3A7XG4gICAgY29uc3QgdmlzVG9wID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG4gICAgY29uc3QgdmlzTGVuID0gdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsIHN0eWxlcy5kZWJ1Z092ZXJsYXldfT5cbiAgICAgICAge2ZyYW1lc0luTGF5b3V0Lm1hcCgoZiwgaWkpID0+IChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXsnZicgKyBpaX1cbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlCYXNlLFxuICAgICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3A6IGYub2Zmc2V0ICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZi5sZW5ndGggKiBub3JtYWxpemUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5QmFzZSxcbiAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlGcmFtZUxhc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogd2luZG93VG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvd0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWVWaXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogdmlzVG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHZpc0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9XG5cbiAgX3NlbGVjdExlbmd0aChcbiAgICBtZXRyaWNzOiAkUmVhZE9ubHk8e1xuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfT4sXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuICFob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgID8gbWV0cmljcy5oZWlnaHRcbiAgICAgIDogbWV0cmljcy53aWR0aDtcbiAgfVxuXG4gIF9zZWxlY3RPZmZzZXQoXG4gICAgbWV0cmljczogJFJlYWRPbmx5PHtcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0+LFxuICApOiBudW1iZXIge1xuICAgIHJldHVybiAhaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpID8gbWV0cmljcy55IDogbWV0cmljcy54O1xuICB9XG5cbiAgX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpIHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50LCBvbkVuZFJlYWNoZWQsIG9uRW5kUmVhY2hlZFRocmVzaG9sZH0gPVxuICAgICAgdGhpcy5wcm9wcztcbiAgICBjb25zdCB7Y29udGVudExlbmd0aCwgdmlzaWJsZUxlbmd0aCwgb2Zmc2V0fSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgbGV0IGRpc3RhbmNlRnJvbUVuZCA9IGNvbnRlbnRMZW5ndGggLSB2aXNpYmxlTGVuZ3RoIC0gb2Zmc2V0O1xuXG4gICAgLy8gRXNwZWNpYWxseSB3aGVuIG9FUlQgaXMgemVybyBpdCdzIG5lY2Vzc2FyeSB0byAnZmxvb3InIHZlcnkgc21hbGwgZGlzdGFuY2VGcm9tRW5kIHZhbHVlcyB0byBiZSAwXG4gICAgLy8gc2luY2UgZGVib3VuY2luZyBjYXVzZXMgdXMgdG8gbm90IGZpcmUgdGhpcyBldmVudCBmb3IgZXZlcnkgc2luZ2xlIFwicGl4ZWxcIiB3ZSBzY3JvbGwgYW5kIGNhbiB0aHVzXG4gICAgLy8gYmUgYXQgdGhlIFwiZW5kXCIgb2YgdGhlIGxpc3Qgd2l0aCBhIGRpc3RhbmNlRnJvbUVuZCBhcHByb3hpbWF0aW5nIDAgYnV0IG5vdCBxdWl0ZSB0aGVyZS5cbiAgICBpZiAoZGlzdGFuY2VGcm9tRW5kIDwgT05fRU5EX1JFQUNIRURfRVBTSUxPTikge1xuICAgICAgZGlzdGFuY2VGcm9tRW5kID0gMDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBUMTIxMTcyMTcyIExvb2sgaW50byB3aHkgd2UncmUgXCJkZWZhdWx0aW5nXCIgdG8gYSB0aHJlc2hvbGQgb2YgMiB3aGVuIG9FUlQgaXMgbm90IHByZXNlbnRcbiAgICBjb25zdCB0aHJlc2hvbGQgPVxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkICE9IG51bGwgPyBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoIDogMjtcbiAgICBpZiAoXG4gICAgICBvbkVuZFJlYWNoZWQgJiZcbiAgICAgIHRoaXMuc3RhdGUubGFzdCA9PT0gZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSAmJlxuICAgICAgZGlzdGFuY2VGcm9tRW5kIDw9IHRocmVzaG9sZCAmJlxuICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoICE9PSB0aGlzLl9zZW50RW5kRm9yQ29udGVudExlbmd0aFxuICAgICkge1xuICAgICAgLy8gT25seSBjYWxsIG9uRW5kUmVhY2hlZCBvbmNlIGZvciBhIGdpdmVuIGNvbnRlbnQgbGVuZ3RoXG4gICAgICB0aGlzLl9zZW50RW5kRm9yQ29udGVudExlbmd0aCA9IHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aDtcbiAgICAgIG9uRW5kUmVhY2hlZCh7ZGlzdGFuY2VGcm9tRW5kfSk7XG4gICAgfSBlbHNlIGlmIChkaXN0YW5jZUZyb21FbmQgPiB0aHJlc2hvbGQpIHtcbiAgICAgIC8vIElmIHRoZSB1c2VyIHNjcm9sbHMgYXdheSBmcm9tIHRoZSBlbmQgYW5kIGJhY2sgYWdhaW4gY2F1c2VcbiAgICAgIC8vIGFuIG9uRW5kUmVhY2hlZCB0byBiZSB0cmlnZ2VyZWQgYWdhaW5cbiAgICAgIHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cblxuICBfb25Db250ZW50U2l6ZUNoYW5nZSA9ICh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikgPT4ge1xuICAgIGlmIChcbiAgICAgIHdpZHRoID4gMCAmJlxuICAgICAgaGVpZ2h0ID4gMCAmJlxuICAgICAgdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggIT0gbnVsbCAmJlxuICAgICAgdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggPiAwICYmXG4gICAgICAhdGhpcy5faGFzVHJpZ2dlcmVkSW5pdGlhbFNjcm9sbFRvSW5kZXhcbiAgICApIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmNvbnRlbnRPZmZzZXQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNjcm9sbFRvSW5kZXgoe1xuICAgICAgICAgIGFuaW1hdGVkOiBmYWxzZSxcbiAgICAgICAgICBpbmRleDogdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXgsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5faGFzVHJpZ2dlcmVkSW5pdGlhbFNjcm9sbFRvSW5kZXggPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5vbkNvbnRlbnRTaXplQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uQ29udGVudFNpemVDaGFuZ2Uod2lkdGgsIGhlaWdodCk7XG4gICAgfVxuICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuY29udGVudExlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aCh7aGVpZ2h0LCB3aWR0aH0pO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICB9O1xuXG4gIC8qIFRyYW5zbGF0ZXMgbWV0cmljcyBmcm9tIGEgc2Nyb2xsIGV2ZW50IGluIGEgcGFyZW50IFZpcnR1YWxpemVkTGlzdCBpbnRvXG4gICAqIGNvb3JkaW5hdGVzIHJlbGF0aXZlIHRvIHRoZSBjaGlsZCBsaXN0LlxuICAgKi9cbiAgX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzID0gKG1ldHJpY3M6IHtcbiAgICB2aXNpYmxlTGVuZ3RoOiBudW1iZXIsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgLi4uXG4gIH0pID0+IHtcbiAgICAvLyBPZmZzZXQgb2YgdGhlIHRvcCBvZiB0aGUgbmVzdGVkIGxpc3QgcmVsYXRpdmUgdG8gdGhlIHRvcCBvZiBpdHMgcGFyZW50J3Mgdmlld3BvcnRcbiAgICBjb25zdCBvZmZzZXQgPSBtZXRyaWNzLm9mZnNldCAtIHRoaXMuX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3Q7XG4gICAgLy8gQ2hpbGQncyB2aXNpYmxlIGxlbmd0aCBpcyB0aGUgc2FtZSBhcyBpdHMgcGFyZW50J3NcbiAgICBjb25zdCB2aXNpYmxlTGVuZ3RoID0gbWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuICAgIGNvbnN0IGRPZmZzZXQgPSBvZmZzZXQgLSB0aGlzLl9zY3JvbGxNZXRyaWNzLm9mZnNldDtcbiAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgb2Zmc2V0LFxuICAgICAgZE9mZnNldCxcbiAgICB9O1xuICB9O1xuXG4gIF9vblNjcm9sbCA9IChlOiBPYmplY3QpID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25TY3JvbGwoZSk7XG4gICAgfSk7XG4gICAgaWYgKHRoaXMucHJvcHMub25TY3JvbGwpIHtcbiAgICAgIHRoaXMucHJvcHMub25TY3JvbGwoZSk7XG4gICAgfVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IGUudGltZVN0YW1wO1xuICAgIGxldCB2aXNpYmxlTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0TWVhc3VyZW1lbnQpO1xuICAgIGxldCBjb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQuY29udGVudFNpemUpO1xuICAgIGxldCBvZmZzZXQgPSB0aGlzLl9zZWxlY3RPZmZzZXQoZS5uYXRpdmVFdmVudC5jb250ZW50T2Zmc2V0KTtcbiAgICBsZXQgZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0O1xuXG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICBpZiAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID09PSAwKSB7XG4gICAgICAgIC8vIElnbm9yZSBzY3JvbGwgZXZlbnRzIHVudGlsIG9uTGF5b3V0IGhhcyBiZWVuIGNhbGxlZCBhbmQgd2VcbiAgICAgICAgLy8ga25vdyBvdXIgb2Zmc2V0IGZyb20gb3VyIG9mZnNldCBmcm9tIG91ciBwYXJlbnRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgKHt2aXNpYmxlTGVuZ3RoLCBjb250ZW50TGVuZ3RoLCBvZmZzZXQsIGRPZmZzZXR9ID1cbiAgICAgICAgdGhpcy5fY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3Moe1xuICAgICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgICAgb2Zmc2V0LFxuICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgY29uc3QgZHQgPSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcFxuICAgICAgPyBNYXRoLm1heCgxLCB0aW1lc3RhbXAgLSB0aGlzLl9zY3JvbGxNZXRyaWNzLnRpbWVzdGFtcClcbiAgICAgIDogMTtcbiAgICBjb25zdCB2ZWxvY2l0eSA9IGRPZmZzZXQgLyBkdDtcblxuICAgIGlmIChcbiAgICAgIGR0ID4gNTAwICYmXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmR0ID4gNTAwICYmXG4gICAgICBjb250ZW50TGVuZ3RoID4gNSAqIHZpc2libGVMZW5ndGggJiZcbiAgICAgICF0aGlzLl9oYXNXYXJuZWQucGVyZlxuICAgICkge1xuICAgICAgaW5mb0xvZyhcbiAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogWW91IGhhdmUgYSBsYXJnZSBsaXN0IHRoYXQgaXMgc2xvdyB0byB1cGRhdGUgLSBtYWtlIHN1cmUgeW91ciAnICtcbiAgICAgICAgICAncmVuZGVySXRlbSBmdW5jdGlvbiByZW5kZXJzIGNvbXBvbmVudHMgdGhhdCBmb2xsb3cgUmVhY3QgcGVyZm9ybWFuY2UgYmVzdCBwcmFjdGljZXMgJyArXG4gICAgICAgICAgJ2xpa2UgUHVyZUNvbXBvbmVudCwgc2hvdWxkQ29tcG9uZW50VXBkYXRlLCBldGMuJyxcbiAgICAgICAge2R0LCBwcmV2RHQ6IHRoaXMuX3Njcm9sbE1ldHJpY3MuZHQsIGNvbnRlbnRMZW5ndGh9LFxuICAgICAgKTtcbiAgICAgIHRoaXMuX2hhc1dhcm5lZC5wZXJmID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBGb3IgaW52YWxpZCBuZWdhdGl2ZSB2YWx1ZXMgKHcvIFJUTCksIHNldCB0aGlzIHRvIDEuXG4gICAgY29uc3Qgem9vbVNjYWxlID0gZS5uYXRpdmVFdmVudC56b29tU2NhbGUgPCAwID8gMSA6IGUubmF0aXZlRXZlbnQuem9vbVNjYWxlO1xuICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MgPSB7XG4gICAgICBjb250ZW50TGVuZ3RoLFxuICAgICAgZHQsXG4gICAgICBkT2Zmc2V0LFxuICAgICAgb2Zmc2V0LFxuICAgICAgdGltZXN0YW1wLFxuICAgICAgdmVsb2NpdHksXG4gICAgICB2aXNpYmxlTGVuZ3RoLFxuICAgICAgem9vbVNjYWxlLFxuICAgIH07XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLmRhdGEpO1xuICAgIGlmICghdGhpcy5wcm9wcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9tYXliZUNhbGxPbkVuZFJlYWNoZWQoKTtcbiAgICBpZiAodmVsb2NpdHkgIT09IDApIHtcbiAgICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyLmFjdGl2YXRlKCk7XG4gICAgfVxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgfTtcblxuICBfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCkge1xuICAgIGNvbnN0IHtmaXJzdCwgbGFzdH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHtvZmZzZXQsIHZpc2libGVMZW5ndGgsIHZlbG9jaXR5fSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBsZXQgaGlQcmkgPSBmYWxzZTtcbiAgICBjb25zdCBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgPSBvbkVuZFJlYWNoZWRUaHJlc2hvbGRPckRlZmF1bHQoXG4gICAgICB0aGlzLnByb3BzLm9uRW5kUmVhY2hlZFRocmVzaG9sZCxcbiAgICApO1xuICAgIGNvbnN0IHNjcm9sbGluZ1RocmVzaG9sZCA9IChvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoKSAvIDI7XG4gICAgLy8gTWFyayBhcyBoaWdoIHByaW9yaXR5IGlmIHdlJ3JlIGNsb3NlIHRvIHRoZSBzdGFydCBvZiB0aGUgZmlyc3QgaXRlbVxuICAgIC8vIEJ1dCBvbmx5IGlmIHRoZXJlIGFyZSBpdGVtcyBiZWZvcmUgdGhlIGZpcnN0IHJlbmRlcmVkIGl0ZW1cbiAgICBpZiAoZmlyc3QgPiAwKSB7XG4gICAgICBjb25zdCBkaXN0VG9wID0gb2Zmc2V0IC0gdGhpcy5fX2dldEZyYW1lTWV0cmljc0FwcHJveChmaXJzdCkub2Zmc2V0O1xuICAgICAgaGlQcmkgPVxuICAgICAgICBoaVByaSB8fCBkaXN0VG9wIDwgMCB8fCAodmVsb2NpdHkgPCAtMiAmJiBkaXN0VG9wIDwgc2Nyb2xsaW5nVGhyZXNob2xkKTtcbiAgICB9XG4gICAgLy8gTWFyayBhcyBoaWdoIHByaW9yaXR5IGlmIHdlJ3JlIGNsb3NlIHRvIHRoZSBlbmQgb2YgdGhlIGxhc3QgaXRlbVxuICAgIC8vIEJ1dCBvbmx5IGlmIHRoZXJlIGFyZSBpdGVtcyBhZnRlciB0aGUgbGFzdCByZW5kZXJlZCBpdGVtXG4gICAgaWYgKGxhc3QgPCBpdGVtQ291bnQgLSAxKSB7XG4gICAgICBjb25zdCBkaXN0Qm90dG9tID1cbiAgICAgICAgdGhpcy5fX2dldEZyYW1lTWV0cmljc0FwcHJveChsYXN0KS5vZmZzZXQgLSAob2Zmc2V0ICsgdmlzaWJsZUxlbmd0aCk7XG4gICAgICBoaVByaSA9XG4gICAgICAgIGhpUHJpIHx8XG4gICAgICAgIGRpc3RCb3R0b20gPCAwIHx8XG4gICAgICAgICh2ZWxvY2l0eSA+IDIgJiYgZGlzdEJvdHRvbSA8IHNjcm9sbGluZ1RocmVzaG9sZCk7XG4gICAgfVxuICAgIC8vIE9ubHkgdHJpZ2dlciBoaWdoLXByaW9yaXR5IHVwZGF0ZXMgaWYgd2UndmUgYWN0dWFsbHkgcmVuZGVyZWQgY2VsbHMsXG4gICAgLy8gYW5kIHdpdGggdGhhdCBzaXplIGVzdGltYXRlLCBhY2N1cmF0ZWx5IGNvbXB1dGUgaG93IG1hbnkgY2VsbHMgd2Ugc2hvdWxkIHJlbmRlci5cbiAgICAvLyBPdGhlcndpc2UsIGl0IHdvdWxkIGp1c3QgcmVuZGVyIGFzIG1hbnkgY2VsbHMgYXMgaXQgY2FuIChvZiB6ZXJvIGRpbWVuc2lvbiksXG4gICAgLy8gZWFjaCB0aW1lIHRocm91Z2ggYXR0ZW1wdGluZyB0byByZW5kZXIgbW9yZSAobGltaXRlZCBieSBtYXhUb1JlbmRlclBlckJhdGNoKSxcbiAgICAvLyBzdGFydmluZyB0aGUgcmVuZGVyZXIgZnJvbSBhY3R1YWxseSBsYXlpbmcgb3V0IHRoZSBvYmplY3RzIGFuZCBjb21wdXRpbmcgX2F2ZXJhZ2VDZWxsTGVuZ3RoLlxuICAgIC8vIElmIHRoaXMgaXMgdHJpZ2dlcmVkIGluIGFuIGBjb21wb25lbnREaWRVcGRhdGVgIGZvbGxvd2VkIGJ5IGEgaGlQcmkgY2VsbFRvUmVuZGVyVXBkYXRlXG4gICAgLy8gV2Ugc2hvdWxkbid0IGRvIGFub3RoZXIgaGlwcmkgY2VsbFRvUmVuZGVyVXBkYXRlXG4gICAgaWYgKFxuICAgICAgaGlQcmkgJiZcbiAgICAgICh0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCB8fCB0aGlzLnByb3BzLmdldEl0ZW1MYXlvdXQpICYmXG4gICAgICAhdGhpcy5faGlQcmlJblByb2dyZXNzXG4gICAgKSB7XG4gICAgICB0aGlzLl9oaVByaUluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgLy8gRG9uJ3Qgd29ycnkgYWJvdXQgaW50ZXJhY3Rpb25zIHdoZW4gc2Nyb2xsaW5nIHF1aWNrbHk7IGZvY3VzIG9uIGZpbGxpbmcgY29udGVudCBhcyBmYXN0XG4gICAgICAvLyBhcyBwb3NzaWJsZS5cbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLmRpc3Bvc2Uoe2Fib3J0OiB0cnVlfSk7XG4gICAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyLnNjaGVkdWxlKCk7XG4gICAgfVxuICB9XG5cbiAgX29uU2Nyb2xsQmVnaW5EcmFnID0gKGU6IFNjcm9sbEV2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5mb3JFYWNoKGNoaWxkTGlzdCA9PiB7XG4gICAgICBjaGlsZExpc3QucmVmICYmIGNoaWxkTGlzdC5yZWYuX29uU2Nyb2xsQmVnaW5EcmFnKGUpO1xuICAgIH0pO1xuICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godHVwbGUgPT4ge1xuICAgICAgdHVwbGUudmlld2FiaWxpdHlIZWxwZXIucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9oYXNJbnRlcmFjdGVkID0gdHJ1ZTtcbiAgICB0aGlzLnByb3BzLm9uU2Nyb2xsQmVnaW5EcmFnICYmIHRoaXMucHJvcHMub25TY3JvbGxCZWdpbkRyYWcoZSk7XG4gIH07XG5cbiAgX29uU2Nyb2xsRW5kRHJhZyA9IChlOiBTY3JvbGxFdmVudCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLl9vblNjcm9sbEVuZERyYWcoZSk7XG4gICAgfSk7XG4gICAgY29uc3Qge3ZlbG9jaXR5fSA9IGUubmF0aXZlRXZlbnQ7XG4gICAgaWYgKHZlbG9jaXR5KSB7XG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZlbG9jaXR5ID0gdGhpcy5fc2VsZWN0T2Zmc2V0KHZlbG9jaXR5KTtcbiAgICB9XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMucHJvcHMub25TY3JvbGxFbmREcmFnICYmIHRoaXMucHJvcHMub25TY3JvbGxFbmREcmFnKGUpO1xuICB9O1xuXG4gIF9vbk1vbWVudHVtU2Nyb2xsQmVnaW4gPSAoZTogU2Nyb2xsRXZlbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWYgJiYgY2hpbGRMaXN0LnJlZi5fb25Nb21lbnR1bVNjcm9sbEJlZ2luKGUpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEJlZ2luKGUpO1xuICB9O1xuXG4gIF9vbk1vbWVudHVtU2Nyb2xsRW5kID0gKGU6IFNjcm9sbEV2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5mb3JFYWNoKGNoaWxkTGlzdCA9PiB7XG4gICAgICBjaGlsZExpc3QucmVmICYmIGNoaWxkTGlzdC5yZWYuX29uTW9tZW50dW1TY3JvbGxFbmQoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52ZWxvY2l0eSA9IDA7XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZCAmJiB0aGlzLnByb3BzLm9uTW9tZW50dW1TY3JvbGxFbmQoZSk7XG4gIH07XG5cbiAgX3VwZGF0ZUNlbGxzVG9SZW5kZXIgPSAoKSA9PiB7XG4gICAgY29uc3Qge1xuICAgICAgZGF0YSxcbiAgICAgIGdldEl0ZW1Db3VudCxcbiAgICAgIG9uRW5kUmVhY2hlZFRocmVzaG9sZDogX29uRW5kUmVhY2hlZFRocmVzaG9sZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgPSBvbkVuZFJlYWNoZWRUaHJlc2hvbGRPckRlZmF1bHQoXG4gICAgICBfb25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgICk7XG4gICAgY29uc3QgaXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkID0gdGhpcy5faXNWaXJ0dWFsaXphdGlvbkRpc2FibGVkKCk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyhkYXRhKTtcbiAgICBpZiAoIWRhdGEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiB7XG4gICAgICBsZXQgbmV3U3RhdGU6ID8oXG4gICAgICAgIHwge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlciwgLi4ufVxuICAgICAgICB8ICRURU1QT1JBUlkkb2JqZWN0PHtmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXJ9PlxuICAgICAgKTtcbiAgICAgIGNvbnN0IHtjb250ZW50TGVuZ3RoLCBvZmZzZXQsIHZpc2libGVMZW5ndGh9ID0gdGhpcy5fc2Nyb2xsTWV0cmljcztcbiAgICAgIGNvbnN0IGRpc3RhbmNlRnJvbUVuZCA9IGNvbnRlbnRMZW5ndGggLSB2aXNpYmxlTGVuZ3RoIC0gb2Zmc2V0O1xuICAgICAgaWYgKCFpc1ZpcnR1YWxpemF0aW9uRGlzYWJsZWQpIHtcbiAgICAgICAgLy8gSWYgd2UgcnVuIHRoaXMgd2l0aCBib2d1cyBkYXRhLCB3ZSdsbCBmb3JjZS1yZW5kZXIgd2luZG93IHtmaXJzdDogMCwgbGFzdDogMH0sXG4gICAgICAgIC8vIGFuZCB3aXBlIG91dCB0aGUgaW5pdGlhbE51bVRvUmVuZGVyIHJlbmRlcmVkIGVsZW1lbnRzLlxuICAgICAgICAvLyBTbyBsZXQncyB3YWl0IHVudGlsIHRoZSBzY3JvbGwgdmlldyBtZXRyaWNzIGhhdmUgYmVlbiBzZXQgdXAuIEFuZCB1bnRpbCB0aGVuLFxuICAgICAgICAvLyB3ZSB3aWxsIHRydXN0IHRoZSBpbml0aWFsTnVtVG9SZW5kZXIgc3VnZ2VzdGlvblxuICAgICAgICBpZiAodmlzaWJsZUxlbmd0aCA+IDAgJiYgY29udGVudExlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBJZiB3ZSBoYXZlIGEgbm9uLXplcm8gaW5pdGlhbFNjcm9sbEluZGV4IGFuZCBydW4gdGhpcyBiZWZvcmUgd2UndmUgc2Nyb2xsZWQsXG4gICAgICAgICAgLy8gd2UnbGwgd2lwZSBvdXQgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciByZW5kZXJlZCBlbGVtZW50cyBzdGFydGluZyBhdCBpbml0aWFsU2Nyb2xsSW5kZXguXG4gICAgICAgICAgLy8gU28gbGV0J3Mgd2FpdCB1bnRpbCB3ZSd2ZSBzY3JvbGxlZCB0aGUgdmlldyB0byB0aGUgcmlnaHQgcGxhY2UuIEFuZCB1bnRpbCB0aGVuLFxuICAgICAgICAgIC8vIHdlIHdpbGwgdHJ1c3QgdGhlIGluaXRpYWxTY3JvbGxJbmRleCBzdWdnZXN0aW9uLlxuXG4gICAgICAgICAgLy8gVGh1cywgd2Ugd2FudCB0byByZWNhbGN1bGF0ZSB0aGUgd2luZG93ZWQgcmVuZGVyIGxpbWl0cyBpZiBhbnkgb2YgdGhlIGZvbGxvd2luZyBob2xkOlxuICAgICAgICAgIC8vIC0gaW5pdGlhbFNjcm9sbEluZGV4IGlzIHVuZGVmaW5lZCBvciBpcyAwXG4gICAgICAgICAgLy8gLSBpbml0aWFsU2Nyb2xsSW5kZXggPiAwIEFORCBzY3JvbGxpbmcgaXMgY29tcGxldGVcbiAgICAgICAgICAvLyAtIGluaXRpYWxTY3JvbGxJbmRleCA+IDAgQU5EIHRoZSBlbmQgb2YgdGhlIGxpc3QgaXMgdmlzaWJsZSAodGhpcyBoYW5kbGVzIHRoZSBjYXNlXG4gICAgICAgICAgLy8gICB3aGVyZSB0aGUgbGlzdCBpcyBzaG9ydGVyIHRoYW4gdGhlIHZpc2libGUgYXJlYSlcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAhdGhpcy5wcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggfHxcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0IHx8XG4gICAgICAgICAgICBNYXRoLmFicyhkaXN0YW5jZUZyb21FbmQpIDwgTnVtYmVyLkVQU0lMT05cbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIG5ld1N0YXRlID0gY29tcHV0ZVdpbmRvd2VkUmVuZGVyTGltaXRzKFxuICAgICAgICAgICAgICB0aGlzLnByb3BzLmRhdGEsXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50LFxuICAgICAgICAgICAgICBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KHRoaXMucHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaCksXG4gICAgICAgICAgICAgIHdpbmRvd1NpemVPckRlZmF1bHQodGhpcy5wcm9wcy53aW5kb3dTaXplKSxcbiAgICAgICAgICAgICAgc3RhdGUsXG4gICAgICAgICAgICAgIHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3gsXG4gICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgcmVuZGVyQWhlYWQgPVxuICAgICAgICAgIGRpc3RhbmNlRnJvbUVuZCA8IG9uRW5kUmVhY2hlZFRocmVzaG9sZCAqIHZpc2libGVMZW5ndGhcbiAgICAgICAgICAgID8gbWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdCh0aGlzLnByb3BzLm1heFRvUmVuZGVyUGVyQmF0Y2gpXG4gICAgICAgICAgICA6IDA7XG4gICAgICAgIG5ld1N0YXRlID0ge1xuICAgICAgICAgIGZpcnN0OiAwLFxuICAgICAgICAgIGxhc3Q6IE1hdGgubWluKHN0YXRlLmxhc3QgKyByZW5kZXJBaGVhZCwgZ2V0SXRlbUNvdW50KGRhdGEpIC0gMSksXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBpZiAobmV3U3RhdGUgJiYgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zaXplID4gMCkge1xuICAgICAgICBjb25zdCBuZXdGaXJzdCA9IG5ld1N0YXRlLmZpcnN0O1xuICAgICAgICBjb25zdCBuZXdMYXN0ID0gbmV3U3RhdGUubGFzdDtcbiAgICAgICAgLy8gSWYgc29tZSBjZWxsIGluIHRoZSBuZXcgc3RhdGUgaGFzIGEgY2hpbGQgbGlzdCBpbiBpdCwgd2Ugc2hvdWxkIG9ubHkgcmVuZGVyXG4gICAgICAgIC8vIHVwIHRocm91Z2ggdGhhdCBpdGVtLCBzbyB0aGF0IHdlIGdpdmUgdGhhdCBsaXN0IGEgY2hhbmNlIHRvIHJlbmRlci5cbiAgICAgICAgLy8gT3RoZXJ3aXNlIHRoZXJlJ3MgY2h1cm4gZnJvbSBtdWx0aXBsZSBjaGlsZCBsaXN0cyBtb3VudGluZyBhbmQgdW4tbW91bnRpbmdcbiAgICAgICAgLy8gdGhlaXIgaXRlbXMuXG4gICAgICAgIGZvciAobGV0IGlpID0gbmV3Rmlyc3Q7IGlpIDw9IG5ld0xhc3Q7IGlpKyspIHtcbiAgICAgICAgICBjb25zdCBjZWxsS2V5Rm9ySW5kZXggPSB0aGlzLl9pbmRpY2VzVG9LZXlzLmdldChpaSk7XG4gICAgICAgICAgY29uc3QgY2hpbGRMaXN0S2V5cyA9XG4gICAgICAgICAgICBjZWxsS2V5Rm9ySW5kZXggJiZcbiAgICAgICAgICAgIHRoaXMuX2NlbGxLZXlzVG9DaGlsZExpc3RLZXlzLmdldChjZWxsS2V5Rm9ySW5kZXgpO1xuICAgICAgICAgIGlmICghY2hpbGRMaXN0S2V5cykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBzb21lQ2hpbGRIYXNNb3JlID0gZmFsc2U7XG4gICAgICAgICAgLy8gRm9yIGVhY2ggY2VsbCwgbmVlZCB0byBjaGVjayB3aGV0aGVyIGFueSBjaGlsZCBsaXN0IGluIGl0IGhhcyBtb3JlIGVsZW1lbnRzIHRvIHJlbmRlclxuICAgICAgICAgIGZvciAobGV0IGNoaWxkS2V5IG9mIGNoaWxkTGlzdEtleXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkTGlzdCA9IHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZ2V0KGNoaWxkS2V5KTtcbiAgICAgICAgICAgIGlmIChjaGlsZExpc3QgJiYgY2hpbGRMaXN0LnJlZiAmJiBjaGlsZExpc3QucmVmLmhhc01vcmUoKSkge1xuICAgICAgICAgICAgICBzb21lQ2hpbGRIYXNNb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzb21lQ2hpbGRIYXNNb3JlKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZS5sYXN0ID0gaWk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgbmV3U3RhdGUgIT0gbnVsbCAmJlxuICAgICAgICBuZXdTdGF0ZS5maXJzdCA9PT0gc3RhdGUuZmlyc3QgJiZcbiAgICAgICAgbmV3U3RhdGUubGFzdCA9PT0gc3RhdGUubGFzdFxuICAgICAgKSB7XG4gICAgICAgIG5ld1N0YXRlID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXdTdGF0ZTtcbiAgICB9KTtcbiAgfTtcblxuICBfY3JlYXRlVmlld1Rva2VuID0gKGluZGV4OiBudW1iZXIsIGlzVmlld2FibGU6IGJvb2xlYW4pID0+IHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbX0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKGRhdGEsIGluZGV4KTtcbiAgICByZXR1cm4ge2luZGV4LCBpdGVtLCBrZXk6IHRoaXMuX2tleUV4dHJhY3RvcihpdGVtLCBpbmRleCksIGlzVmlld2FibGV9O1xuICB9O1xuXG4gIF9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94OiAoaW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIC4uLlxuICB9ID0gaW5kZXggPT4ge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGluZGV4KTtcbiAgICBpZiAoZnJhbWUgJiYgZnJhbWUuaW5kZXggPT09IGluZGV4KSB7XG4gICAgICAvLyBjaGVjayBmb3IgaW52YWxpZCBmcmFtZXMgZHVlIHRvIHJvdyByZS1vcmRlcmluZ1xuICAgICAgcmV0dXJuIGZyYW1lO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7Z2V0SXRlbUxheW91dH0gPSB0aGlzLnByb3BzO1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICAhZ2V0SXRlbUxheW91dCxcbiAgICAgICAgJ1Nob3VsZCBub3QgaGF2ZSB0byBlc3RpbWF0ZSBmcmFtZXMgd2hlbiBhIG1lYXN1cmVtZW50IG1ldHJpY3MgZnVuY3Rpb24gaXMgcHJvdmlkZWQnLFxuICAgICAgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlbmd0aDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGgsXG4gICAgICAgIG9mZnNldDogdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggKiBpbmRleCxcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIF9nZXRGcmFtZU1ldHJpY3MgPSAoXG4gICAgaW5kZXg6IG51bWJlcixcbiAgKTogP3tcbiAgICBsZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIGluTGF5b3V0PzogYm9vbGVhbixcbiAgICAuLi5cbiAgfSA9PiB7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW0sIGdldEl0ZW1Db3VudCwgZ2V0SXRlbUxheW91dH0gPSB0aGlzLnByb3BzO1xuICAgIGludmFyaWFudChcbiAgICAgIGdldEl0ZW1Db3VudChkYXRhKSA+IGluZGV4LFxuICAgICAgJ1RyaWVkIHRvIGdldCBmcmFtZSBmb3Igb3V0IG9mIHJhbmdlIGluZGV4ICcgKyBpbmRleCxcbiAgICApO1xuICAgIGNvbnN0IGl0ZW0gPSBnZXRJdGVtKGRhdGEsIGluZGV4KTtcbiAgICBjb25zdCBmcmFtZSA9IGl0ZW0gJiYgdGhpcy5fZnJhbWVzW3RoaXMuX2tleUV4dHJhY3RvcihpdGVtLCBpbmRleCldO1xuICAgIGlmICghZnJhbWUgfHwgZnJhbWUuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICBpZiAoZ2V0SXRlbUxheW91dCkge1xuICAgICAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnRcbiAgICAgICAgICogc3VwcHJlc3NlcyBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjMgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yXG4gICAgICAgICAqIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICByZXR1cm4gZ2V0SXRlbUxheW91dChkYXRhLCBpbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcmFtZTtcbiAgfTtcblxuICBfdXBkYXRlVmlld2FibGVJdGVtcyhkYXRhOiBhbnkpIHtcbiAgICBjb25zdCB7Z2V0SXRlbUNvdW50fSA9IHRoaXMucHJvcHM7XG5cbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLm9uVXBkYXRlKFxuICAgICAgICBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0LFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgICAgIHRoaXMuX2dldEZyYW1lTWV0cmljcyxcbiAgICAgICAgdGhpcy5fY3JlYXRlVmlld1Rva2VuLFxuICAgICAgICB0dXBsZS5vblZpZXdhYmxlSXRlbXNDaGFuZ2VkLFxuICAgICAgICB0aGlzLnN0YXRlLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufVxuXG50eXBlIENlbGxSZW5kZXJlclByb3BzID0ge1xuICBDZWxsUmVuZGVyZXJDb21wb25lbnQ/OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxhbnk+LFxuICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50OiA/UmVhY3QuQ29tcG9uZW50VHlwZTxcbiAgICBhbnkgfCB7aGlnaGxpZ2h0ZWQ6IGJvb2xlYW4sIGxlYWRpbmdJdGVtOiA/SXRlbX0sXG4gID4sXG4gIExpc3RJdGVtQ29tcG9uZW50PzogPyhSZWFjdC5Db21wb25lbnRUeXBlPGFueT4gfCBSZWFjdC5FbGVtZW50PGFueT4pLFxuICBjZWxsS2V5OiBzdHJpbmcsXG4gIGRlYnVnPzogP2Jvb2xlYW4sXG4gIGZpbGxSYXRlSGVscGVyOiBGaWxsUmF0ZUhlbHBlcixcbiAgZ2V0SXRlbUxheW91dD86IChcbiAgICBkYXRhOiBhbnksXG4gICAgaW5kZXg6IG51bWJlcixcbiAgKSA9PiB7XG4gICAgbGVuZ3RoOiBudW1iZXIsXG4gICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICAuLi5cbiAgfSxcbiAgaG9yaXpvbnRhbDogP2Jvb2xlYW4sXG4gIGluZGV4OiBudW1iZXIsXG4gIGludmVyc2lvblN0eWxlOiBWaWV3U3R5bGVQcm9wLFxuICBpdGVtOiBJdGVtLFxuICAvLyBUaGlzIGlzIGV4dHJhY3RlZCBieSBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyXG4gIG9uQ2VsbExheW91dDogKGV2ZW50OiBPYmplY3QsIGNlbGxLZXk6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gdm9pZCxcbiAgb25Vbm1vdW50OiAoY2VsbEtleTogc3RyaW5nKSA9PiB2b2lkLFxuICBvblVwZGF0ZVNlcGFyYXRvcnM6IChjZWxsS2V5czogQXJyYXk8P3N0cmluZz4sIHByb3BzOiBPYmplY3QpID0+IHZvaWQsXG4gIHByZXZDZWxsS2V5OiA/c3RyaW5nLFxuICByZW5kZXJJdGVtPzogP1JlbmRlckl0ZW1UeXBlPEl0ZW0+LFxuICAuLi5cbn07XG5cbnR5cGUgQ2VsbFJlbmRlcmVyU3RhdGUgPSB7XG4gIHNlcGFyYXRvclByb3BzOiAkUmVhZE9ubHk8e3xcbiAgICBoaWdobGlnaHRlZDogYm9vbGVhbixcbiAgICBsZWFkaW5nSXRlbTogP0l0ZW0sXG4gIHx9PixcbiAgLi4uXG59O1xuXG5jbGFzcyBDZWxsUmVuZGVyZXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8XG4gIENlbGxSZW5kZXJlclByb3BzLFxuICBDZWxsUmVuZGVyZXJTdGF0ZSxcbj4ge1xuICBzdGF0ZSA9IHtcbiAgICBzZXBhcmF0b3JQcm9wczoge1xuICAgICAgaGlnaGxpZ2h0ZWQ6IGZhbHNlLFxuICAgICAgbGVhZGluZ0l0ZW06IHRoaXMucHJvcHMuaXRlbSxcbiAgICB9LFxuICB9O1xuXG4gIHN0YXRpYyBnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMoXG4gICAgcHJvcHM6IENlbGxSZW5kZXJlclByb3BzLFxuICAgIHByZXZTdGF0ZTogQ2VsbFJlbmRlcmVyU3RhdGUsXG4gICk6ID9DZWxsUmVuZGVyZXJTdGF0ZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlcGFyYXRvclByb3BzOiB7XG4gICAgICAgIC4uLnByZXZTdGF0ZS5zZXBhcmF0b3JQcm9wcyxcbiAgICAgICAgbGVhZGluZ0l0ZW06IHByb3BzLml0ZW0sXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPOiBjb25zaWRlciBmYWN0b3Jpbmcgc2VwYXJhdG9yIHN0dWZmIG91dCBvZiBWaXJ0dWFsaXplZExpc3QgaW50byBGbGF0TGlzdCBzaW5jZSBpdCdzIG5vdFxuICAvLyByZXVzZWQgYnkgU2VjdGlvbkxpc3QgYW5kIHdlIGNhbiBrZWVwIFZpcnR1YWxpemVkTGlzdCBzaW1wbGVyLlxuICBfc2VwYXJhdG9ycyA9IHtcbiAgICBoaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdW5oaWdobGlnaHQ6ICgpID0+IHtcbiAgICAgIGNvbnN0IHtjZWxsS2V5LCBwcmV2Q2VsbEtleX0gPSB0aGlzLnByb3BzO1xuICAgICAgdGhpcy5wcm9wcy5vblVwZGF0ZVNlcGFyYXRvcnMoW2NlbGxLZXksIHByZXZDZWxsS2V5XSwge1xuICAgICAgICBoaWdobGlnaHRlZDogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHVwZGF0ZVByb3BzOiAoc2VsZWN0OiAnbGVhZGluZycgfCAndHJhaWxpbmcnLCBuZXdQcm9wczogT2JqZWN0KSA9PiB7XG4gICAgICBjb25zdCB7Y2VsbEtleSwgcHJldkNlbGxLZXl9ID0gdGhpcy5wcm9wcztcbiAgICAgIHRoaXMucHJvcHMub25VcGRhdGVTZXBhcmF0b3JzKFxuICAgICAgICBbc2VsZWN0ID09PSAnbGVhZGluZycgPyBwcmV2Q2VsbEtleSA6IGNlbGxLZXldLFxuICAgICAgICBuZXdQcm9wcyxcbiAgICAgICk7XG4gICAgfSxcbiAgfTtcblxuICB1cGRhdGVTZXBhcmF0b3JQcm9wcyhuZXdQcm9wczogT2JqZWN0KSB7XG4gICAgdGhpcy5zZXRTdGF0ZShzdGF0ZSA9PiAoe1xuICAgICAgc2VwYXJhdG9yUHJvcHM6IHsuLi5zdGF0ZS5zZXBhcmF0b3JQcm9wcywgLi4ubmV3UHJvcHN9LFxuICAgIH0pKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIHRoaXMucHJvcHMub25Vbm1vdW50KHRoaXMucHJvcHMuY2VsbEtleSk7XG4gIH1cblxuICBfb25MYXlvdXQgPSAobmF0aXZlRXZlbnQ6IExheW91dEV2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5wcm9wcy5vbkNlbGxMYXlvdXQgJiZcbiAgICAgIHRoaXMucHJvcHMub25DZWxsTGF5b3V0KFxuICAgICAgICBuYXRpdmVFdmVudCxcbiAgICAgICAgdGhpcy5wcm9wcy5jZWxsS2V5LFxuICAgICAgICB0aGlzLnByb3BzLmluZGV4LFxuICAgICAgKTtcbiAgfTtcblxuICBfcmVuZGVyRWxlbWVudChcbiAgICByZW5kZXJJdGVtOiBhbnksXG4gICAgTGlzdEl0ZW1Db21wb25lbnQ6IGFueSxcbiAgICBpdGVtOiBhbnksXG4gICAgaW5kZXg6IGFueSxcbiAgKSB7XG4gICAgaWYgKHJlbmRlckl0ZW0gJiYgTGlzdEl0ZW1Db21wb25lbnQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogQm90aCBMaXN0SXRlbUNvbXBvbmVudCBhbmQgcmVuZGVySXRlbSBwcm9wcyBhcmUgcHJlc2VudC4gTGlzdEl0ZW1Db21wb25lbnQgd2lsbCB0YWtlJyArXG4gICAgICAgICAgJyBwcmVjZWRlbmNlIG92ZXIgcmVuZGVySXRlbS4nLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoTGlzdEl0ZW1Db21wb25lbnQpIHtcbiAgICAgIC8qICRGbG93Rml4TWVbbm90LWEtY29tcG9uZW50XSAoPj0wLjEwOC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzXG4gICAgICAgKiBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjEwOCB3YXMgZGVwbG95ZWQuIFRvXG4gICAgICAgKiBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGUtYXJnXSAoPj0wLjEwOC4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKVxuICAgICAgICogVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjEwOCB3YXMgZGVwbG95ZWQuXG4gICAgICAgKiBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KExpc3RJdGVtQ29tcG9uZW50LCB7XG4gICAgICAgIGl0ZW0sXG4gICAgICAgIGluZGV4LFxuICAgICAgICBzZXBhcmF0b3JzOiB0aGlzLl9zZXBhcmF0b3JzLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHJlbmRlckl0ZW0pIHtcbiAgICAgIHJldHVybiByZW5kZXJJdGVtKHtcbiAgICAgICAgaXRlbSxcbiAgICAgICAgaW5kZXgsXG4gICAgICAgIHNlcGFyYXRvcnM6IHRoaXMuX3NlcGFyYXRvcnMsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpbnZhcmlhbnQoXG4gICAgICBmYWxzZSxcbiAgICAgICdWaXJ0dWFsaXplZExpc3Q6IEVpdGhlciBMaXN0SXRlbUNvbXBvbmVudCBvciByZW5kZXJJdGVtIHByb3BzIGFyZSByZXF1aXJlZCBidXQgbm9uZSB3ZXJlIGZvdW5kLicsXG4gICAgKTtcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBDZWxsUmVuZGVyZXJDb21wb25lbnQsXG4gICAgICBJdGVtU2VwYXJhdG9yQ29tcG9uZW50LFxuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICBkZWJ1ZyxcbiAgICAgIGZpbGxSYXRlSGVscGVyLFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICBpdGVtLFxuICAgICAgaW5kZXgsXG4gICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgIHJlbmRlckl0ZW0sXG4gICAgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlckVsZW1lbnQoXG4gICAgICByZW5kZXJJdGVtLFxuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICBpdGVtLFxuICAgICAgaW5kZXgsXG4gICAgKTtcblxuICAgIGNvbnN0IG9uTGF5b3V0ID1cbiAgICAgIChnZXRJdGVtTGF5b3V0ICYmICFkZWJ1ZyAmJiAhZmlsbFJhdGVIZWxwZXIuZW5hYmxlZCgpKSB8fFxuICAgICAgIXRoaXMucHJvcHMub25DZWxsTGF5b3V0XG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogdGhpcy5fb25MYXlvdXQ7XG4gICAgLy8gTk9URTogdGhhdCB3aGVuIHRoaXMgaXMgYSBzdGlja3kgaGVhZGVyLCBgb25MYXlvdXRgIHdpbGwgZ2V0IGF1dG9tYXRpY2FsbHkgZXh0cmFjdGVkIGFuZFxuICAgIC8vIGNhbGxlZCBleHBsaWNpdGx5IGJ5IGBTY3JvbGxWaWV3U3RpY2t5SGVhZGVyYC5cbiAgICBjb25zdCBpdGVtU2VwYXJhdG9yID0gUmVhY3QuaXNWYWxpZEVsZW1lbnQoSXRlbVNlcGFyYXRvckNvbXBvbmVudClcbiAgICAgID8gSXRlbVNlcGFyYXRvckNvbXBvbmVudFxuICAgICAgOiBJdGVtU2VwYXJhdG9yQ29tcG9uZW50ICYmIChcbiAgICAgICAgICA8SXRlbVNlcGFyYXRvckNvbXBvbmVudCB7Li4udGhpcy5zdGF0ZS5zZXBhcmF0b3JQcm9wc30gLz5cbiAgICAgICAgKTtcbiAgICBjb25zdCBjZWxsU3R5bGUgPSBpbnZlcnNpb25TdHlsZVxuICAgICAgPyBob3Jpem9udGFsXG4gICAgICAgID8gW3N0eWxlcy5yb3dSZXZlcnNlLCBpbnZlcnNpb25TdHlsZV1cbiAgICAgICAgOiBbc3R5bGVzLmNvbHVtblJldmVyc2UsIGludmVyc2lvblN0eWxlXVxuICAgICAgOiBob3Jpem9udGFsXG4gICAgICA/IFtzdHlsZXMucm93LCBpbnZlcnNpb25TdHlsZV1cbiAgICAgIDogaW52ZXJzaW9uU3R5bGU7XG4gICAgY29uc3QgcmVzdWx0ID0gIUNlbGxSZW5kZXJlckNvbXBvbmVudCA/IChcbiAgICAgIC8qICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGUtYXJnXSAoPj0wLjg5LjAgc2l0ZT1yZWFjdF9uYXRpdmVfZmIpICpcbiAgICAgICAgVGhpcyBjb21tZW50IHN1cHByZXNzZXMgYW4gZXJyb3IgZm91bmQgd2hlbiBGbG93IHYwLjg5IHdhcyBkZXBsb3llZC4gKlxuICAgICAgICBUbyBzZWUgdGhlIGVycm9yLCBkZWxldGUgdGhpcyBjb21tZW50IGFuZCBydW4gRmxvdy4gKi9cbiAgICAgIDxWaWV3IHN0eWxlPXtjZWxsU3R5bGV9IG9uTGF5b3V0PXtvbkxheW91dH0+XG4gICAgICAgIHtlbGVtZW50fVxuICAgICAgICB7aXRlbVNlcGFyYXRvcn1cbiAgICAgIDwvVmlldz5cbiAgICApIDogKFxuICAgICAgPENlbGxSZW5kZXJlckNvbXBvbmVudFxuICAgICAgICB7Li4udGhpcy5wcm9wc31cbiAgICAgICAgc3R5bGU9e2NlbGxTdHlsZX1cbiAgICAgICAgb25MYXlvdXQ9e29uTGF5b3V0fT5cbiAgICAgICAge2VsZW1lbnR9XG4gICAgICAgIHtpdGVtU2VwYXJhdG9yfVxuICAgICAgPC9DZWxsUmVuZGVyZXJDb21wb25lbnQ+XG4gICAgKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlciBjZWxsS2V5PXt0aGlzLnByb3BzLmNlbGxLZXl9PlxuICAgICAgICB7cmVzdWx0fVxuICAgICAgPC9WaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyPlxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVzY3JpYmVOZXN0ZWRMaXN0cyhjaGlsZExpc3Q6IHtcbiAgK2NlbGxLZXk6IHN0cmluZyxcbiAgK2tleTogc3RyaW5nLFxuICArcmVmOiBWaXJ0dWFsaXplZExpc3QsXG4gICtwYXJlbnREZWJ1Z0luZm86IExpc3REZWJ1Z0luZm8sXG4gICtob3Jpem9udGFsOiBib29sZWFuLFxuICAuLi5cbn0pIHtcbiAgbGV0IHRyYWNlID1cbiAgICAnVmlydHVhbGl6ZWRMaXN0IHRyYWNlOlxcbicgK1xuICAgIGAgIENoaWxkICgke2NoaWxkTGlzdC5ob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJ30pOlxcbmAgK1xuICAgIGAgICAgbGlzdEtleTogJHtjaGlsZExpc3Qua2V5fVxcbmAgK1xuICAgIGAgICAgY2VsbEtleTogJHtjaGlsZExpc3QuY2VsbEtleX1gO1xuXG4gIGxldCBkZWJ1Z0luZm86ID9MaXN0RGVidWdJbmZvID0gY2hpbGRMaXN0LnBhcmVudERlYnVnSW5mbztcbiAgd2hpbGUgKGRlYnVnSW5mbykge1xuICAgIHRyYWNlICs9XG4gICAgICBgXFxuICBQYXJlbnQgKCR7ZGVidWdJbmZvLmhvcml6b250YWwgPyAnaG9yaXpvbnRhbCcgOiAndmVydGljYWwnfSk6XFxuYCArXG4gICAgICBgICAgIGxpc3RLZXk6ICR7ZGVidWdJbmZvLmxpc3RLZXl9XFxuYCArXG4gICAgICBgICAgIGNlbGxLZXk6ICR7ZGVidWdJbmZvLmNlbGxLZXl9YDtcbiAgICBkZWJ1Z0luZm8gPSBkZWJ1Z0luZm8ucGFyZW50O1xuICB9XG4gIHJldHVybiB0cmFjZTtcbn1cblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICB2ZXJ0aWNhbGx5SW52ZXJ0ZWQ6IHtcbiAgICB0cmFuc2Zvcm06IFt7c2NhbGVZOiAtMX1dLFxuICB9LFxuICBob3Jpem9udGFsbHlJbnZlcnRlZDoge1xuICAgIHRyYW5zZm9ybTogW3tzY2FsZVg6IC0xfV0sXG4gIH0sXG4gIHJvdzoge1xuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICB9LFxuICByb3dSZXZlcnNlOiB7XG4gICAgZmxleERpcmVjdGlvbjogJ3Jvdy1yZXZlcnNlJyxcbiAgfSxcbiAgY29sdW1uUmV2ZXJzZToge1xuICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4tcmV2ZXJzZScsXG4gIH0sXG4gIGRlYnVnOiB7XG4gICAgZmxleDogMSxcbiAgfSxcbiAgZGVidWdPdmVybGF5QmFzZToge1xuICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgIHRvcDogMCxcbiAgICByaWdodDogMCxcbiAgfSxcbiAgZGVidWdPdmVybGF5OiB7XG4gICAgYm90dG9tOiAwLFxuICAgIHdpZHRoOiAyMCxcbiAgICBib3JkZXJDb2xvcjogJ2JsdWUnLFxuICAgIGJvcmRlcldpZHRoOiAxLFxuICB9LFxuICBkZWJ1Z092ZXJsYXlGcmFtZToge1xuICAgIGxlZnQ6IDAsXG4gICAgYmFja2dyb3VuZENvbG9yOiAnb3JhbmdlJyxcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVMYXN0OiB7XG4gICAgbGVmdDogMCxcbiAgICBib3JkZXJDb2xvcjogJ2dyZWVuJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWVWaXM6IHtcbiAgICBsZWZ0OiAwLFxuICAgIGJvcmRlckNvbG9yOiAncmVkJyxcbiAgICBib3JkZXJXaWR0aDogMixcbiAgfSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZpcnR1YWxpemVkTGlzdDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFtQkE7QUFPQTtBQUlBO0FBQStCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFL0IsSUFBTUEsY0FBYyxHQUFHQyxPQUFPLENBQUMsNkNBQTZDLENBQUM7QUFDN0UsSUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMscUNBQXFDLENBQUM7QUFDakUsSUFBTUUsSUFBSSxHQUFHRixPQUFPLENBQUMseUJBQXlCLENBQUM7QUFDL0MsSUFBTUcsV0FBVyxHQUFHSCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDekQsSUFBTUksV0FBVyxHQUFHSixPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDNUQsSUFBTUssWUFBWSxHQUFHTCxPQUFPLENBQUMsNEJBQTRCLENBQUM7QUFDMUQsSUFBTU0sVUFBVSxHQUFHTixPQUFPLENBQUMsMEJBQTBCLENBQUM7QUFDdEQsSUFBTU8sT0FBTyxHQUFHUCxPQUFPLENBQUMsc0JBQXNCLENBQUM7QUFDL0MsSUFBTVEsY0FBYyxHQUFHUixPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDbEQsSUFBTVMsaUJBQWlCLEdBQUdULE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUN4RCxJQUFNVSxTQUFTLEdBQUdWLE9BQU8sQ0FBQyxX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